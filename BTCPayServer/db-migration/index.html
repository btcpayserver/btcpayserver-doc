<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Migration from SQLite and MySQL to Postgres | BTCPay Server</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="stylesheet" href="/styles/btcpayserver-variables.css">
    <meta name="description" content="BTCPay Server Official Documentation">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    
    <link rel="preload" href="/assets/css/0.styles.4b250e51.css" as="style"><link rel="preload" href="/assets/js/app.e9d299e8.js" as="script"><link rel="preload" href="/assets/js/3.4f87bb5f.js" as="script"><link rel="preload" href="/assets/js/15.cc918b98.js" as="script"><link rel="preload" href="/assets/js/80.c2b149fa.js" as="script"><link rel="prefetch" href="/assets/js/10.9557d386.js"><link rel="prefetch" href="/assets/js/100.6aee05d4.js"><link rel="prefetch" href="/assets/js/101.712986ed.js"><link rel="prefetch" href="/assets/js/102.a295d0de.js"><link rel="prefetch" href="/assets/js/103.b12c28fb.js"><link rel="prefetch" href="/assets/js/104.4e6afd54.js"><link rel="prefetch" href="/assets/js/105.b9242195.js"><link rel="prefetch" href="/assets/js/106.74d531a1.js"><link rel="prefetch" href="/assets/js/107.65df02fb.js"><link rel="prefetch" href="/assets/js/108.71799aca.js"><link rel="prefetch" href="/assets/js/109.f672c5ef.js"><link rel="prefetch" href="/assets/js/11.5a384aeb.js"><link rel="prefetch" href="/assets/js/110.58d35b77.js"><link rel="prefetch" href="/assets/js/111.0062e7d7.js"><link rel="prefetch" href="/assets/js/112.61722a27.js"><link rel="prefetch" href="/assets/js/113.ed1cc2eb.js"><link rel="prefetch" href="/assets/js/114.3658a4ff.js"><link rel="prefetch" href="/assets/js/115.0200cb7f.js"><link rel="prefetch" href="/assets/js/116.5bcdb3fd.js"><link rel="prefetch" href="/assets/js/117.2620d70f.js"><link rel="prefetch" href="/assets/js/118.2d6c506a.js"><link rel="prefetch" href="/assets/js/119.5ad0aad1.js"><link rel="prefetch" href="/assets/js/12.6a1eb32a.js"><link rel="prefetch" href="/assets/js/120.9aa03742.js"><link rel="prefetch" href="/assets/js/121.ddaac92b.js"><link rel="prefetch" href="/assets/js/122.3e64a74d.js"><link rel="prefetch" href="/assets/js/123.be481c72.js"><link rel="prefetch" href="/assets/js/124.0810bcea.js"><link rel="prefetch" href="/assets/js/125.caa74277.js"><link rel="prefetch" href="/assets/js/126.fb38eaa5.js"><link rel="prefetch" href="/assets/js/127.cdd5b480.js"><link rel="prefetch" href="/assets/js/128.dc4e8f2a.js"><link rel="prefetch" href="/assets/js/129.d508514e.js"><link rel="prefetch" href="/assets/js/13.eb240618.js"><link rel="prefetch" href="/assets/js/130.17153051.js"><link rel="prefetch" href="/assets/js/131.b57c18a1.js"><link rel="prefetch" href="/assets/js/132.855b9086.js"><link rel="prefetch" href="/assets/js/133.cc984216.js"><link rel="prefetch" href="/assets/js/134.e5c326c5.js"><link rel="prefetch" href="/assets/js/135.0392f003.js"><link rel="prefetch" href="/assets/js/136.346fad72.js"><link rel="prefetch" href="/assets/js/137.c9e39b3f.js"><link rel="prefetch" href="/assets/js/138.2cf06714.js"><link rel="prefetch" href="/assets/js/139.aa2e6332.js"><link rel="prefetch" href="/assets/js/14.5f8ecd15.js"><link rel="prefetch" href="/assets/js/140.95b0d12e.js"><link rel="prefetch" href="/assets/js/141.2317a49c.js"><link rel="prefetch" href="/assets/js/16.22dc6e78.js"><link rel="prefetch" href="/assets/js/17.003ff711.js"><link rel="prefetch" href="/assets/js/18.6de6eccf.js"><link rel="prefetch" href="/assets/js/19.2945a966.js"><link rel="prefetch" href="/assets/js/20.5e937b55.js"><link rel="prefetch" href="/assets/js/21.92c85cda.js"><link rel="prefetch" href="/assets/js/22.baf2d0d4.js"><link rel="prefetch" href="/assets/js/23.38500164.js"><link rel="prefetch" href="/assets/js/24.e0e1f986.js"><link rel="prefetch" href="/assets/js/25.bdc18ed4.js"><link rel="prefetch" href="/assets/js/26.6c3a9675.js"><link rel="prefetch" href="/assets/js/27.9df83a94.js"><link rel="prefetch" href="/assets/js/28.6e9bfeca.js"><link rel="prefetch" href="/assets/js/29.0b77a44c.js"><link rel="prefetch" href="/assets/js/30.3a25db96.js"><link rel="prefetch" href="/assets/js/31.8db7408d.js"><link rel="prefetch" href="/assets/js/32.af0676d8.js"><link rel="prefetch" href="/assets/js/33.2abf4e51.js"><link rel="prefetch" href="/assets/js/34.a4fe410e.js"><link rel="prefetch" href="/assets/js/35.3593347e.js"><link rel="prefetch" href="/assets/js/36.3aeb340f.js"><link rel="prefetch" href="/assets/js/37.7bd3e790.js"><link rel="prefetch" href="/assets/js/38.a02c14b0.js"><link rel="prefetch" href="/assets/js/39.91963e9b.js"><link rel="prefetch" href="/assets/js/4.1c3b7e08.js"><link rel="prefetch" href="/assets/js/40.858bc962.js"><link rel="prefetch" href="/assets/js/41.b604433a.js"><link rel="prefetch" href="/assets/js/42.c71fdf12.js"><link rel="prefetch" href="/assets/js/43.ba128b68.js"><link rel="prefetch" href="/assets/js/44.815a1d59.js"><link rel="prefetch" href="/assets/js/45.e703657f.js"><link rel="prefetch" href="/assets/js/46.9bbfd9ab.js"><link rel="prefetch" href="/assets/js/47.fac59f4d.js"><link rel="prefetch" href="/assets/js/48.0eb005a7.js"><link rel="prefetch" href="/assets/js/49.be388a83.js"><link rel="prefetch" href="/assets/js/5.1f2662e8.js"><link rel="prefetch" href="/assets/js/50.9d676f0c.js"><link rel="prefetch" href="/assets/js/51.58b0d98f.js"><link rel="prefetch" href="/assets/js/52.63e8b473.js"><link rel="prefetch" href="/assets/js/53.cd31e046.js"><link rel="prefetch" href="/assets/js/54.54d2a17d.js"><link rel="prefetch" href="/assets/js/55.5fc17228.js"><link rel="prefetch" href="/assets/js/56.2e483927.js"><link rel="prefetch" href="/assets/js/57.db6a1516.js"><link rel="prefetch" href="/assets/js/58.0f2a6c03.js"><link rel="prefetch" href="/assets/js/59.c52857e9.js"><link rel="prefetch" href="/assets/js/6.74a3470f.js"><link rel="prefetch" href="/assets/js/60.e35848e6.js"><link rel="prefetch" href="/assets/js/61.cc487bea.js"><link rel="prefetch" href="/assets/js/62.efe9377c.js"><link rel="prefetch" href="/assets/js/63.de08658b.js"><link rel="prefetch" href="/assets/js/64.b48ceef6.js"><link rel="prefetch" href="/assets/js/65.9e7e749b.js"><link rel="prefetch" href="/assets/js/66.f3c38a64.js"><link rel="prefetch" href="/assets/js/67.848c476d.js"><link rel="prefetch" href="/assets/js/68.0ffbaa1c.js"><link rel="prefetch" href="/assets/js/69.3df8dbbe.js"><link rel="prefetch" href="/assets/js/7.4ff6d5a8.js"><link rel="prefetch" href="/assets/js/70.4854ca60.js"><link rel="prefetch" href="/assets/js/71.5eb4defc.js"><link rel="prefetch" href="/assets/js/72.adfe695d.js"><link rel="prefetch" href="/assets/js/73.919b76f2.js"><link rel="prefetch" href="/assets/js/74.5a160fbf.js"><link rel="prefetch" href="/assets/js/75.994c51b9.js"><link rel="prefetch" href="/assets/js/76.4bfccf2e.js"><link rel="prefetch" href="/assets/js/77.411eb8f4.js"><link rel="prefetch" href="/assets/js/78.eb53a594.js"><link rel="prefetch" href="/assets/js/79.04483a9e.js"><link rel="prefetch" href="/assets/js/8.2be410aa.js"><link rel="prefetch" href="/assets/js/81.b5ee760b.js"><link rel="prefetch" href="/assets/js/82.1919a15a.js"><link rel="prefetch" href="/assets/js/83.e64c3b5f.js"><link rel="prefetch" href="/assets/js/84.7f0a5d14.js"><link rel="prefetch" href="/assets/js/85.656db013.js"><link rel="prefetch" href="/assets/js/86.c3b50781.js"><link rel="prefetch" href="/assets/js/87.5db12b88.js"><link rel="prefetch" href="/assets/js/88.2ff32fd8.js"><link rel="prefetch" href="/assets/js/89.b110dc20.js"><link rel="prefetch" href="/assets/js/9.7adc0427.js"><link rel="prefetch" href="/assets/js/90.2b29811c.js"><link rel="prefetch" href="/assets/js/91.b51d2c2b.js"><link rel="prefetch" href="/assets/js/92.9a1983bb.js"><link rel="prefetch" href="/assets/js/93.436cbeae.js"><link rel="prefetch" href="/assets/js/94.d762265b.js"><link rel="prefetch" href="/assets/js/95.da97de1b.js"><link rel="prefetch" href="/assets/js/96.ab9fc06f.js"><link rel="prefetch" href="/assets/js/97.f6b03dfb.js"><link rel="prefetch" href="/assets/js/98.8d2fb8aa.js"><link rel="prefetch" href="/assets/js/99.0c52bae3.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.237fb3be.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4b250e51.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/btcpay-logo.svg" alt="BTCPay Server" class="logo"> <span class="site-name can-hide">BTCPay Server</span></a> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Guide/" class="nav-link">
  User Guide
</a></div><div class="nav-item"><a href="/Deployment/" class="nav-link">
  Deployment
</a></div><div class="nav-item"><a href="/Development/" class="nav-link">
  Developers
</a></div><div class="nav-item"><a href="/Contribute/" class="nav-link">
  Contribute
</a></div><div class="nav-item"><a href="/FAQ/" class="nav-link">
  FAQ
</a></div> <a href="https://github.com/btcpayserver/btcpayserver-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide social"><div class="nav-item"><a href="https://btcpayserver.org/" target="_blank" rel="noopener noreferrer website" class="nav-link external">
  Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://chat.btcpayserver.org/" target="_blank" rel="noopener noreferrer chat" class="nav-link external">
  Chat
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/btcpayserver/" target="_blank" rel="noopener noreferrer github" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://twitter.com/BtcpayServer" target="_blank" rel="noopener noreferrer twitter" class="nav-link external">
  Twitter
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/btcpayserver/btcpayserver-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <button type="button" class="btcpay-theme-switch"><svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path transform="translate(1 1)" d="M2.72 0A3.988 3.988 0 000 3.78c0 2.21 1.79 4 4 4 1.76 0 3.25-1.14 3.78-2.72-.4.13-.83.22-1.28.22-2.21 0-4-1.79-4-4 0-.45.08-.88.22-1.28z" class="btcpay-theme-switch-dark"></path><path transform="translate(1 1)" d="M4 0c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5S4.28 0 4 0zM1.5 1c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm5 0c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zM4 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM.5 3.5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm7 0c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zM1.5 6c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm5 0c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zM4 7c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5S4.28 7 4 7z" class="btcpay-theme-switch-light"></path></svg></button></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links social"><div class="nav-item"><a href="https://btcpayserver.org/" target="_blank" rel="noopener noreferrer website" class="nav-link external">
  Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://chat.btcpayserver.org/" target="_blank" rel="noopener noreferrer chat" class="nav-link external">
  Chat
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/btcpayserver/" target="_blank" rel="noopener noreferrer github" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://twitter.com/BtcpayServer" target="_blank" rel="noopener noreferrer twitter" class="nav-link external">
  Twitter
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/btcpayserver/btcpayserver-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <nav class="nav-links"><div class="nav-item"><a href="/Guide/" class="nav-link">
  User Guide
</a></div><div class="nav-item"><a href="/Deployment/" class="nav-link">
  Deployment
</a></div><div class="nav-item"><a href="/Development/" class="nav-link">
  Developers
</a></div><div class="nav-item"><a href="/Contribute/" class="nav-link">
  Contribute
</a></div><div class="nav-item"><a href="/FAQ/" class="nav-link">
  FAQ
</a></div> <a href="https://github.com/btcpayserver/btcpayserver-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Greenfield API</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="https://docs.btcpayserver.org/API/Greenfield/v1" target="_blank" rel="noopener noreferrer" class="sidebar-link">Greenfield API v1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li><a href="/BTCPayServer/greenfield-authorization/" class="sidebar-link">GreenField API Authorization Flow</a></li><li><a href="/Development/GreenFieldExample/" class="sidebar-link">Greenfield API example with cURL</a></li><li><a href="/Development/GreenFieldExample-NodeJS/" class="sidebar-link">Greenfield API example with Node.JS (JavaScript)</a></li><li><a href="/Development/GreenfieldExample-PHP/" class="sidebar-link">Greenfield API examples with PHP</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Development</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Development/" class="sidebar-link">Architecture</a></li><li><a href="/Development/LocalDevelopment/" class="sidebar-link">Local development</a></li><li><a href="/BTCPayServer/greenfield-development/" class="sidebar-link">Greenfield API Development</a></li><li><a href="/Development/Plugins/" class="sidebar-link">Plugins</a></li><li><a href="/Development/Altcoins/" class="sidebar-link">How to add an Altcoin</a></li><li><a href="/Development/InvoiceMetadata/" class="sidebar-link">Invoice metadata</a></li><li><a href="/Development/Theme/" class="sidebar-link">Customizing themes</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>NBXplorer</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/NBXplorer/" class="sidebar-link">Overview</a></li><li><a href="/NBXplorer/API/" class="sidebar-link">API Specification</a></li><li><a href="/NBXplorer/Postgres-Schema/" class="sidebar-link">Postgres Schema</a></li><li><a href="/NBXplorer/Postgres-Migration/" class="sidebar-link">Postgres Migration</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>More</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/Vault/" class="sidebar-heading clickable"><span>BTCPay Server Vault</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/BTCPayServer/Security/" class="sidebar-link">Security Disclosures</a></li><li><a href="/Development/TestnetDemo/" class="sidebar-link">Testnet deployment</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="migration-from-sqlite-and-mysql-to-postgres"><a href="#migration-from-sqlite-and-mysql-to-postgres" class="header-anchor">#</a> Migration from SQLite and MySQL to Postgres</h1> <h2 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h2> <p>This document is intended for BTCPay Server integrators such as Raspiblitz, Umbrel, Embassy OS or anybody running BTCPay Server on SQLite or MySql.</p> <p>If you are a user of an integrated solution, please contact the integrator directly and provide them with the link to this document.</p> <p>BTCPay Server has for long time supported three different backends:</p> <ol><li>Postgres</li> <li>SQLite</li> <li>MySql</li></ol> <p>While most of our users are using the Postgres backend, maintaining supports for all those databases has been very challenging, and Postgres is the only one part of our test suite.</p> <p>As a result, we regret to inform you that we decided to stop the support of MySql and SQLite.</p> <p>We understand that dropping support might be painful for users and integrators of our product, and we will do our best to provide a migration path.</p> <p>Please keep us informed if you experience any issues while migrating on <a href="https://chat.btcpayserver.org" target="_blank" rel="noopener noreferrer">our community chat<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="procedure"><a href="#procedure" class="header-anchor">#</a> Procedure</h2> <p>In order to successfully migrate, you will need to run BTCPay Server <code>1.7.8 or newer</code>.</p> <p>As a reminder there are three settings controlling the choice of backend of BTCPay Server which can be controller by command line, environment variable or configuration settings.</p> <table><thead><tr><th>Command line argument</th> <th>Environment variable</th></tr></thead> <tbody><tr><td>--postgres</td> <td>BTCPAY_POSTGRES=&quot;...&quot;</td></tr> <tr><td>--mysql</td> <td>BTCPAY_MYSQL=&quot;...&quot;</td></tr> <tr><td>--sqlitefile</td> <td>BTCPAY_SQLITEFILE=&quot;blah.db&quot;</td></tr></tbody></table> <p>If you are currently using <code>mysql</code> or <code>sqlitefile</code>, and you wish to migrate to postgres, you simply need to add the command line argument <code>--postgres</code> or the environment variable <code>BTCPAY_POSTGRES</code> pointing to a fresh postgres database.</p> <p>It is strongly advised not to create a database in Postgres before performing the migration with BTCPay Server. This is because BTCPay Server will automatically create the necessary database for you. However, if you must create the database manually, please ensure that the <code>C_TYPE</code> and <code>COLLATE</code> settings are both set to <code>C</code>.</p> <p><strong>Careful: Do not remove the former mysql or sqlitefile setting, you should have both: the postgres setting and the former sqlite/mysql setting</strong></p> <p>From <code>1.7.8</code>, BTCPay Server will interprete this and attempt to copy the data from mysql and sqlite into the new postgres database.</p> <p>Note that once the migration is complete, the old <code>mysql</code> and <code>sqlite</code> settings will simply be ignored.</p> <p>If the migration fails, you can revert the <code>postgres</code> setting you added, so the next restart will run on the old unsupported database. You can retry a migration by adding the <code>postgres</code> setting again.</p> <h2 id="known-issues"><a href="#known-issues" class="header-anchor">#</a> Known issues</h2> <ul><li>The migration script isn't very optimized, and will attempt to load every table in memory. If your <code>sqlite</code> or <code>mysql</code> database is too big, you may experience an Out Of Memory issue. If that happen to you, please contact us.</li> <li>There are no migration for plugin's data.</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/btcpayserver/btcpayserver/edit/master/docs/db-migration.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="edit-link"><a href="https://github.com/btcpayserver/btcpayserver-doc/issues/new?title=Improve%20Migration%20from%20SQLite%20and%20MySQL%20to%20Postgres&amp;body=I%20could%20not%20find%20the%20information%20I%20was%20looking%20for%20on%20the%20%22Migration%20from%20SQLite%20and%20MySQL%20to%20Postgres%22%20page%20(%60%2FBTCPayServer%2Fdb-migration%2F%60).%0A%0A%5BPLEASE%20DESCRIBE%20HOW%20THE%20PAGE%20CAN%20BE%20IMPROVED%5D&amp;labels=question" target="_blank" rel="noopener noreferrer">Didn't find an answer?</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.e9d299e8.js" defer></script><script src="/assets/js/3.4f87bb5f.js" defer></script><script src="/assets/js/15.cc918b98.js" defer></script><script src="/assets/js/80.c2b149fa.js" defer></script>
  </body>
</html>
