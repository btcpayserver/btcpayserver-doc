<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>BTCPay Synchronization Issues | BTCPay Server Docs</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="stylesheet" href="/styles/btcpayserver-variables.css">
    <meta name="description" content="BTCPay Server Official Documentation">
    <meta property="og:site_name" content="BTCPay Server Docs">
    <meta property="og:title" content="BTCPay Synchronization Issues">
    <meta property="og:description" content="This document covers the most common questions and issues that may occur during BTCPay sync.">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://docs.btcpayserver.org/FAQ/FAQ-Synchronization/">
    <meta property="og:image" content="https://docs.btcpayserver.org/card.png">
    <meta name="twitter:title" content="BTCPay Synchronization Issues">
    <meta name="twitter:description" content="This document covers the most common questions and issues that may occur during BTCPay sync.">
    <meta name="twitter:url" content="https://docs.btcpayserver.org/FAQ/FAQ-Synchronization/">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:image" content="https://docs.btcpayserver.org/card.png">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="BTCPay Server Docs">
    <meta name="twitter:creator" content="btcpayserver">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="BTCPay Server">
    <meta property="article:tag" content="BTCPay Server">
    
    <link rel="preload" href="/assets/css/0.styles.aa878b9c.css" as="style"><link rel="preload" href="/assets/js/app.3e743670.js" as="script"><link rel="preload" href="/assets/js/3.aa1712e0.js" as="script"><link rel="preload" href="/assets/js/79.08cf98ca.js" as="script"><link rel="preload" href="/assets/js/28.ed6af585.js" as="script"><link rel="prefetch" href="/assets/js/10.3a0a5d27.js"><link rel="prefetch" href="/assets/js/11.b1b70333.js"><link rel="prefetch" href="/assets/js/12.fbb2d827.js"><link rel="prefetch" href="/assets/js/13.12a8698e.js"><link rel="prefetch" href="/assets/js/14.3ce62c2f.js"><link rel="prefetch" href="/assets/js/15.af63728e.js"><link rel="prefetch" href="/assets/js/16.07a14b03.js"><link rel="prefetch" href="/assets/js/17.a8920303.js"><link rel="prefetch" href="/assets/js/18.e0b1b1ec.js"><link rel="prefetch" href="/assets/js/19.abd6aa6d.js"><link rel="prefetch" href="/assets/js/20.d3ed4617.js"><link rel="prefetch" href="/assets/js/21.e078310c.js"><link rel="prefetch" href="/assets/js/22.310d1a38.js"><link rel="prefetch" href="/assets/js/23.93964d5d.js"><link rel="prefetch" href="/assets/js/24.ef7f693b.js"><link rel="prefetch" href="/assets/js/25.c62a0aa4.js"><link rel="prefetch" href="/assets/js/26.93ad068b.js"><link rel="prefetch" href="/assets/js/27.d34e5e35.js"><link rel="prefetch" href="/assets/js/29.1927e873.js"><link rel="prefetch" href="/assets/js/30.3d119335.js"><link rel="prefetch" href="/assets/js/31.a3699e8e.js"><link rel="prefetch" href="/assets/js/32.7e916537.js"><link rel="prefetch" href="/assets/js/33.6b95d9f1.js"><link rel="prefetch" href="/assets/js/34.a64b838b.js"><link rel="prefetch" href="/assets/js/35.7c8fa13d.js"><link rel="prefetch" href="/assets/js/36.30643837.js"><link rel="prefetch" href="/assets/js/37.b86058d8.js"><link rel="prefetch" href="/assets/js/38.d8a24972.js"><link rel="prefetch" href="/assets/js/39.39ffaad0.js"><link rel="prefetch" href="/assets/js/4.32b4e6f9.js"><link rel="prefetch" href="/assets/js/40.326657e1.js"><link rel="prefetch" href="/assets/js/41.1ec23881.js"><link rel="prefetch" href="/assets/js/42.a2429534.js"><link rel="prefetch" href="/assets/js/43.d82659dc.js"><link rel="prefetch" href="/assets/js/44.62c03fa6.js"><link rel="prefetch" href="/assets/js/45.32d3962a.js"><link rel="prefetch" href="/assets/js/46.33bb47d4.js"><link rel="prefetch" href="/assets/js/47.53b2b36d.js"><link rel="prefetch" href="/assets/js/48.0274a01c.js"><link rel="prefetch" href="/assets/js/49.8ec72738.js"><link rel="prefetch" href="/assets/js/5.3a8c8f4b.js"><link rel="prefetch" href="/assets/js/50.53cfdd93.js"><link rel="prefetch" href="/assets/js/51.9a71d339.js"><link rel="prefetch" href="/assets/js/52.1d073968.js"><link rel="prefetch" href="/assets/js/53.1266553e.js"><link rel="prefetch" href="/assets/js/54.6f9a3666.js"><link rel="prefetch" href="/assets/js/55.b7d0ab4b.js"><link rel="prefetch" href="/assets/js/56.f9d9f536.js"><link rel="prefetch" href="/assets/js/57.dfe9eb68.js"><link rel="prefetch" href="/assets/js/58.98363b8a.js"><link rel="prefetch" href="/assets/js/59.539a99cb.js"><link rel="prefetch" href="/assets/js/6.2b5d9249.js"><link rel="prefetch" href="/assets/js/60.5d34424d.js"><link rel="prefetch" href="/assets/js/61.e828e58a.js"><link rel="prefetch" href="/assets/js/62.67d4d43d.js"><link rel="prefetch" href="/assets/js/63.0d098f54.js"><link rel="prefetch" href="/assets/js/64.48dbc6c2.js"><link rel="prefetch" href="/assets/js/65.98ed2be4.js"><link rel="prefetch" href="/assets/js/66.acf9dd81.js"><link rel="prefetch" href="/assets/js/67.365a5a7e.js"><link rel="prefetch" href="/assets/js/68.fe0dd8cc.js"><link rel="prefetch" href="/assets/js/69.e714b843.js"><link rel="prefetch" href="/assets/js/7.8964f754.js"><link rel="prefetch" href="/assets/js/70.eaf0d684.js"><link rel="prefetch" href="/assets/js/71.db7c72c5.js"><link rel="prefetch" href="/assets/js/72.6a51ce83.js"><link rel="prefetch" href="/assets/js/73.1f772bd8.js"><link rel="prefetch" href="/assets/js/74.4caaf1f4.js"><link rel="prefetch" href="/assets/js/75.540c7ae1.js"><link rel="prefetch" href="/assets/js/76.e7ae2c11.js"><link rel="prefetch" href="/assets/js/77.a9920ba7.js"><link rel="prefetch" href="/assets/js/78.a922a4ae.js"><link rel="prefetch" href="/assets/js/8.2a1e7b10.js"><link rel="prefetch" href="/assets/js/80.56fbed8c.js"><link rel="prefetch" href="/assets/js/81.a1320e9b.js"><link rel="prefetch" href="/assets/js/82.da6c518d.js"><link rel="prefetch" href="/assets/js/83.2bc79146.js"><link rel="prefetch" href="/assets/js/84.17126a4b.js"><link rel="prefetch" href="/assets/js/85.66f91d91.js"><link rel="prefetch" href="/assets/js/86.32ac9882.js"><link rel="prefetch" href="/assets/js/87.1d161495.js"><link rel="prefetch" href="/assets/js/88.c1f12b5f.js"><link rel="prefetch" href="/assets/js/89.a318c3fc.js"><link rel="prefetch" href="/assets/js/9.c4ffd9e7.js"><link rel="prefetch" href="/assets/js/90.c30abebb.js"><link rel="prefetch" href="/assets/js/91.1633d59a.js"><link rel="prefetch" href="/assets/js/92.f1745853.js"><link rel="prefetch" href="/assets/js/93.cbff83c7.js"><link rel="prefetch" href="/assets/js/94.964fd8e6.js"><link rel="prefetch" href="/assets/js/95.eaca7976.js"><link rel="prefetch" href="/assets/js/96.c788081d.js"><link rel="prefetch" href="/assets/js/97.741a1b7e.js"><link rel="prefetch" href="/assets/js/98.b1eb9e6e.js"><link rel="prefetch" href="/assets/js/99.e6f02097.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.3818bd5d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.aa878b9c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/btcpay-logo.svg" alt="BTCPay Server Docs" class="logo"> <span class="site-name can-hide">BTCPay Server Docs</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://btcpayserver.org/" target="_blank" rel="noopener noreferrer website" class="nav-link external">
  Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://chat.btcpayserver.org/" target="_blank" rel="noopener noreferrer chat" class="nav-link external">
  Chat
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/btcpayserver/" target="_blank" rel="noopener noreferrer github" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://twitter.com/BtcpayServer" target="_blank" rel="noopener noreferrer twitter" class="nav-link external">
  Twitter
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/btcpayserver/btcpayserver-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://btcpayserver.org/" target="_blank" rel="noopener noreferrer website" class="nav-link external">
  Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://chat.btcpayserver.org/" target="_blank" rel="noopener noreferrer chat" class="nav-link external">
  Chat
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/btcpayserver/" target="_blank" rel="noopener noreferrer github" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://twitter.com/BtcpayServer" target="_blank" rel="noopener noreferrer twitter" class="nav-link external">
  Twitter
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/btcpayserver/btcpayserver-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">Introduction</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Basics</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/UseCase/" class="sidebar-link">Use Case</a></li><li><a href="/Walkthrough/" class="sidebar-link">Walkthrough</a></li><li><a href="/BTCPayVsOthers/" class="sidebar-link">BTCPay Server vs. Others</a></li><li><a href="/TryItOut/" class="sidebar-link">Try it out</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Deployment</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Deployment/" class="sidebar-link">Choosing a Deployment Method</a></li><li><a href="/ThirdPartyHosting/" class="sidebar-link">Third-party Hosting</a></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/Docker/" class="sidebar-heading clickable"><span>Docker</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/LunaNodeWebDeployment/" class="sidebar-link">Web Deployment</a></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><a href="/AzureDeployment" class="sidebar-heading clickable"><span>Azure Deployment</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/GoogleCloudDeployment/" class="sidebar-link">Google Cloud Deployment</a></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><a href="/HardwareDeployment" class="sidebar-heading clickable"><span>Hardware Deployment</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><a href="/RaspberryPiDeployment" class="sidebar-heading clickable"><span>Raspberry Pi Deployment</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>Docker Plugins</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/ManualDeployment" class="sidebar-heading clickable"><span>Manual Deployment</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/Configurator/" class="sidebar-link">Configurator</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Getting Started</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/RegisterAccount/" class="sidebar-link">(1) Register account</a></li><li><a href="/CreateStore/" class="sidebar-link">(2) Create a store</a></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/WalletSetup" class="sidebar-heading clickable"><span>(3) Wallet Setup</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/HardwareWalletIntegration/" class="sidebar-link">Connect an existing wallet</a></li><li><a href="/HotWallet/" class="sidebar-link">Create a new wallet</a></li></ul></section></li><li><a href="/WhatsNext/" class="sidebar-link">(4) What's Next?</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Features</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Apps/" class="sidebar-link">Apps</a></li><li><a href="/Wallet/" class="sidebar-link">Wallet</a></li><li><a href="/Invoices/" class="sidebar-link">Invoices</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/PullPayments" class="sidebar-heading clickable"><span>Pull Payments</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/PaymentRequests/" class="sidebar-link">Payment Requests</a></li><li><a href="/LightningNetwork/" class="sidebar-link">Lightning Network</a></li><li><a href="/Accounting/" class="sidebar-link">Accounting</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/Payjoin" class="sidebar-heading clickable"><span>Payjoin</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Integrations</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/WooCommerce/" class="sidebar-link">WooCommerce</a></li><li><a href="/Shopify/" class="sidebar-link">Shopify</a></li><li><a href="/Drupal/" class="sidebar-link">Drupal</a></li><li><a href="/Magento/" class="sidebar-link">Magento</a></li><li><a href="/PrestaShop/" class="sidebar-link">PrestaShop</a></li><li><a href="https://github.com/lampsolutions/LampSBtcPayShopware" target="_blank" rel="noopener noreferrer" class="sidebar-link">Shopware<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li><a href="/CustomIntegration/" class="sidebar-link">Custom Integration</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Support and Community</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/FAQ" class="sidebar-heading clickable router-link-active open"><span>FAQ and common issues</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/FAQ/FAQ-General/" class="sidebar-link">General FAQ</a></li><li><a href="/FAQ/FAQ-Deployment/" class="sidebar-link">Deployment FAQ</a></li><li><a href="/FAQ/FAQ-Synchronization/" aria-current="page" class="active sidebar-link">Synchronization FAQ</a></li><li><a href="/FAQ/FAQ-Integrations/" class="sidebar-link">Integrations FAQ</a></li><li><a href="/FAQ/FAQ-ServerSettings/" class="sidebar-link">Server Settings FAQ</a></li><li><a href="/FAQ/FAQ-Stores/" class="sidebar-link">Stores FAQ</a></li><li><a href="/FAQ/FAQ-Wallet/" class="sidebar-link">Wallet FAQ</a></li><li><a href="/FAQ/FAQ-Apps/" class="sidebar-link">Apps FAQ</a></li><li><a href="/FAQ/FAQ-LightningNetwork/" class="sidebar-link">Lightning Network FAQ</a></li><li><a href="/FAQ/FAQ-Altcoin/" class="sidebar-link">Altcoins FAQ</a></li></ul></section></li><li><a href="/Troubleshooting/" class="sidebar-link">Troubleshooting an issue</a></li><li><a href="/Support/" class="sidebar-link">Support</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/Contribute" class="sidebar-heading clickable"><span>Contribute to BTCPay Server</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/Community/" class="sidebar-link">Community</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Development</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Architecture/" class="sidebar-link">Architecture</a></li><li><a href="/LocalDevelopment/" class="sidebar-link">Developing Locally</a></li><li><a href="/Altcoins/" class="sidebar-link">How to add an Altcoin</a></li><li><a href="/Theme/" class="sidebar-link">Customizing Themes</a></li><li><a href="https://docs.btcpayserver.org/API/Greenfield/v1" target="_blank" rel="noopener noreferrer" class="sidebar-link">Greenfield API v1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li><a href="/GreenFieldExample/" class="sidebar-link">Greenfield example with cURL</a></li><li><a href="/BTCPayServer/Security/" class="sidebar-link">Security Disclosures</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="btcpay-synchronization-issues"><a href="#btcpay-synchronization-issues" class="header-anchor">#</a> BTCPay Synchronization Issues</h1> <p>This document covers the most common questions and issues that may occur during BTCPay sync.</p> <ul><li><a href="#why-does-btcpay-sync">Why does BTCPay sync?</a></li> <li><a href="#can-i-skip-the-synchronization">Can I skip/speed up the sync?</a></li> <li><a href="#how-do-i-know-that-btcpay-synced-completely">How do I know that the sync is finished?</a></li> <li><a href="#how-can-i-check-the-block-height-of-my-bitcoin-node">How can I check the block height of my bitcoin node?</a></li> <li><a href="#btcpay-server-takes-forever-to-synchronize">BTCPay takes forever to synchronize</a></li> <li><a href="#btcpay-server-keeps-showing-that-my-node-is-always-starting">BTCPay Server keeps showing that my node is always starting</a></li> <li><a href="#im-running-a-full-node-and-have-a-synched-blockchain-can-btcpay-use-it-so-that-it-doesnt-have-to-do-a-full-sync">I already have a synced full node, can I use it with BTCPay?</a></li> <li><a href="#how-to-enable-bitcoin-node-pruning">How to enable Bitcoin node pruning?</a></li> <li><a href="#how-to-disable-bitcoin-node-pruning">How to disable Bitcoin node pruning?</a></li></ul> <h2 id="why-does-btcpay-sync"><a href="#why-does-btcpay-sync" class="header-anchor">#</a> Why does BTCPay sync?</h2> <p>After deployment, your BTCPay Server needs to sync the entire blockchain and validate all the consensus rules. Depending on your machine specifications, bandwidth and number of altcoins you added, this process may take between 1-5 days.</p> <p>It may seem tedious, but it's a critical step of running your own full node and not having to trust or rely on anyone. Your node will not only download ~300GB of data (less if you're using a pruned node) but also validate all the rules of the consensus. You can find more information about the importance of blockchain synchronization in <a href="https://www.youtube.com/watch?v=OrYDehC-8TU" target="_blank" rel="noopener noreferrer">this video<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>If you are only interested in learning about BTCPay Server i.e. simply <a href="/TryItOut/">trying it out</a> without deploying your own instance, you can avoid sync by using a <a href="/ThirdPartyHosting/">Third-Party host</a>.</p> <h2 id="can-i-skip-the-synchronization"><a href="#can-i-skip-the-synchronization" class="header-anchor">#</a> Can I skip the synchronization?</h2> <p>You can't skip synchronization if you are deploying a BTCPay Server, but you can drastically decrease the time it takes. If you're comfortable with using the command line, you can use FastSync to synchronize your node faster. Be sure to <a href="https://github.com/btcpayserver/btcpayserver-docker/tree/master/contrib/FastSync" target="_blank" rel="noopener noreferrer">read this FastSync document<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to understand the potential trust issues involved with this feature.</p> <p>To use FastSync, make sure your deployment has a <a href="#how-to-enable-bitcoin-node-pruning">pruning option enabled</a> by using an <code>opt-save-storage</code> environment variable, otherwise bitcoind will not be able to sync. First step is to <a href="/FAQ/FAQ-ServerSettings/#how-to-ssh-into-my-btcpay-running-on-vps">ssh into</a> your BTCPayServer instance and run the following commands:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span> -
<span class="token builtin class-name">cd</span> <span class="token variable">$BTCPAY_BASE_DIRECTORY</span>/btcpayserver-docker/
btcpay-down.sh
<span class="token builtin class-name">cd</span> contrib/FastSync
./load-utxo-set.sh
<span class="token comment"># Once FastSync has completed</span>
btcpay-up.sh
</code></pre></div><p>After FastSync is complete and you have brought back up your instance, refresh your BTCPay domain and wait for remaining blockchain synchronization. You can also follow <a href="https://youtube.com/watch?v=VNMnd-dX9Q8?t=1730" target="_blank" rel="noopener noreferrer">this video<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>If your FastSync returns <code>You need to delete your Bitcoin Core wallet</code> after you load the uxto set, or you find this error: <code>Last wallet synchronisation goes beyond pruned data</code>, see the cause of <a href="#btcpay-server-keeps-showing-that-my-node-is-always-starting">BTCPay Server keeps showing that my node is always starting</a>.</p> <h2 id="how-do-i-know-that-btcpay-synced-completely"><a href="#how-do-i-know-that-btcpay-synced-completely" class="header-anchor">#</a> How do I know that BTCPay synced completely?</h2> <p>When you do not see a pop-up message in the bottom right corner, which shows the sync progress, that means that your server is fully synced and you can <a href="/RegisterAccount/">begin using it</a>.</p> <p>If you want to check that your BTCPay Server Bitcoin node is synchronized with the most recent block in the Bitcoin blockchain, <a href="#how-can-i-check-the-block-height-of-my-bitcoin-node">check your node height</a> matches the current block height using any blockchain explorer.</p> <h2 id="how-can-i-check-the-block-height-of-my-bitcoin-node"><a href="#how-can-i-check-the-block-height-of-my-bitcoin-node" class="header-anchor">#</a> How can I check the block height of my bitcoin node?</h2> <p>To verify the sync status of your Bitcoin node, you can use bitcoin-cli commands inside your server's Bitcoin container. SSH into your server and navigate to the directory where you <a href="/Troubleshooting/#23-bitcoin-node-logs">view Bitcoin logs</a> run the command: <code>bitcoin-cli.sh getblockcount</code> to view the current block of your server's Bitcoin node.</p> <h2 id="btcpay-server-takes-forever-to-synchronize"><a href="#btcpay-server-takes-forever-to-synchronize" class="header-anchor">#</a> BTCPay Server takes forever to synchronize</h2> <p>Synchronizing a Full Bitcoin node should take between 1 and 5 days. It should sync quickly at first and more slowly at the end.</p> <p>If the node appears to not be syncing, verify:</p> <ul><li>Not enough CPU</li> <li>Using swap memory</li></ul> <h3 id="cause-1-not-enough-cpu"><a href="#cause-1-not-enough-cpu" class="header-anchor">#</a> Cause 1: Not enough CPU</h3> <p>We recommend 2 CPU while synchronizing; however some hosting providers throttle your CPU if you use too much.</p> <p>Check with</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span> -
docker stats
</code></pre></div><p>If you see more than 100% CPU usage, while being very slow to sync:</p> <div class="language- extra-class"><pre class="language-text"><code>8e7ac41e6e2a        btcpayserver_bitcoind               100%               560.5MiB / 3.853GiB   14.20%              4.17
</code></pre></div><p>Then you need to scale up your machine specification.</p> <p>If you see very low CPU usage (less than 10%) during synchronization:</p> <div class="language- extra-class"><pre class="language-text"><code>8e7ac41e6e2a        btcpayserver_bitcoind               10%               560.5MiB / 3.853GiB   14.20%              4.17
</code></pre></div><p>Your hosting provider might throttle your CPU. Please make sure your host supports the high use of CPU for an extended period.</p> <p>If they don't allow it, shut down your server until they stop throttling you. Then you can limit the CPU via docker, and restart the server:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker update btcpayserver_bitcoind --cpus <span class="token string">&quot;.8&quot;</span>
</code></pre></div><h3 id="cause-2-using-swap-memory"><a href="#cause-2-using-swap-memory" class="header-anchor">#</a> Cause 2: Using swap memory</h3> <p>If you are synching and don't have enough memory, your server may use swap memory to continue operating:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span> -
<span class="token function">df</span> -h
</code></pre></div><p>If you see swap memory usage:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>              total        used        <span class="token function">free</span>      shared  buff/cache   available
Mem:           <span class="token number">2</span>.0G        <span class="token number">2</span>.0G        0M         66M        0G        0M
Swap:          <span class="token number">1</span>.0G        200M      800M
</code></pre></div><p>Then it means you need to scale up your server by adding more memory.</p> <h2 id="btcpay-server-keeps-showing-that-my-node-is-always-starting"><a href="#btcpay-server-keeps-showing-that-my-node-is-always-starting" class="header-anchor">#</a> BTCPay Server keeps showing that my node is always starting</h2> <p>Possible cause:</p> <ul><li>You do not have enough RAM</li> <li>You do not have enough storage</li> <li>You accidentally disabled pruning</li> <li>Your bitcoin data directory is corrupted</li> <li>Your last wallet synchronisation goes beyond pruned data</li></ul> <h3 id="cause-1-you-do-not-have-enough-ram"><a href="#cause-1-you-do-not-have-enough-ram" class="header-anchor">#</a> Cause 1: You do not have enough RAM</h3> <p>Check your RAM:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span> -
<span class="token function">free</span> -h
</code></pre></div><p>If you see that you have no <code>free</code> or very little <code>available</code> memory:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>              total        used        <span class="token function">free</span>      shared  buff/cache   available
Mem:           <span class="token number">2</span>.0G        <span class="token number">2</span>.0G        0M         66M        0G        0M
Swap:            0B          0B          0B
</code></pre></div><p>Then you need more memory. If you have already synched your node, you can add some swap memory. If you haven't, your server specs are too limited.</p> <p>If you have already synched, you can add 2G of swap memory with:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>fallocate -l 2G /mnt/swapfile
<span class="token function">chmod</span> <span class="token number">600</span> /mnt/swapfile
<span class="token function">mkswap</span> /mnt/swapfile
<span class="token function">swapon</span> /mnt/swapfile
<span class="token builtin class-name">echo</span> <span class="token string">&quot;/mnt/swapfile   none    swap    sw    0   0&quot;</span> <span class="token operator">&gt;&gt;</span> /etc/fstab
</code></pre></div><h3 id="cause-2-you-do-not-have-enough-storage"><a href="#cause-2-you-do-not-have-enough-storage" class="header-anchor">#</a> Cause 2: You do not have enough storage</h3> <p>Check the storage of your machine:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span> -
<span class="token function">df</span> -h
</code></pre></div><p>If you see you don't have any storage left (/dev/sda1 in my case)</p> <div class="language-bash extra-class"><pre class="language-bash"><code>Filesystem      Size  Used Avail Use% Mounted on
udev            <span class="token number">2</span>.0G     <span class="token number">0</span>  <span class="token number">2</span>.0G   <span class="token number">0</span>% /dev
tmpfs           395M   41M  354M  <span class="token number">11</span>% /run
/dev/sda1       125G  125G  0G   <span class="token number">100</span>% /
tmpfs           <span class="token number">2</span>.0G     <span class="token number">0</span>  <span class="token number">2</span>.0G   <span class="token number">0</span>% /dev/shm
tmpfs           <span class="token number">5</span>.0M     <span class="token number">0</span>  <span class="token number">5</span>.0M   <span class="token number">0</span>% /run/lock
tmpfs           <span class="token number">2</span>.0G     <span class="token number">0</span>  <span class="token number">2</span>.0G   <span class="token number">0</span>% /sys/fs/cgroup
/dev/sdb1       <span class="token number">7</span>.8G   18M  <span class="token number">7</span>.4G   <span class="token number">1</span>% /mnt
</code></pre></div><p><a href="https://github.com/btcpayserver/btcpayserver-docker/blob/master/README.md#generated-docker-compose" target="_blank" rel="noopener noreferrer">Choose the docker fragment<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for the amount of storage you aim to keep. Then <a href="https://github.com/btcpayserver/btcpayserver-docker/blob/master/README.md#how-i-can-prune-my-nodes" target="_blank" rel="noopener noreferrer">prune your node<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h3 id="cause-3-you-accidentally-disabled-pruning"><a href="#cause-3-you-accidentally-disabled-pruning" class="header-anchor">#</a> Cause 3: You accidentally disabled pruning</h3> <p>If you have recently tried to modify your environment variables using the <code>export BTCPAYGEN_ADDITIONAL_FRAGMENTS=&quot;xyz&quot;</code> command to add an additional fragment, but forgot to include your current ones, you may have disabled pruning.</p> <p>If you don't have enough memory to store the entire Bitcoin blockchain and you don't have an <code>opt-save-storage</code> listed when you <a href="https://github.com/btcpayserver/btcpayserver-doc/blob/b0873a216f871b0f7dc4958c8fa63c17c35b603d/docs/FAQ/FAQ-Deployment.md#how-can-i-modify-or-deactivate-environment-variables" target="_blank" rel="noopener noreferrer">print the complete list of options<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> that you are running, it is very likely you have disabled pruning.</p> <p>You can verify by checking your Bitcoind logs:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span> -
<span class="token builtin class-name">cd</span> btcpayserver-docker
docker logs --tail <span class="token number">100</span> btcpayserver_bitcoind
</code></pre></div><p>If you see:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>Block files have previously been pruned.
You need to rebuild the database using -reindex to go back to unpruned mode.  
This will redownload the entire blockchain. 
Please restart with -reindex or -reindex-chainstate to recover.
</code></pre></div><p>You can simply <a href="#how-to-enable-bitcoin-node-pruning">re-enable pruning</a> to solve the issue.</p> <h3 id="cause-4-your-bitcoin-data-directory-is-corrupted"><a href="#cause-4-your-bitcoin-data-directory-is-corrupted" class="header-anchor">#</a> Cause 4: Your bitcoin data directory is corrupted</h3> <p>Check the logs of your node:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span> -
docker logs --tail <span class="token number">10</span> btcpayserver_bitcoind
</code></pre></div><p>If you see:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>Please restart with -reindex or -reindex-chainstate to recover.
</code></pre></div><p>Then your bitcoin data directory has been corrupted. It may be physical damage or failure of the hard drive.
To reindex your node:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>btcpay-down.sh
<span class="token comment"># Delete 'blocks' and 'chainstate' folders</span>
<span class="token function">rm</span> -rf /var/lib/docker/volumes/generated_bitcoin_datadir/_data/blocks
<span class="token function">rm</span> -rf /var/lib/docker/volumes/generated_bitcoin_datadir/_data/chainstate
btcpay-up.sh
</code></pre></div><h3 id="cause-5-your-last-wallet-synchronisation-goes-beyond-pruned-data"><a href="#cause-5-your-last-wallet-synchronisation-goes-beyond-pruned-data" class="header-anchor">#</a> Cause 5: Your last wallet synchronisation goes beyond pruned data</h3> <p>This can happen if you use FastSync or import an already synched blockchain. It means that the bitcoin core wallet needs to be removed because it was created before the utxoset, likely because BTCPay Server started without the utxoset at the first boot. To verify this case, <a href="/Troubleshooting/#2-1-btcpay-logs">check the bitcoind log</a> for this:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>Error: Prune: last wallet synchronisation goes beyond pruned data. You need to -reindex <span class="token punctuation">(</span>download the whole blockchain again <span class="token keyword">in</span> <span class="token keyword">case</span> of pruned node<span class="token punctuation">)</span>
</code></pre></div><p>If you see this error and agree to remove the wallet to finish syncing, use <code>docker volume rm generated_bitcoin_wallet_datadir</code> after you run <code>btcpay-down.sh</code> and before you run <code>btcpay-up.sh</code>
WARNING: Do not delete this wallet if you have any funds on it.</p> <h2 id="im-running-a-full-node-and-have-a-synched-blockchain-can-btcpay-use-it-so-that-it-doesnt-have-to-do-a-full-sync"><a href="#im-running-a-full-node-and-have-a-synched-blockchain-can-btcpay-use-it-so-that-it-doesnt-have-to-do-a-full-sync" class="header-anchor">#</a> I'm running a full node and have a synched blockchain, can BTCPay use it so that it doesn't have to do a full sync?</h2> <p>Yes you can!  However, before you do that, you'll want to stop bitcoind from updating docker's volume for it, as that job will be taken over by BTCPay Server.</p> <p>If you want to run BTCPay Server inside a docker-compose, and that you have the data directory (<code>.bitcoin</code>) of a fully synched node on your docker host, then you can reuse it easily for BTCPay Server.</p> <p>To do that, follow the following steps :</p> <ul><li>Do the normal setup according to <a href="https://github.com/btcpayserver/btcpayserver-docker/blob/master/README.md" target="_blank" rel="noopener noreferrer">this instruction<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Note the <code>opt-save-storage</code> environment variable, which is used to enable various pruning levels. If you do not want to prune your exiting data directory, then omit the following line in your BTCPay docker deployment: <code>export BTCPAYGEN_ADDITIONAL_FRAGMENTS=&quot;opt-save-storage-s&quot;</code>.</li> <li>Once <code>btcpay-setup.sh</code> is over, turn down the docker compose with <code>btcpay-down.sh</code>.</li> <li>Login as root with <code>sudo su -</code>.</li> <li>Open the docker's volume for bitcoind : <code>cd /var/lib/docker/volumes/generated_bitcoin_datadir/</code>, and check its content with <code>ls -la</code>. You should see only one directory named <code>_data</code>.</li> <li>Now remove the <code>_data</code>directory : <code>rm -r _data</code>. If for any reason you want to keep this directory and its content you can also rename it instead : <code>mv _data/ _data.old/</code></li> <li>Now create a <a href="https://www.cyberciti.biz/faq/creating-soft-link-or-symbolic-link/" target="_blank" rel="noopener noreferrer">symbolic link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> between <code>/var/lib/docker/volumes/generated_bitcoin_datadir/_data</code> and your data directory (<code>.bitcoin</code>) on your host: <code>ln -s path/to/.bitcoin /var/lib/docker/volumes/generated_bitcoin_datadir/_data</code></li> <li>Check that the link has been done with a <code>ls -la</code></li> <li>Start your docker-compose again with <code>btcpay-up.sh</code></li></ul> <p>Your BTCPay Server should now be fully synched.</p> <p>If after this BTCPay Server keeps showing that your node is always starting, see the cause of <a href="#btcpay-server-keeps-showing-that-my-node-is-always-starting">BTCPay Server keeps showing that my node is always starting</a>.</p> <h2 id="how-to-enable-bitcoin-node-pruning"><a href="#how-to-enable-bitcoin-node-pruning" class="header-anchor">#</a> How to enable Bitcoin node pruning?</h2> <p>This will prune your Bitcoin full node to a maximum of 100GB (of blocks):</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span> -
<span class="token builtin class-name">cd</span> btcpayserver-docker
<span class="token builtin class-name">export</span> <span class="token assign-left variable">BTCPAYGEN_ADDITIONAL_FRAGMENTS</span><span class="token operator">=</span><span class="token string">&quot;opt-save-storage&quot;</span>
<span class="token builtin class-name">.</span> ./btcpay-setup.sh -i
</code></pre></div><p>Other pruning options are <a href="https://github.com/btcpayserver/btcpayserver-docker/blob/master/README.md#generated-docker-compose" target="_blank" rel="noopener noreferrer">documented here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. See <a href="/FAQ/FAQ-Deployment/#how-can-i-modify-or-deactivate-environment-variables">this example</a> for use with other additional fragments.</p> <h2 id="how-to-disable-bitcoin-node-pruning"><a href="#how-to-disable-bitcoin-node-pruning" class="header-anchor">#</a> How to disable Bitcoin node pruning?</h2> <p>To disable pruning of your Bitcoin node in BTCPay, first ensure you have enough memory to store the entire blockchain and BTCPayServer on your system. Then disable the <code>opt-save-storage</code> environment variable. See <a href="https://github.com/btcpayserver/btcpayserver-doc/blob/master/docs/FAQ/FAQ-Deployment.md#how-can-i-modify-or-deactivate-environment-variables" target="_blank" rel="noopener noreferrer">this example<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to view your fragment list and select only one for removal. The following example will remove <strong>all</strong> additional fragments:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">BTCPAYGEN_ADDITIONAL_FRAGMENTS</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span>
<span class="token builtin class-name">.</span> ./btcpay-setup.sh -i
</code></pre></div><p>Then run the following commands to recreate a non-pruned Bitcoin node:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>btcpay-down.sh
<span class="token comment"># Delete 'blocks' and 'chainstate' folders</span>
<span class="token function">rm</span> -rf /var/lib/docker/volumes/generated_bitcoin_datadir/_data/blocks
<span class="token function">rm</span> -rf /var/lib/docker/volumes/generated_bitcoin_datadir/_data/chainstate
btcpay-up.sh
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/btcpayserver/btcpayserver-doc/edit/master/docs/FAQ/FAQ-Synchronization.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="edit-link"><a href="https://github.com/btcpayserver/btcpayserver-doc/issues/new?title=Improve%20BTCPay%20Synchronization%20Issues&amp;body=I%20could%20not%20find%20the%20information%20I%20was%20looking%20for%20on%20the%20%22BTCPay%20Synchronization%20Issues%22%20page%20(%60%2FFAQ%2FFAQ-Synchronization%2F%60).%0A%0A%5BPLEASE%20DESCRIBE%20HOW%20THE%20PAGE%20CAN%20BE%20IMPROVED%5D&amp;labels=question" target="_blank" rel="noopener noreferrer">Didn't find an answer?</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      
      <a href="/FAQ/FAQ-Deployment/" class="prev">
        Deployment FAQ
      </a></span> <span class="next"><a href="/FAQ/FAQ-Integrations/">
        Integrations FAQ
      </a>
      
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.3e743670.js" defer></script><script src="/assets/js/3.aa1712e0.js" defer></script><script src="/assets/js/79.08cf98ca.js" defer></script><script src="/assets/js/28.ed6af585.js" defer></script>
  </body>
</html>
