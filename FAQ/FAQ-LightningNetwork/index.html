<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>BTCPay Server Docs</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="stylesheet" href="/styles/btcpayserver-variables.css">
    <meta name="description" content="BTCPay Server Official Documentation">
    <meta property="og:site_name" content="BTCPay Server Docs">
    <meta property="og:description" content="This document clarifies some of the most common questions and issues users face with the Lightning Network in BTCPay. Before you start using the off-chain protocol, familiarize yourself with the risks. Additionally, read Getting Started with Lightning Network in BTCPay../LightningNetwork.md">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://docs.btcpayserver.org/FAQ/FAQ-LightningNetwork/">
    <meta property="og:image" content="https://docs.btcpayserver.org/card.png">
    <meta name="twitter:description" content="This document clarifies some of the most common questions and issues users face with the Lightning Network in BTCPay. Before you start using the off-chain protocol, familiarize yourself with the risks. Additionally, read Getting Started with Lightning Network in BTCPay../LightningNetwork.md">
    <meta name="twitter:url" content="https://docs.btcpayserver.org/FAQ/FAQ-LightningNetwork/">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:image" content="https://docs.btcpayserver.org/card.png">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="BTCPay Server Docs">
    <meta name="twitter:creator" content="btcpayserver">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="BTCPay Server">
    <meta property="article:tag" content="BTCPay Server">
    
    <link rel="preload" href="/assets/css/0.styles.aa878b9c.css" as="style"><link rel="preload" href="/assets/js/app.3e743670.js" as="script"><link rel="preload" href="/assets/js/3.aa1712e0.js" as="script"><link rel="preload" href="/assets/js/11.b1b70333.js" as="script"><link rel="preload" href="/assets/js/28.ed6af585.js" as="script"><link rel="prefetch" href="/assets/js/10.3a0a5d27.js"><link rel="prefetch" href="/assets/js/12.fbb2d827.js"><link rel="prefetch" href="/assets/js/13.12a8698e.js"><link rel="prefetch" href="/assets/js/14.3ce62c2f.js"><link rel="prefetch" href="/assets/js/15.af63728e.js"><link rel="prefetch" href="/assets/js/16.07a14b03.js"><link rel="prefetch" href="/assets/js/17.a8920303.js"><link rel="prefetch" href="/assets/js/18.e0b1b1ec.js"><link rel="prefetch" href="/assets/js/19.abd6aa6d.js"><link rel="prefetch" href="/assets/js/20.d3ed4617.js"><link rel="prefetch" href="/assets/js/21.e078310c.js"><link rel="prefetch" href="/assets/js/22.310d1a38.js"><link rel="prefetch" href="/assets/js/23.93964d5d.js"><link rel="prefetch" href="/assets/js/24.ef7f693b.js"><link rel="prefetch" href="/assets/js/25.c62a0aa4.js"><link rel="prefetch" href="/assets/js/26.93ad068b.js"><link rel="prefetch" href="/assets/js/27.d34e5e35.js"><link rel="prefetch" href="/assets/js/29.1927e873.js"><link rel="prefetch" href="/assets/js/30.3d119335.js"><link rel="prefetch" href="/assets/js/31.a3699e8e.js"><link rel="prefetch" href="/assets/js/32.7e916537.js"><link rel="prefetch" href="/assets/js/33.6b95d9f1.js"><link rel="prefetch" href="/assets/js/34.a64b838b.js"><link rel="prefetch" href="/assets/js/35.7c8fa13d.js"><link rel="prefetch" href="/assets/js/36.30643837.js"><link rel="prefetch" href="/assets/js/37.b86058d8.js"><link rel="prefetch" href="/assets/js/38.d8a24972.js"><link rel="prefetch" href="/assets/js/39.39ffaad0.js"><link rel="prefetch" href="/assets/js/4.32b4e6f9.js"><link rel="prefetch" href="/assets/js/40.326657e1.js"><link rel="prefetch" href="/assets/js/41.1ec23881.js"><link rel="prefetch" href="/assets/js/42.a2429534.js"><link rel="prefetch" href="/assets/js/43.d82659dc.js"><link rel="prefetch" href="/assets/js/44.62c03fa6.js"><link rel="prefetch" href="/assets/js/45.32d3962a.js"><link rel="prefetch" href="/assets/js/46.33bb47d4.js"><link rel="prefetch" href="/assets/js/47.53b2b36d.js"><link rel="prefetch" href="/assets/js/48.0274a01c.js"><link rel="prefetch" href="/assets/js/49.8ec72738.js"><link rel="prefetch" href="/assets/js/5.3a8c8f4b.js"><link rel="prefetch" href="/assets/js/50.53cfdd93.js"><link rel="prefetch" href="/assets/js/51.9a71d339.js"><link rel="prefetch" href="/assets/js/52.1d073968.js"><link rel="prefetch" href="/assets/js/53.1266553e.js"><link rel="prefetch" href="/assets/js/54.6f9a3666.js"><link rel="prefetch" href="/assets/js/55.b7d0ab4b.js"><link rel="prefetch" href="/assets/js/56.f9d9f536.js"><link rel="prefetch" href="/assets/js/57.dfe9eb68.js"><link rel="prefetch" href="/assets/js/58.98363b8a.js"><link rel="prefetch" href="/assets/js/59.539a99cb.js"><link rel="prefetch" href="/assets/js/6.2b5d9249.js"><link rel="prefetch" href="/assets/js/60.5d34424d.js"><link rel="prefetch" href="/assets/js/61.e828e58a.js"><link rel="prefetch" href="/assets/js/62.67d4d43d.js"><link rel="prefetch" href="/assets/js/63.0d098f54.js"><link rel="prefetch" href="/assets/js/64.48dbc6c2.js"><link rel="prefetch" href="/assets/js/65.98ed2be4.js"><link rel="prefetch" href="/assets/js/66.acf9dd81.js"><link rel="prefetch" href="/assets/js/67.365a5a7e.js"><link rel="prefetch" href="/assets/js/68.fe0dd8cc.js"><link rel="prefetch" href="/assets/js/69.e714b843.js"><link rel="prefetch" href="/assets/js/7.8964f754.js"><link rel="prefetch" href="/assets/js/70.eaf0d684.js"><link rel="prefetch" href="/assets/js/71.db7c72c5.js"><link rel="prefetch" href="/assets/js/72.6a51ce83.js"><link rel="prefetch" href="/assets/js/73.1f772bd8.js"><link rel="prefetch" href="/assets/js/74.4caaf1f4.js"><link rel="prefetch" href="/assets/js/75.540c7ae1.js"><link rel="prefetch" href="/assets/js/76.e7ae2c11.js"><link rel="prefetch" href="/assets/js/77.a9920ba7.js"><link rel="prefetch" href="/assets/js/78.a922a4ae.js"><link rel="prefetch" href="/assets/js/79.08cf98ca.js"><link rel="prefetch" href="/assets/js/8.2a1e7b10.js"><link rel="prefetch" href="/assets/js/80.56fbed8c.js"><link rel="prefetch" href="/assets/js/81.a1320e9b.js"><link rel="prefetch" href="/assets/js/82.da6c518d.js"><link rel="prefetch" href="/assets/js/83.2bc79146.js"><link rel="prefetch" href="/assets/js/84.17126a4b.js"><link rel="prefetch" href="/assets/js/85.66f91d91.js"><link rel="prefetch" href="/assets/js/86.32ac9882.js"><link rel="prefetch" href="/assets/js/87.1d161495.js"><link rel="prefetch" href="/assets/js/88.c1f12b5f.js"><link rel="prefetch" href="/assets/js/89.a318c3fc.js"><link rel="prefetch" href="/assets/js/9.c4ffd9e7.js"><link rel="prefetch" href="/assets/js/90.c30abebb.js"><link rel="prefetch" href="/assets/js/91.1633d59a.js"><link rel="prefetch" href="/assets/js/92.f1745853.js"><link rel="prefetch" href="/assets/js/93.cbff83c7.js"><link rel="prefetch" href="/assets/js/94.964fd8e6.js"><link rel="prefetch" href="/assets/js/95.eaca7976.js"><link rel="prefetch" href="/assets/js/96.c788081d.js"><link rel="prefetch" href="/assets/js/97.741a1b7e.js"><link rel="prefetch" href="/assets/js/98.b1eb9e6e.js"><link rel="prefetch" href="/assets/js/99.e6f02097.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.3818bd5d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.aa878b9c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/btcpay-logo.svg" alt="BTCPay Server Docs" class="logo"> <span class="site-name can-hide">BTCPay Server Docs</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://btcpayserver.org/" target="_blank" rel="noopener noreferrer website" class="nav-link external">
  Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://chat.btcpayserver.org/" target="_blank" rel="noopener noreferrer chat" class="nav-link external">
  Chat
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/btcpayserver/" target="_blank" rel="noopener noreferrer github" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://twitter.com/BtcpayServer" target="_blank" rel="noopener noreferrer twitter" class="nav-link external">
  Twitter
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/btcpayserver/btcpayserver-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://btcpayserver.org/" target="_blank" rel="noopener noreferrer website" class="nav-link external">
  Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://chat.btcpayserver.org/" target="_blank" rel="noopener noreferrer chat" class="nav-link external">
  Chat
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/btcpayserver/" target="_blank" rel="noopener noreferrer github" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://twitter.com/BtcpayServer" target="_blank" rel="noopener noreferrer twitter" class="nav-link external">
  Twitter
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/btcpayserver/btcpayserver-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">Introduction</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Basics</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/UseCase/" class="sidebar-link">Use Case</a></li><li><a href="/Walkthrough/" class="sidebar-link">Walkthrough</a></li><li><a href="/BTCPayVsOthers/" class="sidebar-link">BTCPay Server vs. Others</a></li><li><a href="/TryItOut/" class="sidebar-link">Try it out</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Deployment</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Deployment/" class="sidebar-link">Choosing a Deployment Method</a></li><li><a href="/ThirdPartyHosting/" class="sidebar-link">Third-party Hosting</a></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/Docker/" class="sidebar-heading clickable"><span>Docker</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/LunaNodeWebDeployment/" class="sidebar-link">Web Deployment</a></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><a href="/AzureDeployment" class="sidebar-heading clickable"><span>Azure Deployment</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/GoogleCloudDeployment/" class="sidebar-link">Google Cloud Deployment</a></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><a href="/HardwareDeployment" class="sidebar-heading clickable"><span>Hardware Deployment</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><a href="/RaspberryPiDeployment" class="sidebar-heading clickable"><span>Raspberry Pi Deployment</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>Docker Plugins</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/ManualDeployment" class="sidebar-heading clickable"><span>Manual Deployment</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/Configurator/" class="sidebar-link">Configurator</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Getting Started</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/RegisterAccount/" class="sidebar-link">(1) Register account</a></li><li><a href="/CreateStore/" class="sidebar-link">(2) Create a store</a></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/WalletSetup" class="sidebar-heading clickable"><span>(3) Wallet Setup</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/HardwareWalletIntegration/" class="sidebar-link">Connect an existing wallet</a></li><li><a href="/HotWallet/" class="sidebar-link">Create a new wallet</a></li></ul></section></li><li><a href="/WhatsNext/" class="sidebar-link">(4) What's Next?</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Features</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Apps/" class="sidebar-link">Apps</a></li><li><a href="/Wallet/" class="sidebar-link">Wallet</a></li><li><a href="/Invoices/" class="sidebar-link">Invoices</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/PullPayments" class="sidebar-heading clickable"><span>Pull Payments</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/PaymentRequests/" class="sidebar-link">Payment Requests</a></li><li><a href="/LightningNetwork/" class="sidebar-link">Lightning Network</a></li><li><a href="/Accounting/" class="sidebar-link">Accounting</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/Payjoin" class="sidebar-heading clickable"><span>Payjoin</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Integrations</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/WooCommerce/" class="sidebar-link">WooCommerce</a></li><li><a href="/Shopify/" class="sidebar-link">Shopify</a></li><li><a href="/Drupal/" class="sidebar-link">Drupal</a></li><li><a href="/Magento/" class="sidebar-link">Magento</a></li><li><a href="/PrestaShop/" class="sidebar-link">PrestaShop</a></li><li><a href="https://github.com/lampsolutions/LampSBtcPayShopware" target="_blank" rel="noopener noreferrer" class="sidebar-link">Shopware<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li><a href="/CustomIntegration/" class="sidebar-link">Custom Integration</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Support and Community</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/FAQ" class="sidebar-heading clickable router-link-active open"><span>FAQ and common issues</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/FAQ/FAQ-General/" class="sidebar-link">General FAQ</a></li><li><a href="/FAQ/FAQ-Deployment/" class="sidebar-link">Deployment FAQ</a></li><li><a href="/FAQ/FAQ-Synchronization/" class="sidebar-link">Synchronization FAQ</a></li><li><a href="/FAQ/FAQ-Integrations/" class="sidebar-link">Integrations FAQ</a></li><li><a href="/FAQ/FAQ-ServerSettings/" class="sidebar-link">Server Settings FAQ</a></li><li><a href="/FAQ/FAQ-Stores/" class="sidebar-link">Stores FAQ</a></li><li><a href="/FAQ/FAQ-Wallet/" class="sidebar-link">Wallet FAQ</a></li><li><a href="/FAQ/FAQ-Apps/" class="sidebar-link">Apps FAQ</a></li><li><a href="/FAQ/FAQ-LightningNetwork/" aria-current="page" class="active sidebar-link">Lightning Network FAQ</a></li><li><a href="/FAQ/FAQ-Altcoin/" class="sidebar-link">Altcoins FAQ</a></li></ul></section></li><li><a href="/Troubleshooting/" class="sidebar-link">Troubleshooting an issue</a></li><li><a href="/Support/" class="sidebar-link">Support</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/Contribute" class="sidebar-heading clickable"><span>Contribute to BTCPay Server</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/Community/" class="sidebar-link">Community</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Development</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Architecture/" class="sidebar-link">Architecture</a></li><li><a href="/LocalDevelopment/" class="sidebar-link">Developing Locally</a></li><li><a href="/Altcoins/" class="sidebar-link">How to add an Altcoin</a></li><li><a href="/Theme/" class="sidebar-link">Customizing Themes</a></li><li><a href="https://docs.btcpayserver.org/API/Greenfield/v1" target="_blank" rel="noopener noreferrer" class="sidebar-link">Greenfield API v1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li><a href="/GreenFieldExample/" class="sidebar-link">Greenfield example with cURL</a></li><li><a href="/BTCPayServer/Security/" class="sidebar-link">Security Disclosures</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>This document clarifies some of the most common questions and issues users face with the Lightning Network in BTCPay. Before you start using the off-chain protocol, familiarize yourself with the risks. Additionally, read <a href="/LightningNetwork/">Getting Started with Lightning Network in BTCPay</a></p> <h2 id="lightning-network-general-faq"><a href="#lightning-network-general-faq" class="header-anchor">#</a> <a href="/FAQ/FAQ-LightningNetwork/#lightning-network-general-faq">Lightning Network General FAQ</a></h2> <ul><li><a href="/FAQ/FAQ-LightningNetwork/#how-many-users-can-use-lightning-network-in-btcpay">How many users can use Lightning Network in BTCPay?</a></li> <li><a href="/FAQ/FAQ-LightningNetwork/#how-to-find-node-info-and-open-a-direct-channel-with-a-store-using-btcpay">How to find node info and open a direct channel with a store using BTCPay?</a></li> <li><a href="/FAQ/FAQ-LightningNetwork/#as-a-merchant-do-i-need-to-open-direct-channels">As a merchant, do I need to open direct channels?</a></li> <li><a href="/FAQ/FAQ-LightningNetwork/#how-can-i-get-inbound-capacity-to-my-node">How can I get inbound capacity to my node?</a></li> <li><a href="/FAQ/FAQ-LightningNetwork/#i-previously-installed-btcpayserver-without-lightning-can-i-enable-it">Previously installed BTCPay without Lightning, can I enable it?</a></li> <li><a href="/FAQ/FAQ-LightningNetwork/#can-i-use-a-pruned-node-with-ln-in-btcpay">Can I use a pruned node with LN in BTCPay?</a></li> <li><a href="/FAQ/FAQ-LightningNetwork/#can-i-use-my-existing-ln-node-with-btcpay">Can I use my existing LN node with BTCPay?</a></li> <li><a href="/FAQ/FAQ-LightningNetwork/#how-to-change-from-c-lightning-to-lnd-or-vice-versa">How to change from c-lightning to LND or vice-versa?</a></li> <li><a href="/FAQ/FAQ-LightningNetwork/#i-switched-lightning-network-implementation-but-getting-no-payment-available-error">Switched Lightning Network implementation, getting &quot;no payment available&quot; error</a></li> <li><a href="/FAQ/FAQ-LightningNetwork/#i-get-warning-the-lightning-alias-variable-is-not-set-defaulting-to-a-blank-string-when-starting-container">WARNING: The LIGHTNING_ALIAS variable is not set. Defaulting to a blank string&quot; when starting container</a></li> <li><a href="/FAQ/FAQ-LightningNetwork/#how-to-display-my-lightning-node-information-so-that-others-can-connect-to-me">How to display my Lightning Node information so that others can connect to me?</a></li> <li><a href="/FAQ/FAQ-LightningNetwork/#where-can-i-find-recovery-seed-backup-for-my-lightning-network-wallet-in-btcpay-server">Where can I find recovery seed backup for my Lightning Network wallet in BTCPay Server?</a></li> <li><a href="/FAQ/FAQ-LightningNetwork/#how-to-disable-on-chain-payments-and-use-ln-payments-only">How to disable on-chain payments and use LN payments only?</a></li> <li><a href="/FAQ/FAQ-LightningNetwork/#how-to-see-my-lightning-network-version">How to see my Lightning Network version?</a></li> <li><a href="/FAQ/FAQ-LightningNetwork/#lightning-network-questions-and-support">Where can I get Lightning Network Support?</a></li></ul> <h2 id="lightning-network-lnd-faq"><a href="#lightning-network-lnd-faq" class="header-anchor">#</a> <a href="/FAQ/FAQ-LightningNetwork/#lightning-network-lnd-faq-2">Lightning Network (LND) FAQ</a></h2> <ul><li><a href="/FAQ/FAQ-LightningNetwork/#how-to-restart-my-lnd">How to restart my LND?</a></li> <li><a href="/FAQ/FAQ-LightningNetwork/#how-to-see-lnd-logs">How to see LND logs?</a></li> <li><a href="/FAQ/FAQ-LightningNetwork/#what-s-the-default-directory-of-lnd-in-btcpay">What’s the default LND Directory in BTCPay?</a></li> <li><a href="/FAQ/FAQ-LightningNetwork/#which-macaroon-needs-to-be-provided-for-external-nodes">Which macaroon needs to be provided for external nodes?</a></li> <li><a href="/FAQ/FAQ-LightningNetwork/#lnd-connection-issues-after-an-update">LND connection issue - cannot get macaroon: root key with id 0 doesn’t exist</a></li> <li><a href="/FAQ/FAQ-LightningNetwork/#how-to-change-my-lnd-node-alias">How to change LND Node alias</a></li> <li><a href="/FAQ/FAQ-LightningNetwork/#how-to-install-thunderhub">How to install ThunderHub</a></li></ul> <h2 id="lightning-network-c-lightning-faq"><a href="#lightning-network-c-lightning-faq" class="header-anchor">#</a> <a href="/FAQ/FAQ-LightningNetwork/#lightning-network-c-lightning-faq">Lightning Network (c-lightning) FAQ</a></h2> <ul><li><a href="/FAQ/FAQ-LightningNetwork/#how-to-restart-my-c-lightning">How to restart my c-lightning?</a></li> <li><a href="/FAQ/FAQ-LightningNetwork/#how-to-announce-an-ipv6-address">How to announce an IPv6 address?</a></li> <li><a href="/FAQ/FAQ-LightningNetwork/#how-to-find-an-on-chain-address-in-spark">How to find an on-chain address in Spark?</a></li> <li><a href="/FAQ/FAQ-LightningNetwork/#how-to-withdraw-funds-from-my-on-chain-spark-wallet">How to withdraw funds from my on-chain Spark wallet?</a></li></ul> <h2 id="lightning-network-general-faq-2"><a href="#lightning-network-general-faq-2" class="header-anchor">#</a> Lightning Network General FAQ</h2> <p>Here are some general questions about LN in BTCPay, regardless of the implementation.</p> <h3 id="how-many-users-can-use-lightning-network-in-btcpay"><a href="#how-many-users-can-use-lightning-network-in-btcpay" class="header-anchor">#</a> How many users can use Lightning Network in BTCPay?</h3> <p>On a self-hosted server, you can use only one internal Lightning node. Server owners can use the same Lightning node for an unlimited number of stores tied to their admin account.</p> <p>Since version 1.0.3.128, a BTCPay Server host can enable it's registrants to use the internal Lightning Network node.
It can be enabled in Server Settings &gt; Policies &gt; Allow non-admins to use the internal lightning node in their stores.</p> <figure><img src="/assets/img/ThirdPartyEnableLNOthers.36c1ffc4.png" alt="Enable LN for Others"></figure> <div class="custom-block warning"><p class="custom-block-title">As a third-party host</p> <p>All your registrants' funds will go to your own Lightning Wallet.
You will have to manually check and redispatch the funds to their respectfull owners. This could potentially become a burden.</p></div> <div class="custom-block danger"><p class="custom-block-title">As an individual using a third-party host</p> <p>All payments made through the Lightning Network will go to your third-party's wallet.
Take precautions and only use this option while using a trustworthy third-party host to ensure you get your funds back.</p></div> <p>Non-admin users can also connect to their own external nodes. Lightning node external connections are a technically advanced task. We recommend that if you want Lightning, you should deploy your own server instead, which comes with all the necessities bundled up.</p> <h3 id="how-to-find-node-info-and-open-a-direct-channel-with-a-store-using-btcpay"><a href="#how-to-find-node-info-and-open-a-direct-channel-with-a-store-using-btcpay" class="header-anchor">#</a> How to find node info and open a direct channel with a store using BTCPay?</h3> <p>If you're a customer trying to pay a Lightning Network invoice:</p> <ol><li>make sure to select &quot;Lightning&quot; from coin selection.</li> <li>Select Copy/Scan</li> <li>Select Node Info and scan or copy it manually.</li></ol> <figure><img src="/assets/img/btcpay-node-info.7e60d6c0.jpg" alt="BTCPay Checkout"></figure> <p>The exact procedure of opening a direct Lightning Network channel depends on the wallet you’re using. But, you should be able to figure it out easily now that you have merchant’s node information.</p> <h3 id="as-a-merchant-do-i-need-to-open-direct-channels"><a href="#as-a-merchant-do-i-need-to-open-direct-channels" class="header-anchor">#</a> As a merchant, do I need to open direct channels?</h3> <p>Merchants need incoming channels. Other people opening a channel with them provides liquidity to the merchant. Your customer should be able to open a direct channel with you.</p> <p>You can also ask well-connected nodes to open a direct channel with you. Opening a channel is not spending funds, it’s more like putting the funds on a pre-paid card, and spending it later, or withdrawing it by closing a channel.</p> <h3 id="how-can-i-get-inbound-capacity-to-my-node"><a href="#how-can-i-get-inbound-capacity-to-my-node" class="header-anchor">#</a> How can I get inbound capacity to my node?</h3> <p>There are many ways in which one can get an inbound capacity. We recommend that you read this great article that provides <a href="https://medium.com/lightningto-me/practical-solutions-to-inbound-capacity-problem-in-lightning-network-60224aa13393" target="_blank" rel="noopener noreferrer">practical tips to inbound capacity<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.
When asking for inbound capacity, consider any routing policy fees the service may have. <a href="https://wiki.ion.radar.tech/tutorials/bootstrapping-liquidity" target="_blank" rel="noopener noreferrer">This document<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> provides an overview of what kind of fees to expect from well-known nodes offering the service.</p> <h3 id="i-previously-installed-btcpayserver-without-lightning-can-i-enable-it"><a href="#i-previously-installed-btcpayserver-without-lightning-can-i-enable-it" class="header-anchor">#</a> I previously installed BTCPayServer without lightning, can I enable it?</h3> <p>The integrated lightning support is only useful for scenario where you are at the same time the host and the merchant of BTCPay Server.</p> <p>When logged as admin of your server you will then have a nice link to connect to plug your lightning node to BTCPay Server.</p> <figure><img src="data:image/png;base64,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" alt="LightningNode"></figure> <p>You can then click on <code>Test Connection</code> in this page to see if you successfully configured your lightning node.</p> <p>Depending on how you deployed BTCPayServer you might have different step to do:</p> <h4 id="case-1-you-manually-installed"><a href="#case-1-you-manually-installed" class="header-anchor">#</a> Case 1: You manually installed</h4> <p>If you installed BTCPayServer manually without docker or Azure, then you only need to start run <a href="https://hub.docker.com/r/nicolasdorier/clightning/" target="_blank" rel="noopener noreferrer">CLightning<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> with the correct network parameter.</p> <p>Assuming you are running as root, CLightning will allow call to its API via a unix socket on <code>/root/.lightning/lightning-rpc</code></p> <p>Once this is done, make sure you start BTCPayServer with</p> <div class="language-bash extra-class"><pre class="language-bash"><code>-btclightning<span class="token operator">=</span>/root/.lightning/lightning-rpc
</code></pre></div><p>If you are using CLightning for Litecoin, use the parameter <code>-ltclightning</code> instead.</p> <p>Then, make sure the port lightning network ports <code>9735</code> (BTC) and <code>9736</code> (LTC) are open on your firewalls.</p> <h4 id="case2-you-are-using-docker-without-azure"><a href="#case2-you-are-using-docker-without-azure" class="header-anchor">#</a> Case2: You are using docker (without Azure)</h4> <p>In this case, you only have to change the docker-compose you are using.
If before you were using <code>docker-compose -f &quot;$(pwd)/Production/docker-compose.btc-ltc.yml&quot; up -d</code> (as documented <a href="https://github.com/btcpayserver/btcpayserver-docker#for-docker-noobs" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>), then you need to change to <code>docker-compose -f &quot;$(pwd)/Production/docker-compose.btc-ltc-clightning.yml&quot; up -d</code>.</p> <p>Then, make sure the port lightning network ports <code>9735</code> (BTC) and <code>9736</code> (LTC) are open on your firewalls.</p> <h4 id="case3-you-are-using-azure"><a href="#case3-you-are-using-azure" class="header-anchor">#</a> Case3: You are using Azure</h4> <p>Log as root:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span> -
</code></pre></div><p>Run</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> <span class="token variable">$DOWNLOAD_ROOT</span>
<span class="token function">wget</span> -O - https://raw.githubusercontent.com/btcpayserver/btcpayserver-azure/master/btcpay-update.sh <span class="token operator">&gt;</span> btcpay-update.sh
btcpay-update.sh
</code></pre></div><p>Modify the file <code>/etc/profile.d/btcpay-env.sh</code>:</p> <p>You should have something like:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">BTCPAY_DOCKER_COMPOSE</span><span class="token operator">=</span><span class="token string">&quot;/var/lib/waagent/custom-script/download/0/btcpayserver-docker/Production/docker-compose.btc-ltc.yml&quot;</span>
</code></pre></div><p>Modify by adding <code>-clightning</code> at the end:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">BTCPAY_DOCKER_COMPOSE</span><span class="token operator">=</span><span class="token string">&quot;/var/lib/waagent/custom-script/download/0/btcpayserver-docker/Production/docker-compose.btc-ltc-clightning.yml&quot;</span>
</code></pre></div><p>Update your environment variables in current session by running:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">.</span> /etc/profile.d/btcpay-env.sh
</code></pre></div><p>Then restart your server:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>btcpay-restart.sh
</code></pre></div><p>Then, connect to your <a href="https://portal.azure.com/" target="_blank" rel="noopener noreferrer">Microsoft Azure Portal<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>,
Go to the resource group of your install, and add a new security rule in the Network Security Group inside it. (See <a href="https://docs.microsoft.com/en-us/azure/virtual-network/virtual-networks-create-nsg-arm-pportal#create-rules-in-an-existing-nsg" target="_blank" rel="noopener noreferrer">this example<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>)</p> <p>If your resource group do not have a Network Security Group, you can skip this step. The Network Security Group has been introduced in new Azure installs.</p> <p>Add a Security Inbound Rules:</p> <p>Rule 1:</p> <ul><li>Name: LightningBTC</li> <li>Priority: 150</li> <li>Source: Internet</li> <li>Destination: Any</li> <li>Port: 9735</li> <li>Protocol: TCP</li></ul> <p>Rule 2:</p> <ul><li>Name: LightningLTC</li> <li>Priority: 151</li> <li>Source: Internet</li> <li>Destination: Any</li> <li>Port: 9736</li> <li>Protocol: TCP</li></ul> <p>Here is how it should look like:</p> <figure><img src="/assets/img/azuresecurityrule.3be1c1ff.png" alt="SecurityRules"></figure> <h3 id="can-i-use-a-pruned-node-with-ln-in-btcpay"><a href="#can-i-use-a-pruned-node-with-ln-in-btcpay" class="header-anchor">#</a> Can I use a pruned node with LN in BTCPay?</h3> <p>It is recommended to use c-lightning because the implementation supports pruned nodes.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>It is possible in BTCPay to enable LND with a pruned node, however the LND implementation does not officially support it for reasons <a href="https://github.com/lightningnetwork/lnd/blob/master/docs/safety.md#pruned-bitcoind-node" target="_blank" rel="noopener noreferrer">listed here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. It's not possible to use pruning with Eclair.</p></div> <h3 id="can-i-use-my-existing-ln-node-with-btcpay"><a href="#can-i-use-my-existing-ln-node-with-btcpay" class="header-anchor">#</a> Can I use my existing LN node with BTCPay?</h3> <p>If you already have a well connected lightning node with sufficient inbound liquidity, you may want to use it with BTCPay instead of the included lightning node.
To do so, go to the lightning node settings page of your store (Store &gt; Settings &gt; Lightning &gt; Setup).
On this page you can edit the connection string to integrate an external node.
The connection strings vary per lightning implementation, the settings page contains the documentation for the connection settings to give you further guidance.</p> <h3 id="how-to-change-from-c-lightning-to-lnd-or-vice-versa"><a href="#how-to-change-from-c-lightning-to-lnd-or-vice-versa" class="header-anchor">#</a> How to change from c-lightning to LND or vice-versa?</h3> <p>You need to SSH log in into your virtual machine.</p> <p>To switch to LND:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span> -
<span class="token builtin class-name">cd</span> btcpayserver-docker
<span class="token builtin class-name">export</span> <span class="token assign-left variable">BTCPAYGEN_LIGHTNING</span><span class="token operator">=</span><span class="token string">&quot;lnd&quot;</span>
<span class="token builtin class-name">.</span> ./btcpay-setup.sh -i
</code></pre></div><p>To switch to c-lightning:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span> -
<span class="token builtin class-name">cd</span> btcpayserver-docker
<span class="token builtin class-name">export</span> <span class="token assign-left variable">BTCPAYGEN_LIGHTNING</span><span class="token operator">=</span><span class="token string">&quot;clightning&quot;</span>
<span class="token builtin class-name">.</span> ./btcpay-setup.sh -i
</code></pre></div><h3 id="i-switched-lightning-network-implementation-but-getting-no-payment-available-error"><a href="#i-switched-lightning-network-implementation-but-getting-no-payment-available-error" class="header-anchor">#</a> I switched Lightning Network implementation, but getting &quot;no payment available&quot; error</h3> <p>When you switch from one implementation to another, you need to reconfigure your lightning connection string at a store level, to use adequate implementation. Stores &gt; Settings &gt; Lightning &gt; Setup &gt; <strong>Connection string</strong>. In connection string, click on the &quot;click here&quot; link.</p> <h3 id="i-get-warning-the-lightning-alias-variable-is-not-set-defaulting-to-a-blank-string-when-starting-container"><a href="#i-get-warning-the-lightning-alias-variable-is-not-set-defaulting-to-a-blank-string-when-starting-container" class="header-anchor">#</a> I get &quot;WARNING: The LIGHTNING_ALIAS variable is not set. Defaulting to a blank string&quot; when starting container</h3> <p>You can ignore this.
If you want to set an alias for your lightning node, open the env file:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span> -
<span class="token function">vim</span> <span class="token variable">$BTCPAY_ENV_FILE</span>
</code></pre></div><p>And add or modify the <code>LIGHTNING_ALIAS</code> entry to <code>LIGHTNING_ALIAS=myawesomenode</code>.</p> <h3 id="how-to-display-my-lightning-node-information-so-that-others-can-connect-to-me"><a href="#how-to-display-my-lightning-node-information-so-that-others-can-connect-to-me" class="header-anchor">#</a> How to display my Lightning Node information so that others can connect to me?</h3> <p>The information other users need to connect to your node, is already displayed at the checkout. Sometimes, merchants want to display their node so that their customers can connect beforehand.</p> <p>There are numerous ways to find your node information, but the easiest way to display it to others is by using Lightning Node info page. Go to Store &gt; Settings &gt; Lightning &gt; Modify. At the bottom of the page, there is a &quot;Open Public Node Page&quot; button. Click on it to see the information. The page can be embedded into your website with <code>&lt;iframe&gt;</code>.</p> <figure><img src="/assets/img/LightningNodepPageInfo.b96d25bc.png" alt="BTCPay Checkout"></figure> <h3 id="where-can-i-find-recovery-seed-backup-for-my-lightning-network-wallet-in-btcpay-server"><a href="#where-can-i-find-recovery-seed-backup-for-my-lightning-network-wallet-in-btcpay-server" class="header-anchor">#</a> Where can I find recovery seed backup for my Lightning Network wallet in BTCPay Server?</h3> <p>Originally BTCPay did use <code>noseedbackup</code>, so you couldn’t backup your LN wallet or get your recovery seed. This was because in Lightning Network there was no solution for backing up funds in channels, just in your on-chain wallet.
By now LND has functionality like static channel backup that depends on seed presence.
But once again, please understand that the Lightning Network is still in an experimental phase and do not put funds into it, which you're not <a href="https://www.youtube.com/watch?v=5fMv8MpzLgQ" target="_blank" rel="noopener noreferrer">willing to lose<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h4 id="using-lnd-with-seed-since-v103138"><a href="#using-lnd-with-seed-since-v103138" class="header-anchor">#</a> Using LND with seed (since <a href="https://github.com/btcpayserver/btcpayserver/releases/tag/v1.0.3.138" target="_blank" rel="noopener noreferrer"><code>v1.0.3.138</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>)</h4> <p>You can find the LND Seed Service under:</p> <ul><li>Server Settings &gt; Services &gt; LND Seed Backup</li></ul> <figure><img src="/assets/img/LND-Service-Seed-Backup.a5298c02.jpg" alt="LND Seed Backup service"></figure> <p>Safely backup and store your recovery seed. The seed is a backup of your on-chain Lightning wallet, but is also necessary to perform static channel backups.</p> <figure><img src="/assets/img/LND-With-Seed-Example.3a3dd077.jpg" alt="LND Seed Backup example"></figure> <p>If you backed it up safely you can remove it from the server.</p> <p>If you migrate from an older version to <code>v1.0.3.138</code> <a href="https://blog.btcpayserver.org/btcpay-lnd-migration" target="_blank" rel="noopener noreferrer">this blog post on how to do the migration<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> might be helpful.</p> <h3 id="how-to-disable-on-chain-payments-and-use-ln-payments-only"><a href="#how-to-disable-on-chain-payments-and-use-ln-payments-only" class="header-anchor">#</a> How to disable on-chain payments and use LN payments only?</h3> <p>There are two easy ways to do this:</p> <ol><li>Store &gt; Settings &gt; Checkout experience &gt; Choose default payment method at checkout</li> <li>Store &gt; Settings &gt; Modify &gt; Uncheck the Enabled box to disable on-chain payments</li></ol> <h3 id="how-to-see-my-lightning-network-version"><a href="#how-to-see-my-lightning-network-version" class="header-anchor">#</a> How to see my Lightning Network version?</h3> <p>You can check your Lightning Network version from the command line.
For LND</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span> -
<span class="token builtin class-name">cd</span> btcpayserver-docker
./bitcoin-lncli.sh <span class="token builtin class-name">help</span>
</code></pre></div><p>For c-lightning</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span> -
./bitcoin-lightning-cli.sh getinfo
</code></pre></div><p>Most of the wallets (RTL, Zap, Spark, etc) that are able to your lightning node remotely will display the version on the front-end as well.</p> <h2 id="lightning-network-lnd-faq-2"><a href="#lightning-network-lnd-faq-2" class="header-anchor">#</a> Lightning Network (LND) FAQ</h2> <p>Here are some of the common questions about the <a href="https://github.com/lightningnetwork/lnd/issues" target="_blank" rel="noopener noreferrer">LND implementation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> of the Lightning Network.</p> <h3 id="how-to-restart-my-lnd"><a href="#how-to-restart-my-lnd" class="header-anchor">#</a> How to restart my LND?</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span> -
docker restart btcpayserver_lnd_bitcoin
</code></pre></div><h3 id="how-to-see-lnd-logs"><a href="#how-to-see-lnd-logs" class="header-anchor">#</a> How to see LND logs?</h3> <p>To check the logs of your LND node in BTCPay Server (Docker installations) use the following command:</p> <p><code>docker logs --tail 40 btcpayserver_lnd_bitcoin</code></p> <p>You can change 40 to whatever number you wish. The number represents the lines of code that will be shown. For more information about the logs, see <a href="/Troubleshooting/">Troubleshooting page</a></p> <h3 id="what-s-the-default-directory-of-lnd-in-btcpay"><a href="#what-s-the-default-directory-of-lnd-in-btcpay" class="header-anchor">#</a> What’s the default directory of LND in BTCPay?</h3> <p><code>/var/lib/docker/volumes/generated_lnd_bitcoin_datadir/_data</code></p> <h3 id="which-macaroon-needs-to-be-provided-for-external-nodes"><a href="#which-macaroon-needs-to-be-provided-for-external-nodes" class="header-anchor">#</a> Which macaroon needs to be provided for external nodes?</h3> <p>BTCPay Server needs the <code>admin.macaroon</code> to check whether the lightning node is fully synced before creating an invoice.
If you want to tailor a macaroon specific to the BTCPay Server connection, use the LND macaroon bakery:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>lncli bakemacaroon address:read address:write info:read invoices:read invoices:write onchain:read
</code></pre></div><h3 id="lnd-connection-issues-after-an-update"><a href="#lnd-connection-issues-after-an-update" class="header-anchor">#</a> LND connection issues after an update</h3> <p>Authentication tends to fail on LND after an update, symptoms are:</p> <ul><li>In store settings, when testing the connection to your node you get <code>Error while connecting to the API (The HTTP status code of the response was not expected (500).)</code></li> <li>In Zap wallet, <code>Unable to connect to host: cannot retrieve macaroon: cannot get macaroon: root key with id 0 doesn’t exist</code></li></ul> <p>In such case, you need to delete the macaroon of lnd and restart it.</p> <p>If you are using docker deployment, please connect with SSH to your VM and the following command:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span> -
docker <span class="token builtin class-name">exec</span> btcpayserver_lnd_bitcoin <span class="token function">rm</span> /data/admin.macaroon
docker <span class="token builtin class-name">exec</span> btcpayserver_lnd_bitcoin <span class="token function">rm</span> /data/invoice.macaroon
docker <span class="token builtin class-name">exec</span> btcpayserver_lnd_bitcoin <span class="token function">rm</span> /data/readonly.macaroon
docker <span class="token builtin class-name">exec</span> btcpayserver_lnd_bitcoin <span class="token function">rm</span> /data/data/macaroons.db
docker <span class="token builtin class-name">exec</span> btcpayserver_lnd_bitcoin <span class="token function">rm</span> /data/data/chain/bitcoin/mainnet/invoice.macaroon
docker <span class="token builtin class-name">exec</span> btcpayserver_lnd_bitcoin <span class="token function">rm</span> /data/data/chain/bitcoin/mainnet/macaroons.db
docker <span class="token builtin class-name">exec</span> btcpayserver_lnd_bitcoin <span class="token function">rm</span> /data/data/chain/bitcoin/mainnet/readonly.macaroon
docker restart btcpayserver_lnd_bitcoin
</code></pre></div><p>If a macaroon does not exist, you will see an error message, you can safely ignore it.</p> <p>Because this will invalidate the previous macaroons, you need to manually reconnect with Zap with <code>Server Settings / Services / LND-gRPC</code>.</p> <h3 id="how-to-change-my-lnd-node-alias"><a href="#how-to-change-my-lnd-node-alias" class="header-anchor">#</a> How to change my LND Node alias?</h3> <p>To change the display name of your LND node, you should ssh log in into your virtual machine and apply the following:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span> -
<span class="token builtin class-name">cd</span> btcpayserver-docker
<span class="token builtin class-name">export</span> <span class="token assign-left variable">LIGHTNING_ALIAS</span><span class="token operator">=</span><span class="token string">&quot;namehere&quot;</span>
<span class="token builtin class-name">.</span> ./btcpay-setup.sh -i
</code></pre></div><h3 id="how-to-install-thunderhub"><a href="#how-to-install-thunderhub" class="header-anchor">#</a> How to install ThunderHub?</h3> <p>To install ThunderHub on your instance apply the following:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">BTCPAYGEN_ADDITIONAL_FRAGMENTS</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$BTCPAYGEN_ADDITIONAL_FRAGMENTS</span>;opt-add-thunderhub&quot;</span>
<span class="token builtin class-name">.</span> btcpay-setup.sh -i
</code></pre></div><p>If you get the following warning message <strong>Unable to connect to this node</strong> it is probably because the certificate used to communicate with LND doesn't have the correct domains. LND doesn't generate new ones unless the previous ones are deleted first.</p> <p>To delete the old certificate and key and have LND generate new ones, apply the following:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker <span class="token builtin class-name">exec</span> btcpayserver_lnd_bitcoin <span class="token function">rm</span> /data/tls.cert
docker <span class="token builtin class-name">exec</span> btcpayserver_lnd_bitcoin <span class="token function">rm</span> /data/tls.key
docker restart btcpayserver_lnd_bitcoin
docker restart generated_bitcoin_thub_1
</code></pre></div><h2 id="lightning-network-c-lightning-faq-2"><a href="#lightning-network-c-lightning-faq-2" class="header-anchor">#</a> Lightning Network (c-lightning) FAQ</h2> <p>Here are some of the common questions about the <a href="https://github.com/ElementsProject/lightning/issues" target="_blank" rel="noopener noreferrer">c-lightning<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> implementation of the Lightning Network.</p> <h3 id="how-to-restart-my-c-lightning"><a href="#how-to-restart-my-c-lightning" class="header-anchor">#</a> How to restart my c-lightning?</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span> -
docker restart btcpayserver_clightning_bitcoin
</code></pre></div><h3 id="how-to-announce-an-ipv6-address"><a href="#how-to-announce-an-ipv6-address" class="header-anchor">#</a> How to announce an IPv6 address?</h3> <p>First, copy <code>bitcoin-clightning.yml</code> into the the docker fragment folder as <code>bitcoin-clightning.custom.yml</code>.
Important: the file must end with <code>.custom.yml</code>, or there will be git conflicts whenever you run <code>btcpay-update.sh</code>.</p> <p>Modify the new <code>bitcoin-clightning.custom.yml</code> as the following:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">clightning_bitcoin</span><span class="token punctuation">:</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">LIGHTNINGD_OPT</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
        announce-addr=[ipv6 here]</span>
</code></pre></div><p>Make sure to insert the address between the two square brackets [].</p> <p>Then set it up:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">BTCPAYGEN_ADDITIONAL_FRAGMENTS</span><span class="token operator">=</span><span class="token string">&quot;bitcoin-clightning.custom&quot;</span>
<span class="token builtin class-name">.</span> ./btcpay-setup.sh -i
</code></pre></div><h3 id="how-to-find-an-on-chain-address-in-spark"><a href="#how-to-find-an-on-chain-address-in-spark" class="header-anchor">#</a> How to find an on-chain address in Spark?</h3> <p>To fund your on-chain wallet in Spark, you need to get an on-chain address. To find your address, click on the version link at the left corner bottom of the Spark wallet (for example v0.2.2).</p> <p>That should toggle the settings. Click &gt; Console. To generate a new address in RPC Console field, enter <code>newaddr</code> for bech32 address or <code>newaddr p2sh-segwit</code> click execute. At the bottom you should see the newly generated address.
You can also toggle help if you need help with other commands in Spark.</p> <p><img src="/assets/img/Spark-console1.a4d31999.png" alt="BTCPay Checkout"> <img src="/assets/img/Spark-console2.93ef276b.png" alt="BTCPay Checkout"></p> <h2 id="how-to-withdraw-funds-from-my-on-chain-spark-wallet"><a href="#how-to-withdraw-funds-from-my-on-chain-spark-wallet" class="header-anchor">#</a> How to withdraw funds from my on-chain Spark wallet?</h2> <p>First if your funds are in channel, you need to close channel and wait for them to get back to your on-chain wallet in Spark. (144 blocks in most cases).</p> <p>Next, you need to toggle the console mode. Click on the version link at the left corner bottom of the Spark wallet <a href="/FAQ/FAQ-LightningNetwork/#lightning-network-c-lightning-faq">explained above</a></p> <p>That should toggle the settings. Click &gt; Console.</p> <p>In console mode there are help commands. The command needed for withdrawing from an on-chain wallet is called <code>withdraw</code>.</p> <div class="language- extra-class"><pre class="language-text"><code>withdraw destination satoshi [feerate] [minconf]
Send to {destination} address {satoshi} (or 'all') amount via Bitcoin transaction
</code></pre></div><p>If you want to withdraw 1000 sats to bc1qjl8uwezzlech793lpnyuzy0h2cdkvxvh54v3dn, the exact command would be:</p> <p><code>withdraw bc1qjl8uwezzlech793lpnyuzy0h2cdkvxvh54v3dn 1000</code> click <em>execute</em>.</p> <figure><img src="/assets/img/SparkWalletWithdrawConsole.164d4877.png" alt="Spark Withdraw"></figure> <p>Note that the address format needs to be SegWit, bech32 (starting with bc1).</p> <h2 id="lightning-network-questions-and-support"><a href="#lightning-network-questions-and-support" class="header-anchor">#</a> Lightning Network Questions and Support</h2> <p>Community support for Lightning Network questions is pretty limited, since the protocol is fairly new.</p> <p>If you're facing a technical problem with your Lightning Network implementation, that's not documented here you may want to ask questions in their respective communities.</p> <h4 id="lnd-support"><a href="#lnd-support" class="header-anchor">#</a> LND Support</h4> <ul><li><a href="https://github.com/lightningnetwork/lnd/issues" target="_blank" rel="noopener noreferrer">LND GitHub<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://lightningcommunity.slack.com" target="_blank" rel="noopener noreferrer">Lightning Community on Slack<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://webchat.freenode.net/?channels=lightning-dev&amp;uio=d4" target="_blank" rel="noopener noreferrer">#lightning-dev<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> on IRC</li></ul> <h4 id="c-lightning-support"><a href="#c-lightning-support" class="header-anchor">#</a> c-lightning Support</h4> <ul><li><a href="https://github.com/ElementsProject/lightning/issues" target="_blank" rel="noopener noreferrer">c-lightning GitHub<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://webchat.freenode.net/?channels=lightning-dev&amp;uio=d4" target="_blank" rel="noopener noreferrer">#lightning-dev<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> on IRC</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/btcpayserver/btcpayserver-doc/edit/master/docs/FAQ/FAQ-LightningNetwork.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="edit-link"><a href="https://github.com/btcpayserver/btcpayserver-doc/issues/new?title=Improve%20undefined&amp;body=I%20could%20not%20find%20the%20information%20I%20was%20looking%20for%20on%20the%20%22undefined%22%20page%20(%60%2FFAQ%2FFAQ-LightningNetwork%2F%60).%0A%0A%5BPLEASE%20DESCRIBE%20HOW%20THE%20PAGE%20CAN%20BE%20IMPROVED%5D&amp;labels=question" target="_blank" rel="noopener noreferrer">Didn't find an answer?</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/FAQ/FAQ-Apps/" class="prev">
        Apps FAQ
      </a></span> <span class="next"><a href="/FAQ/FAQ-Altcoin/">
        Altcoins FAQ
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.3e743670.js" defer></script><script src="/assets/js/3.aa1712e0.js" defer></script><script src="/assets/js/11.b1b70333.js" defer></script><script src="/assets/js/28.ed6af585.js" defer></script>
  </body>
</html>
