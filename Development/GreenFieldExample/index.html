<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Greenfield API example with cURL | BTCPay Server</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="stylesheet" href="/styles/btcpayserver-variables.css">
    <meta name="description" content="BTCPay Server Official Documentation">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    
    <link rel="preload" href="/assets/css/0.styles.5d7f2299.css" as="style"><link rel="preload" href="/assets/js/app.f7388c30.js" as="script"><link rel="preload" href="/assets/js/2.890b07d4.js" as="script"><link rel="preload" href="/assets/js/131.2dd271d7.js" as="script"><link rel="prefetch" href="/assets/js/1.88c5b6dd.js"><link rel="prefetch" href="/assets/js/100.9031474f.js"><link rel="prefetch" href="/assets/js/101.c6884230.js"><link rel="prefetch" href="/assets/js/102.262d5f69.js"><link rel="prefetch" href="/assets/js/103.0335830c.js"><link rel="prefetch" href="/assets/js/104.9265d39e.js"><link rel="prefetch" href="/assets/js/105.f04f28b0.js"><link rel="prefetch" href="/assets/js/106.3a01774a.js"><link rel="prefetch" href="/assets/js/107.e2d7e387.js"><link rel="prefetch" href="/assets/js/108.50758699.js"><link rel="prefetch" href="/assets/js/109.fe04cc46.js"><link rel="prefetch" href="/assets/js/110.ed68c5c8.js"><link rel="prefetch" href="/assets/js/111.8bab6add.js"><link rel="prefetch" href="/assets/js/112.367229cb.js"><link rel="prefetch" href="/assets/js/113.af142b44.js"><link rel="prefetch" href="/assets/js/114.49a54da9.js"><link rel="prefetch" href="/assets/js/115.24f45a96.js"><link rel="prefetch" href="/assets/js/116.7cadf8b6.js"><link rel="prefetch" href="/assets/js/117.128fbeeb.js"><link rel="prefetch" href="/assets/js/118.4e8f0b03.js"><link rel="prefetch" href="/assets/js/119.7a04e105.js"><link rel="prefetch" href="/assets/js/12.89cac4e6.js"><link rel="prefetch" href="/assets/js/120.84d0172b.js"><link rel="prefetch" href="/assets/js/121.e99f1d88.js"><link rel="prefetch" href="/assets/js/122.1316ded7.js"><link rel="prefetch" href="/assets/js/123.ab6f065b.js"><link rel="prefetch" href="/assets/js/124.34c484a9.js"><link rel="prefetch" href="/assets/js/125.2ab4f8be.js"><link rel="prefetch" href="/assets/js/126.fa15ccbe.js"><link rel="prefetch" href="/assets/js/127.da584781.js"><link rel="prefetch" href="/assets/js/128.a49cbc6e.js"><link rel="prefetch" href="/assets/js/129.460d6ee1.js"><link rel="prefetch" href="/assets/js/13.a0d64ac0.js"><link rel="prefetch" href="/assets/js/130.7a8abbcf.js"><link rel="prefetch" href="/assets/js/132.4f7f82e0.js"><link rel="prefetch" href="/assets/js/133.88954dcd.js"><link rel="prefetch" href="/assets/js/134.2bb08e89.js"><link rel="prefetch" href="/assets/js/135.f8813cea.js"><link rel="prefetch" href="/assets/js/136.3d6ce4ac.js"><link rel="prefetch" href="/assets/js/137.ebde50c5.js"><link rel="prefetch" href="/assets/js/138.d8700f08.js"><link rel="prefetch" href="/assets/js/139.ae4226a5.js"><link rel="prefetch" href="/assets/js/14.42af5eab.js"><link rel="prefetch" href="/assets/js/140.5b135276.js"><link rel="prefetch" href="/assets/js/141.55ecfe01.js"><link rel="prefetch" href="/assets/js/142.555f905b.js"><link rel="prefetch" href="/assets/js/143.c49cae8c.js"><link rel="prefetch" href="/assets/js/144.0649359a.js"><link rel="prefetch" href="/assets/js/145.fc41cc0a.js"><link rel="prefetch" href="/assets/js/146.a3629d7c.js"><link rel="prefetch" href="/assets/js/147.8c160b20.js"><link rel="prefetch" href="/assets/js/148.42737ac5.js"><link rel="prefetch" href="/assets/js/149.df188ff5.js"><link rel="prefetch" href="/assets/js/15.0c3dc21a.js"><link rel="prefetch" href="/assets/js/150.9ad3d6fe.js"><link rel="prefetch" href="/assets/js/151.9ad381a2.js"><link rel="prefetch" href="/assets/js/152.74ead844.js"><link rel="prefetch" href="/assets/js/153.6e661eb5.js"><link rel="prefetch" href="/assets/js/154.be757b57.js"><link rel="prefetch" href="/assets/js/155.05799a92.js"><link rel="prefetch" href="/assets/js/156.0e34c5c3.js"><link rel="prefetch" href="/assets/js/157.27397e6c.js"><link rel="prefetch" href="/assets/js/158.09ae5704.js"><link rel="prefetch" href="/assets/js/159.451ed789.js"><link rel="prefetch" href="/assets/js/16.4f23b9ef.js"><link rel="prefetch" href="/assets/js/160.717ce056.js"><link rel="prefetch" href="/assets/js/161.e2d35eae.js"><link rel="prefetch" href="/assets/js/162.5bf7bb2d.js"><link rel="prefetch" href="/assets/js/163.0dfa0de0.js"><link rel="prefetch" href="/assets/js/164.b94815ad.js"><link rel="prefetch" href="/assets/js/165.acf95c91.js"><link rel="prefetch" href="/assets/js/166.7f9159f7.js"><link rel="prefetch" href="/assets/js/167.534b8981.js"><link rel="prefetch" href="/assets/js/168.e4d691a0.js"><link rel="prefetch" href="/assets/js/169.acebf7f6.js"><link rel="prefetch" href="/assets/js/17.00eb3e1e.js"><link rel="prefetch" href="/assets/js/170.18f022d9.js"><link rel="prefetch" href="/assets/js/171.e7282924.js"><link rel="prefetch" href="/assets/js/172.7eb9f371.js"><link rel="prefetch" href="/assets/js/173.434ef746.js"><link rel="prefetch" href="/assets/js/174.9c07eb4d.js"><link rel="prefetch" href="/assets/js/175.e6d01565.js"><link rel="prefetch" href="/assets/js/176.7c51f2a6.js"><link rel="prefetch" href="/assets/js/177.371d0251.js"><link rel="prefetch" href="/assets/js/178.b91997c8.js"><link rel="prefetch" href="/assets/js/18.aba93f90.js"><link rel="prefetch" href="/assets/js/19.6fe481c1.js"><link rel="prefetch" href="/assets/js/20.f8ed2c4f.js"><link rel="prefetch" href="/assets/js/21.953dbe2a.js"><link rel="prefetch" href="/assets/js/22.8ab7be53.js"><link rel="prefetch" href="/assets/js/23.14db544d.js"><link rel="prefetch" href="/assets/js/24.2530bfc7.js"><link rel="prefetch" href="/assets/js/25.3dfba103.js"><link rel="prefetch" href="/assets/js/26.e30083a5.js"><link rel="prefetch" href="/assets/js/27.7a56819d.js"><link rel="prefetch" href="/assets/js/28.edcd6580.js"><link rel="prefetch" href="/assets/js/29.2cbd8592.js"><link rel="prefetch" href="/assets/js/3.3701b11a.js"><link rel="prefetch" href="/assets/js/30.07cf670a.js"><link rel="prefetch" href="/assets/js/31.2c40ed7b.js"><link rel="prefetch" href="/assets/js/32.be403325.js"><link rel="prefetch" href="/assets/js/33.256380d7.js"><link rel="prefetch" href="/assets/js/34.6697e9d7.js"><link rel="prefetch" href="/assets/js/35.929c231b.js"><link rel="prefetch" href="/assets/js/36.a91f014d.js"><link rel="prefetch" href="/assets/js/37.76cb5a8d.js"><link rel="prefetch" href="/assets/js/38.10d0f780.js"><link rel="prefetch" href="/assets/js/39.6df9a52e.js"><link rel="prefetch" href="/assets/js/4.5520adbf.js"><link rel="prefetch" href="/assets/js/40.8ffb416c.js"><link rel="prefetch" href="/assets/js/41.5982c76c.js"><link rel="prefetch" href="/assets/js/42.0da9ce7c.js"><link rel="prefetch" href="/assets/js/43.12143960.js"><link rel="prefetch" href="/assets/js/44.d83c6700.js"><link rel="prefetch" href="/assets/js/45.a5ca4096.js"><link rel="prefetch" href="/assets/js/46.4d718f44.js"><link rel="prefetch" href="/assets/js/47.ebd79da8.js"><link rel="prefetch" href="/assets/js/48.08094fd7.js"><link rel="prefetch" href="/assets/js/49.45d6e792.js"><link rel="prefetch" href="/assets/js/5.639b68e9.js"><link rel="prefetch" href="/assets/js/50.88238499.js"><link rel="prefetch" href="/assets/js/51.2179e64d.js"><link rel="prefetch" href="/assets/js/52.69fbd01e.js"><link rel="prefetch" href="/assets/js/53.0588da20.js"><link rel="prefetch" href="/assets/js/54.8999875b.js"><link rel="prefetch" href="/assets/js/55.8fda08fb.js"><link rel="prefetch" href="/assets/js/56.5839f966.js"><link rel="prefetch" href="/assets/js/57.99390101.js"><link rel="prefetch" href="/assets/js/58.e9afc40f.js"><link rel="prefetch" href="/assets/js/59.7735b621.js"><link rel="prefetch" href="/assets/js/6.17ce72c2.js"><link rel="prefetch" href="/assets/js/60.5d2d703f.js"><link rel="prefetch" href="/assets/js/61.9eb8046c.js"><link rel="prefetch" href="/assets/js/62.3561b823.js"><link rel="prefetch" href="/assets/js/63.22204404.js"><link rel="prefetch" href="/assets/js/64.c6d1e52f.js"><link rel="prefetch" href="/assets/js/65.d6e83bd8.js"><link rel="prefetch" href="/assets/js/66.1760ea77.js"><link rel="prefetch" href="/assets/js/67.cdddb0df.js"><link rel="prefetch" href="/assets/js/68.d019ff0b.js"><link rel="prefetch" href="/assets/js/69.62597630.js"><link rel="prefetch" href="/assets/js/7.6eaee9c7.js"><link rel="prefetch" href="/assets/js/70.4f685638.js"><link rel="prefetch" href="/assets/js/71.c026fdb3.js"><link rel="prefetch" href="/assets/js/72.65ca861a.js"><link rel="prefetch" href="/assets/js/73.61ebe493.js"><link rel="prefetch" href="/assets/js/74.df7bb9f0.js"><link rel="prefetch" href="/assets/js/75.375a15b3.js"><link rel="prefetch" href="/assets/js/76.818b9c88.js"><link rel="prefetch" href="/assets/js/77.6180e5f2.js"><link rel="prefetch" href="/assets/js/78.e776a886.js"><link rel="prefetch" href="/assets/js/79.178cf8c3.js"><link rel="prefetch" href="/assets/js/8.62f56d6d.js"><link rel="prefetch" href="/assets/js/80.88fa6144.js"><link rel="prefetch" href="/assets/js/81.782c2f4b.js"><link rel="prefetch" href="/assets/js/82.c1d37520.js"><link rel="prefetch" href="/assets/js/83.7aed7d5c.js"><link rel="prefetch" href="/assets/js/84.589ac4f0.js"><link rel="prefetch" href="/assets/js/85.1c8a5c4c.js"><link rel="prefetch" href="/assets/js/86.dfed31ed.js"><link rel="prefetch" href="/assets/js/87.33be1a66.js"><link rel="prefetch" href="/assets/js/88.baea76d6.js"><link rel="prefetch" href="/assets/js/89.62c5e857.js"><link rel="prefetch" href="/assets/js/9.5e8709b0.js"><link rel="prefetch" href="/assets/js/90.75ead46d.js"><link rel="prefetch" href="/assets/js/91.89c925f7.js"><link rel="prefetch" href="/assets/js/92.ff282f7e.js"><link rel="prefetch" href="/assets/js/93.0e329e18.js"><link rel="prefetch" href="/assets/js/94.da5d1d52.js"><link rel="prefetch" href="/assets/js/95.9c868d08.js"><link rel="prefetch" href="/assets/js/96.6182c7d0.js"><link rel="prefetch" href="/assets/js/97.a772ba34.js"><link rel="prefetch" href="/assets/js/98.012e9554.js"><link rel="prefetch" href="/assets/js/99.4e2df5c3.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.d27df78b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5d7f2299.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/btcpay-logo.svg" alt="BTCPay Server" class="logo"> <span class="site-name can-hide">BTCPay Server</span></a> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Guide/" class="nav-link">
  User Guide
</a></div><div class="nav-item"><a href="/Deployment/" class="nav-link">
  Deployment
</a></div><div class="nav-item"><a href="/Development/" class="nav-link router-link-active">
  Developers
</a></div><div class="nav-item"><a href="/Contribute/" class="nav-link">
  Contribute
</a></div><div class="nav-item"><a href="/FAQ/" class="nav-link">
  FAQ
</a></div> <a href="https://github.com/btcpayserver/btcpayserver-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide social"><div class="nav-item"><a href="https://btcpayserver.org/" target="_blank" rel="noopener noreferrer website" class="nav-link external">
  Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://chat.btcpayserver.org/" target="_blank" rel="noopener noreferrer chat" class="nav-link external">
  Chat
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/btcpayserver/" target="_blank" rel="noopener noreferrer github" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://twitter.com/BtcpayServer" target="_blank" rel="noopener noreferrer twitter" class="nav-link external">
  Twitter
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/btcpayserver/btcpayserver-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <button type="button" class="btcpay-theme-switch"><svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path transform="translate(1 1)" d="M2.72 0A3.988 3.988 0 000 3.78c0 2.21 1.79 4 4 4 1.76 0 3.25-1.14 3.78-2.72-.4.13-.83.22-1.28.22-2.21 0-4-1.79-4-4 0-.45.08-.88.22-1.28z" class="btcpay-theme-switch-dark"></path><path transform="translate(1 1)" d="M4 0c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5S4.28 0 4 0zM1.5 1c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm5 0c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zM4 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM.5 3.5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm7 0c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zM1.5 6c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm5 0c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zM4 7c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5S4.28 7 4 7z" class="btcpay-theme-switch-light"></path></svg></button></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links social"><div class="nav-item"><a href="https://btcpayserver.org/" target="_blank" rel="noopener noreferrer website" class="nav-link external">
  Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://chat.btcpayserver.org/" target="_blank" rel="noopener noreferrer chat" class="nav-link external">
  Chat
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/btcpayserver/" target="_blank" rel="noopener noreferrer github" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://twitter.com/BtcpayServer" target="_blank" rel="noopener noreferrer twitter" class="nav-link external">
  Twitter
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/btcpayserver/btcpayserver-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <nav class="nav-links"><div class="nav-item"><a href="/Guide/" class="nav-link">
  User Guide
</a></div><div class="nav-item"><a href="/Deployment/" class="nav-link">
  Deployment
</a></div><div class="nav-item"><a href="/Development/" class="nav-link router-link-active">
  Developers
</a></div><div class="nav-item"><a href="/Contribute/" class="nav-link">
  Contribute
</a></div><div class="nav-item"><a href="/FAQ/" class="nav-link">
  FAQ
</a></div> <a href="https://github.com/btcpayserver/btcpayserver-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Greenfield API</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="https://docs.btcpayserver.org/API/Greenfield/v1" target="_blank" rel="noopener noreferrer" class="sidebar-link">Greenfield API v1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li><a href="/Development/ecommerce-integration-guide/" class="sidebar-link">eCommerce Integration Guide</a></li><li><a href="/BTCPayServer/greenfield-authorization/" class="sidebar-link">GreenField API Authorization Flow</a></li><li><a href="/Development/GreenFieldExample/" aria-current="page" class="active sidebar-link">Greenfield API example with cURL</a></li><li><a href="/Development/GreenFieldExample-NodeJS/" class="sidebar-link">Greenfield API example with Node.js (JavaScript)</a></li><li><a href="/Development/GreenfieldExample-PHP/" class="sidebar-link">Greenfield API examples with PHP</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Development</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Development/" aria-current="page" class="sidebar-link">Architecture</a></li><li><a href="/Development/LocalDevelopment/" class="sidebar-link">Local development</a></li><li><a href="/BTCPayServer/greenfield-development/" class="sidebar-link">Greenfield API Development</a></li><li><a href="/Development/Plugins/" class="sidebar-link">Plugins</a></li><li><a href="/Development/Altcoins/" class="sidebar-link">How to add an Altcoin</a></li><li><a href="/Development/InvoiceMetadata/" class="sidebar-link">Invoice metadata</a></li><li><a href="/Development/Theme/" class="sidebar-link">Customizing themes</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>NBXplorer</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/NBXplorer/" class="sidebar-link">Overview</a></li><li><a href="/NBXplorer/API/" class="sidebar-link">API Specification</a></li><li><a href="/NBXplorer/Postgres-Schema/" class="sidebar-link">Postgres Schema</a></li><li><a href="/NBXplorer/Postgres-Migration/" class="sidebar-link">Postgres Migration</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>More</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/Vault/" class="sidebar-heading clickable"><span>BTCPay Server Vault</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/BTCPayServer/Security/" class="sidebar-link">Security Disclosures</a></li><li><a href="/Development/TestnetDemo/" class="sidebar-link">Testnet deployment</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="greenfield-api-example-with-curl"><a href="#greenfield-api-example-with-curl" class="header-anchor">#</a> Greenfield API example with cURL</h1> <p>The <strong><a href="https://docs.btcpayserver.org/API/Greenfield/v1/" target="_blank" rel="noopener noreferrer">Greenfield API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong> (also available on your instance on <code>/docs</code>) allows you to operate BTCPay Server via an easy-to-use REST API.</p> <p>Note that you can partially generate clients in the language of your choice by using the <a href="https://docs.btcpayserver.org/API/Greenfield/v1/swagger.json" target="_blank" rel="noopener noreferrer">Swagger file<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>In this guide, we will show you how to use it via command line on linux using <code>curl</code> and <code>jq</code>.</p> <h2 id="prerequisites"><a href="#prerequisites" class="header-anchor">#</a> Prerequisites</h2> <p>Unless for a few endpoints like creating a store and API key on behalf of a specific user, Basic Auth should be avoided and an API key should be used instead. Make sure that API keys only have the needed permissions and not more. E.g. if you only create invoices you should not give the API key the permission to manage your stores.</p> <p>You can create a new API key in the BTCPay Server UI under <code>Account</code> -&gt; <code>Manage account</code> -&gt; <code>API keys</code></p> <p>For the ecommerce examples below the API key needs the following permissions:</p> <ul><li>View invoices</li> <li>Create invoice</li> <li>Modify invoices</li> <li>Modify stores webhooks</li> <li>View your stores</li> <li>Create non-approved pull payments</li></ul> <p>For an overview of available permissions see the <a href="https://docs.btcpayserver.org/API/Greenfield/v1/#section/Authentication/API_Key" target="_blank" rel="noopener noreferrer">API documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> or the permissions documented on each endpoint.</p> <h2 id="ecommerce-examples"><a href="#ecommerce-examples" class="header-anchor">#</a> eCommerce examples</h2> <p>The following examples will show you how to create a basic eCommerce flow using the Greenfield API by creating an invoice, registering a webhook, processing webhooks, and issuing a full refund of an invoice.</p> <h3 id="create-an-invoice"><a href="#create-an-invoice" class="header-anchor">#</a> Create an invoice</h3> <p>We create an invoice using the <a href="https://docs.btcpayserver.org/API/Greenfield/v1/#operation/Invoices_CreateInvoice" target="_blank" rel="noopener noreferrer">create invoice endpoint<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. This is a simple example but you can set a lot more data like order id, buyer email or custom metadata. That said, don't store redundant data on the invoice to prevent data leaks in case of a hack. E.g. in most cases it makes no sense to store the customer address on your eCommerce system and also on the BTCPay invoice.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">BTCPAY_INSTANCE</span><span class="token operator">=</span><span class="token string">&quot;https://mainnet.demo.btcpayserver.org&quot;</span>
<span class="token assign-left variable">API_KEY</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_KEY&quot;</span>
<span class="token assign-left variable">STORE_ID</span><span class="token operator">=</span><span class="token string">&quot;YOUR_STORE_ID&quot;</span>
<span class="token assign-left variable">AMOUNT</span><span class="token operator">=</span><span class="token string">&quot;10&quot;</span>
<span class="token assign-left variable">CURRENCY</span><span class="token operator">=</span><span class="token string">&quot;USD&quot;</span>

<span class="token assign-left variable">BODY</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;{}&quot;</span> <span class="token operator">|</span> jq <span class="token parameter variable">--arg</span> <span class="token string">&quot;a&quot;</span> <span class="token string">&quot;<span class="token variable">$AMOUNT</span>&quot;</span> <span class="token string">'. + {amount:$a}'</span> <span class="token punctuation">\</span>
                  <span class="token operator">|</span> jq <span class="token parameter variable">--arg</span> <span class="token string">&quot;a&quot;</span> <span class="token string">&quot;<span class="token variable">$CURRENCY</span>&quot;</span> <span class="token string">'. + {currency:$a}'</span><span class="token variable">)</span></span>&quot;</span>

<span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token punctuation">\</span>
     <span class="token parameter variable">-H</span> <span class="token string">&quot;Content-Type: application/json&quot;</span> <span class="token punctuation">\</span>
     <span class="token parameter variable">-H</span> <span class="token string">&quot;Authorization: token <span class="token variable">$API_KEY</span>&quot;</span> <span class="token punctuation">\</span>
     <span class="token parameter variable">-X</span> POST <span class="token punctuation">\</span>
     <span class="token parameter variable">-d</span> <span class="token string">&quot;<span class="token variable">$BODY</span>&quot;</span> <span class="token punctuation">\</span>
     <span class="token string">&quot;<span class="token variable">$BTCPAY_INSTANCE</span>/api/v1/stores/<span class="token variable">$STORE_ID</span>/invoices&quot;</span>
</code></pre></div><h3 id="register-a-webhook-optional"><a href="#register-a-webhook-optional" class="header-anchor">#</a> Register a webhook (optional)</h3> <p>Let's register a webhook to be notified when the invoice is paid. You can use the <a href="https://docs.btcpayserver.org/API/Greenfield/v1/#operation/Webhooks_CreateWebhook" target="_blank" rel="noopener noreferrer">create webhook endpoint<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to register a webhook.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">BTCPAY_INSTANCE</span><span class="token operator">=</span><span class="token string">&quot;https://mainnet.demo.btcpayserver.org&quot;</span>
<span class="token assign-left variable">API_KEY</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_KEY&quot;</span>
<span class="token assign-left variable">STORE_ID</span><span class="token operator">=</span><span class="token string">&quot;YOUR_STORE_ID&quot;</span>

<span class="token assign-left variable">URL</span><span class="token operator">=</span><span class="token string">&quot;https://example.com/your-webhook-endpoint&quot;</span>

<span class="token assign-left variable">BODY</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;{}&quot;</span> <span class="token operator">|</span> jq <span class="token parameter variable">--arg</span> <span class="token string">&quot;a&quot;</span> <span class="token string">&quot;<span class="token variable">$URL</span>&quot;</span> <span class="token string">'. + {url:$a}'</span><span class="token variable">)</span></span>&quot;</span>

<span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token punctuation">\</span>
     <span class="token parameter variable">-H</span> <span class="token string">&quot;Content-Type: application/json&quot;</span> <span class="token punctuation">\</span>
     <span class="token parameter variable">-H</span> <span class="token string">&quot;Authorization: token <span class="token variable">$API_KEY</span>&quot;</span> <span class="token punctuation">\</span>
     <span class="token parameter variable">-X</span> POST <span class="token punctuation">\</span>
     <span class="token parameter variable">-d</span> <span class="token string">&quot;<span class="token variable">$BODY</span>&quot;</span> <span class="token punctuation">\</span>
     <span class="token string">&quot;<span class="token variable">$BTCPAY_INSTANCE</span>/api/v1/stores/<span class="token variable">$STORE_ID</span>/webhooks&quot;</span>
</code></pre></div><p>This step is optional, you can also manually create a webhook in the BTCPay Server UI in your store <code>Settings</code> -&gt; <code>Webhooks</code>.</p> <h3 id="validate-and-process-webhooks"><a href="#validate-and-process-webhooks" class="header-anchor">#</a> Validate and process webhooks</h3> <p>This is not really possible with curl in bash but when you run a webserver. You can check the examples for <a href="/Development/GreenFieldExample-NodeJS/">NodeJS</a> and <a href="/Development/GreenfieldExample-PHP/">PHP</a>.</p> <h3 id="issue-a-full-refund-of-an-invoice"><a href="#issue-a-full-refund-of-an-invoice" class="header-anchor">#</a> Issue a full refund of an invoice</h3> <p>Using the <a href="https://docs.btcpayserver.org/API/Greenfield/v1/#operation/Invoices_Refund" target="_blank" rel="noopener noreferrer">invoice refund endpoint<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> you can issue a full (or even partial) refund of an invoice. This will return a link where the customer can claim the refund.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">BTCPAY_INSTANCE</span><span class="token operator">=</span><span class="token string">&quot;https://mainnet.demo.btcpayserver.org&quot;</span>
<span class="token assign-left variable">API_KEY</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_KEY&quot;</span>
<span class="token assign-left variable">STORE_ID</span><span class="token operator">=</span><span class="token string">&quot;YOUR_STORE_ID&quot;</span>

<span class="token assign-left variable">INVOICE_ID</span><span class="token operator">=</span><span class="token string">&quot;EXISTING_INVOICE_ID&quot;</span>
<span class="token assign-left variable">PAYMENT_METHOD</span><span class="token operator">=</span><span class="token string">&quot;BTC&quot;</span>
<span class="token assign-left variable">REFUND_VARIANT</span><span class="token operator">=</span><span class="token string">&quot;CurrentRate&quot;</span>

<span class="token assign-left variable">BODY</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;{}&quot;</span> <span class="token operator">|</span> jq <span class="token parameter variable">--arg</span> <span class="token string">&quot;a&quot;</span> <span class="token string">&quot;<span class="token variable">$REFUND_VARIANT</span>&quot;</span> <span class="token string">'. + {refundVariant:$a}'</span> <span class="token punctuation">\</span>
                  <span class="token operator">|</span> jq <span class="token parameter variable">--arg</span> <span class="token string">&quot;a&quot;</span> <span class="token string">&quot;<span class="token variable">$PAYMENT_METHOD</span>&quot;</span> <span class="token string">'. + {paymentMethod:$a}'</span><span class="token variable">)</span></span>&quot;</span>

<span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token punctuation">\</span>
     <span class="token parameter variable">-H</span> <span class="token string">&quot;Content-Type: application/json&quot;</span> <span class="token punctuation">\</span>
     <span class="token parameter variable">-H</span> <span class="token string">&quot;Authorization: token <span class="token variable">$API_KEY</span>&quot;</span> <span class="token punctuation">\</span>
     <span class="token parameter variable">-X</span> POST <span class="token punctuation">\</span>
     <span class="token parameter variable">-d</span> <span class="token string">&quot;<span class="token variable">$BODY</span>&quot;</span> <span class="token punctuation">\</span>
     <span class="token string">&quot;<span class="token variable">$BTCPAY_INSTANCE</span>/api/v1/stores/<span class="token variable">$STORE_ID</span>/invoices/<span class="token variable">$INVOICE_ID</span>/refund&quot;</span>
</code></pre></div><h2 id="btcpay-server-management-examples"><a href="#btcpay-server-management-examples" class="header-anchor">#</a> BTCPay Server management examples</h2> <p>Here we assume you are an ambassador and host BTCPay Server for your users. You manage your users on your own system and want to create a user and set email and password for their BTCPay Server login. Then using the same credentials to create a store and an API key on behalf of that user.</p> <h3 id="create-a-new-user"><a href="#create-a-new-user" class="header-anchor">#</a> Create a new user</h3> <p>Creating a new user can be done by using <a href="https://docs.btcpayserver.org/API/Greenfield/v1/#operation/Users_CreateUser" target="_blank" rel="noopener noreferrer">this endpoint<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">BTCPAY_INSTANCE</span><span class="token operator">=</span><span class="token string">&quot;https://mainnet.demo.btcpayserver.org&quot;</span>
<span class="token assign-left variable">ADMIN_API_KEY</span><span class="token operator">=</span><span class="token string">&quot;YOUR_ADMIN_API_KEY&quot;</span>

<span class="token assign-left variable"><span class="token environment constant">USER</span></span><span class="token operator">=</span><span class="token string">&quot;satoshi.nakamoto@example.com&quot;</span>
<span class="token assign-left variable">PASSWORD</span><span class="token operator">=</span><span class="token string">&quot;SuperSecurePasswordsShouldBeQuiteLong123&quot;</span>

<span class="token assign-left variable">BODY</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;{}&quot;</span> <span class="token operator">|</span> jq <span class="token parameter variable">--arg</span> <span class="token string">&quot;a&quot;</span> <span class="token string">&quot;<span class="token environment constant">$USER</span>&quot;</span> <span class="token string">'. + {email:$a}'</span> <span class="token punctuation">\</span>
                  <span class="token operator">|</span> jq <span class="token parameter variable">--arg</span> <span class="token string">&quot;a&quot;</span> <span class="token string">&quot;<span class="token variable">$PASSWORD</span>&quot;</span> <span class="token string">'. + {password:$a}'</span><span class="token variable">)</span></span>&quot;</span>
<span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token punctuation">\</span>
     <span class="token parameter variable">-H</span> <span class="token string">&quot;Content-Type: application/json&quot;</span> <span class="token punctuation">\</span>
     <span class="token parameter variable">-H</span> <span class="token string">&quot;Authorization: token <span class="token variable">$ADMIN_API_KEY</span>&quot;</span> <span class="token punctuation">\</span>
     <span class="token parameter variable">-X</span> POST <span class="token punctuation">\</span>
     <span class="token parameter variable">-d</span> <span class="token string">&quot;<span class="token variable">$BODY</span>&quot;</span> <span class="token punctuation">\</span>
     <span class="token string">&quot;<span class="token variable">$BTCPAY_INSTANCE</span>/api/v1/users&quot;</span>
</code></pre></div><h3 id="create-a-store-on-behalf-of-the-user"><a href="#create-a-store-on-behalf-of-the-user" class="header-anchor">#</a> Create a store on behalf of the user</h3> <p>Now we create a store with the new users credentials the user becomes the owner <a href="https://docs.btcpayserver.org/API/Greenfield/v1/#operation/Stores_CreateStore" target="_blank" rel="noopener noreferrer">create a new store<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">STORE_NAME</span><span class="token operator">=</span><span class="token string">&quot;My awesome store&quot;</span>

<span class="token assign-left variable">BODY</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;{}&quot;</span> <span class="token operator">|</span> jq <span class="token parameter variable">--arg</span> <span class="token string">&quot;a&quot;</span> <span class="token string">&quot;<span class="token variable">$STORE_NAME</span>&quot;</span> <span class="token string">'. + {name:$a}'</span><span class="token variable">)</span></span>&quot;</span>

<span class="token assign-left variable">NEW_STORE_ID</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token punctuation">\</span>
     <span class="token parameter variable">-H</span> <span class="token string">&quot;Content-Type: application/json&quot;</span> <span class="token punctuation">\</span>
     <span class="token parameter variable">--user</span> <span class="token string">&quot;<span class="token environment constant">$USER</span>:<span class="token variable">$PASSWORD</span>&quot;</span> <span class="token punctuation">\</span>
     <span class="token parameter variable">-X</span> POST <span class="token punctuation">\</span>
     <span class="token parameter variable">-d</span> <span class="token string">&quot;<span class="token variable">$BODY</span>&quot;</span> <span class="token punctuation">\</span>
     <span class="token string">&quot;<span class="token variable">$BTCPAY_INSTANCE</span>/api/v1/stores&quot;</span>  <span class="token operator">|</span> jq <span class="token parameter variable">-r</span> .id<span class="token variable">)</span></span>&quot;</span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;New store id: <span class="token variable">$NEW_STORE_ID</span>&quot;</span>
</code></pre></div><h3 id="create-a-new-api-key-on-behalf-of-the-user"><a href="#create-a-new-api-key-on-behalf-of-the-user" class="header-anchor">#</a> Create a new API key on behalf of the user</h3> <p>Now we can create an API key and limit it to the new store with e.g. the <code>btcpay.store.canmodifystoresettings</code> permission. Likely you also want to allow API key to create invoices, but for this example we keep it simple.</p> <p>You can find the needed permissions for endpoints on the endpoint docs under &quot;Authorization&quot; or an overview of permissions in the <a href="https://docs.btcpayserver.org/API/Greenfield/v1/#section/Authentication/API_Key" target="_blank" rel="noopener noreferrer">authorization section<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">ADMIN_API_KEY</span><span class="token operator">=</span><span class="token string">&quot;YOUR_ADMIN_API_KEY&quot;</span>
<span class="token assign-left variable"><span class="token environment constant">USER</span></span><span class="token operator">=</span><span class="token string">&quot;satoshi.nakamoto@example.com&quot;</span>
<span class="token assign-left variable">PERMISSION</span><span class="token operator">=</span><span class="token string">&quot;btcpay.store.canmodifystoresettings&quot;</span>
<span class="token assign-left variable">NEW_STORE_ID</span><span class="token operator">=</span><span class="token string">&quot;NEW_STORE_ID_FROM_PREVIOUS_STEP&quot;</span>

<span class="token assign-left variable">BODY</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;{}&quot;</span> <span class="token operator">|</span> jq <span class="token parameter variable">--arg</span> <span class="token string">&quot;a&quot;</span> <span class="token string">&quot;<span class="token variable">$PERMISSION</span>:<span class="token variable">$NEW_STORE_ID</span>&quot;</span> <span class="token string">'. + {permissions:[$a]}'</span><span class="token variable">)</span></span>&quot;</span>
<span class="token assign-left variable">USER_API_KEY</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token punctuation">\</span>
     <span class="token parameter variable">-H</span> <span class="token string">&quot;Content-Type: application/json&quot;</span> <span class="token punctuation">\</span>
     <span class="token parameter variable">-H</span> <span class="token string">&quot;Authorization: token <span class="token variable">$ADMIN_API_KEY</span>&quot;</span> <span class="token punctuation">\</span>
     <span class="token parameter variable">-X</span> POST <span class="token punctuation">\</span>
     <span class="token parameter variable">-d</span> <span class="token string">&quot;<span class="token variable">$BODY</span>&quot;</span> <span class="token punctuation">\</span>
     <span class="token string">&quot;<span class="token variable">$BTCPAY_INSTANCE</span>/api/v1/users/<span class="token environment constant">$USER</span>/api-keys&quot;</span>  <span class="token operator">|</span> jq <span class="token parameter variable">-r</span> .apiKey<span class="token variable">)</span></span>&quot;</span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;New user api key: <span class="token variable">$USER_API_KEY</span>&quot;</span>
</code></pre></div><h3 id="read-store-information"><a href="#read-store-information" class="header-anchor">#</a> Read store information</h3> <p>We can use the new apikey to <a href="https://docs.btcpayserver.org/API/Greenfield/v1/#operation/Stores_GetStore" target="_blank" rel="noopener noreferrer">read store<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> information:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">USER_API_KEY</span><span class="token operator">=</span><span class="token string">&quot;API_KEY_FROM_PREVIOUS_STEP&quot;</span>
<span class="token assign-left variable">NEW_STORE_ID</span><span class="token operator">=</span><span class="token string">&quot;NEW_STORE_ID_FROM_BEFORE_PREVIOUS_STEP&quot;</span>

<span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token punctuation">\</span>
     <span class="token parameter variable">-H</span> <span class="token string">&quot;Content-Type: application/json&quot;</span> <span class="token punctuation">\</span>
     <span class="token parameter variable">-H</span> <span class="token string">&quot;Authorization: token <span class="token variable">$USER_API_KEY</span>&quot;</span> <span class="token punctuation">\</span>
     <span class="token parameter variable">-X</span> GET <span class="token punctuation">\</span>
     <span class="token string">&quot;<span class="token variable">$BTCPAY_INSTANCE</span>/api/v1/stores/<span class="token variable">$NEW_STORE_ID</span>&quot;</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/btcpayserver/btcpayserver-doc/edit/master/docs/Development/GreenFieldExample.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="edit-link"><a href="https://github.com/btcpayserver/btcpayserver-doc/issues/new?title=Improve%20Greenfield%20API%20example%20with%20cURL&amp;body=I%20could%20not%20find%20the%20information%20I%20was%20looking%20for%20on%20the%20%22Greenfield%20API%20example%20with%20cURL%22%20page%20(%60%2FDevelopment%2FGreenFieldExample%2F%60).%0A%0A%5BPLEASE%20DESCRIBE%20HOW%20THE%20PAGE%20CAN%20BE%20IMPROVED%5D&amp;labels=question" target="_blank" rel="noopener noreferrer">Didn't find an answer?</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      
      <a href="/BTCPayServer/greenfield-authorization/" class="prev">
        GreenField API Authorization Flow
      </a></span> <span class="next"><a href="/Development/GreenFieldExample-NodeJS/">
        Greenfield API example with Node.js (JavaScript)
      </a>
      
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.f7388c30.js" defer></script><script src="/assets/js/2.890b07d4.js" defer></script><script src="/assets/js/131.2dd271d7.js" defer></script>
  </body>
</html>
