<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Lightning Network (LN) and BTCPay Server | BTCPay Server</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="stylesheet" href="/styles/btcpayserver-variables.css">
    <meta name="description" content="BTCPay Server Official Documentation">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    
    <link rel="preload" href="/assets/css/0.styles.4b250e51.css" as="style"><link rel="preload" href="/assets/js/app.08b4f1e3.js" as="script"><link rel="preload" href="/assets/js/3.ac00e2a0.js" as="script"><link rel="preload" href="/assets/js/16.38e4d94a.js" as="script"><link rel="preload" href="/assets/js/71.97bae10c.js" as="script"><link rel="prefetch" href="/assets/js/10.9cf6cecc.js"><link rel="prefetch" href="/assets/js/100.52bd1711.js"><link rel="prefetch" href="/assets/js/101.8f76a459.js"><link rel="prefetch" href="/assets/js/102.e830189b.js"><link rel="prefetch" href="/assets/js/103.0ba8e5f3.js"><link rel="prefetch" href="/assets/js/104.5f775ce6.js"><link rel="prefetch" href="/assets/js/105.38b4e609.js"><link rel="prefetch" href="/assets/js/106.1d6b7407.js"><link rel="prefetch" href="/assets/js/107.e57a0891.js"><link rel="prefetch" href="/assets/js/108.83add42b.js"><link rel="prefetch" href="/assets/js/109.f86a7449.js"><link rel="prefetch" href="/assets/js/11.66e2eb01.js"><link rel="prefetch" href="/assets/js/110.fed3e6e4.js"><link rel="prefetch" href="/assets/js/111.2ca4abf4.js"><link rel="prefetch" href="/assets/js/112.39d97187.js"><link rel="prefetch" href="/assets/js/113.3755082e.js"><link rel="prefetch" href="/assets/js/114.afa1b899.js"><link rel="prefetch" href="/assets/js/115.50594a6f.js"><link rel="prefetch" href="/assets/js/116.52a4fdc7.js"><link rel="prefetch" href="/assets/js/117.755958a4.js"><link rel="prefetch" href="/assets/js/118.0ac97699.js"><link rel="prefetch" href="/assets/js/119.b1362e3a.js"><link rel="prefetch" href="/assets/js/12.a7bc00a3.js"><link rel="prefetch" href="/assets/js/120.8db4fa2a.js"><link rel="prefetch" href="/assets/js/121.dd37f6f8.js"><link rel="prefetch" href="/assets/js/122.336e97ac.js"><link rel="prefetch" href="/assets/js/123.8b011911.js"><link rel="prefetch" href="/assets/js/124.b211d9d6.js"><link rel="prefetch" href="/assets/js/125.667da440.js"><link rel="prefetch" href="/assets/js/126.5420681c.js"><link rel="prefetch" href="/assets/js/127.65a5cd78.js"><link rel="prefetch" href="/assets/js/128.8638ace1.js"><link rel="prefetch" href="/assets/js/129.c35dd304.js"><link rel="prefetch" href="/assets/js/13.bf94ce74.js"><link rel="prefetch" href="/assets/js/130.0a98bca9.js"><link rel="prefetch" href="/assets/js/131.efbeca9a.js"><link rel="prefetch" href="/assets/js/132.8b50625f.js"><link rel="prefetch" href="/assets/js/133.7f5ff11f.js"><link rel="prefetch" href="/assets/js/134.49f64279.js"><link rel="prefetch" href="/assets/js/135.72fedfb6.js"><link rel="prefetch" href="/assets/js/136.e0cda644.js"><link rel="prefetch" href="/assets/js/137.8da48b94.js"><link rel="prefetch" href="/assets/js/138.2342b639.js"><link rel="prefetch" href="/assets/js/139.55916d61.js"><link rel="prefetch" href="/assets/js/14.7c4a3c4c.js"><link rel="prefetch" href="/assets/js/140.aaa31689.js"><link rel="prefetch" href="/assets/js/141.d6df8e44.js"><link rel="prefetch" href="/assets/js/142.5336b998.js"><link rel="prefetch" href="/assets/js/143.4725d2b1.js"><link rel="prefetch" href="/assets/js/144.31bf6a25.js"><link rel="prefetch" href="/assets/js/15.fa4c3516.js"><link rel="prefetch" href="/assets/js/17.a802f92f.js"><link rel="prefetch" href="/assets/js/18.a05d1905.js"><link rel="prefetch" href="/assets/js/19.9ef621f6.js"><link rel="prefetch" href="/assets/js/20.ad352d84.js"><link rel="prefetch" href="/assets/js/21.3a8c7443.js"><link rel="prefetch" href="/assets/js/22.a1e3d979.js"><link rel="prefetch" href="/assets/js/23.fe6a5e71.js"><link rel="prefetch" href="/assets/js/24.84e822d3.js"><link rel="prefetch" href="/assets/js/25.e6f5da2b.js"><link rel="prefetch" href="/assets/js/26.db82463e.js"><link rel="prefetch" href="/assets/js/27.8d3aad2d.js"><link rel="prefetch" href="/assets/js/28.62557525.js"><link rel="prefetch" href="/assets/js/29.b0df928d.js"><link rel="prefetch" href="/assets/js/30.1d98a149.js"><link rel="prefetch" href="/assets/js/31.cff84de9.js"><link rel="prefetch" href="/assets/js/32.72fa0bc9.js"><link rel="prefetch" href="/assets/js/33.fc7146e7.js"><link rel="prefetch" href="/assets/js/34.5a4bc133.js"><link rel="prefetch" href="/assets/js/35.4d2e3dbf.js"><link rel="prefetch" href="/assets/js/36.3d159de8.js"><link rel="prefetch" href="/assets/js/37.8acb9f7a.js"><link rel="prefetch" href="/assets/js/38.038a1a0b.js"><link rel="prefetch" href="/assets/js/39.9b5ebe67.js"><link rel="prefetch" href="/assets/js/4.2591ddad.js"><link rel="prefetch" href="/assets/js/40.2cb4a7c6.js"><link rel="prefetch" href="/assets/js/41.221fc46f.js"><link rel="prefetch" href="/assets/js/42.b6bf3716.js"><link rel="prefetch" href="/assets/js/43.deedb2a0.js"><link rel="prefetch" href="/assets/js/44.e143b33b.js"><link rel="prefetch" href="/assets/js/45.9d3d1f43.js"><link rel="prefetch" href="/assets/js/46.1bdce507.js"><link rel="prefetch" href="/assets/js/47.8ba55a0a.js"><link rel="prefetch" href="/assets/js/48.fe166040.js"><link rel="prefetch" href="/assets/js/49.bef57dc8.js"><link rel="prefetch" href="/assets/js/5.e6b34796.js"><link rel="prefetch" href="/assets/js/50.89f0e1f5.js"><link rel="prefetch" href="/assets/js/51.e2e81c45.js"><link rel="prefetch" href="/assets/js/52.86a56ba5.js"><link rel="prefetch" href="/assets/js/53.2eafaa9a.js"><link rel="prefetch" href="/assets/js/54.216012b6.js"><link rel="prefetch" href="/assets/js/55.f2c1194c.js"><link rel="prefetch" href="/assets/js/56.fec335f6.js"><link rel="prefetch" href="/assets/js/57.178afc86.js"><link rel="prefetch" href="/assets/js/58.ab569e52.js"><link rel="prefetch" href="/assets/js/59.f9c5a72b.js"><link rel="prefetch" href="/assets/js/6.38294762.js"><link rel="prefetch" href="/assets/js/60.c7e0db20.js"><link rel="prefetch" href="/assets/js/61.9243b884.js"><link rel="prefetch" href="/assets/js/62.426b470b.js"><link rel="prefetch" href="/assets/js/63.85c1b776.js"><link rel="prefetch" href="/assets/js/64.9717762c.js"><link rel="prefetch" href="/assets/js/65.fd1d414c.js"><link rel="prefetch" href="/assets/js/66.7a2e7cce.js"><link rel="prefetch" href="/assets/js/67.ed768ee5.js"><link rel="prefetch" href="/assets/js/68.c61daf14.js"><link rel="prefetch" href="/assets/js/69.60c7292a.js"><link rel="prefetch" href="/assets/js/7.2d668878.js"><link rel="prefetch" href="/assets/js/70.37a23355.js"><link rel="prefetch" href="/assets/js/72.bb2ea0f9.js"><link rel="prefetch" href="/assets/js/73.3ecd9d3c.js"><link rel="prefetch" href="/assets/js/74.b93b6ef2.js"><link rel="prefetch" href="/assets/js/75.ca7150c4.js"><link rel="prefetch" href="/assets/js/76.b6d3956b.js"><link rel="prefetch" href="/assets/js/77.b146ea7c.js"><link rel="prefetch" href="/assets/js/78.b89f1fd8.js"><link rel="prefetch" href="/assets/js/79.bc5a3a49.js"><link rel="prefetch" href="/assets/js/8.1b697091.js"><link rel="prefetch" href="/assets/js/80.fb6b987d.js"><link rel="prefetch" href="/assets/js/81.47359dfd.js"><link rel="prefetch" href="/assets/js/82.acc186c8.js"><link rel="prefetch" href="/assets/js/83.beca3771.js"><link rel="prefetch" href="/assets/js/84.a6d735ca.js"><link rel="prefetch" href="/assets/js/85.b27b8f2f.js"><link rel="prefetch" href="/assets/js/86.955764a8.js"><link rel="prefetch" href="/assets/js/87.b4ebd86d.js"><link rel="prefetch" href="/assets/js/88.ccf56800.js"><link rel="prefetch" href="/assets/js/89.1a4a396b.js"><link rel="prefetch" href="/assets/js/9.d411c05b.js"><link rel="prefetch" href="/assets/js/90.4d6ee922.js"><link rel="prefetch" href="/assets/js/91.50122994.js"><link rel="prefetch" href="/assets/js/92.e98c2cf7.js"><link rel="prefetch" href="/assets/js/93.6efd7465.js"><link rel="prefetch" href="/assets/js/94.a6309320.js"><link rel="prefetch" href="/assets/js/95.7541d3b4.js"><link rel="prefetch" href="/assets/js/96.7ab44459.js"><link rel="prefetch" href="/assets/js/97.2fc2af1b.js"><link rel="prefetch" href="/assets/js/98.69b36ae2.js"><link rel="prefetch" href="/assets/js/99.da4d4ca6.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.bdd9cda6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4b250e51.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/btcpay-logo.svg" alt="BTCPay Server" class="logo"> <span class="site-name can-hide">BTCPay Server</span></a> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Guide/" class="nav-link">
  User Guide
</a></div><div class="nav-item"><a href="/Deployment/" class="nav-link">
  Deployment
</a></div><div class="nav-item"><a href="/Development/" class="nav-link">
  Developers
</a></div><div class="nav-item"><a href="/Contribute/" class="nav-link">
  Contribute
</a></div><div class="nav-item"><a href="/FAQ/" class="nav-link">
  FAQ
</a></div> <a href="https://github.com/btcpayserver/btcpayserver-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide social"><div class="nav-item"><a href="https://btcpayserver.org/" target="_blank" rel="noopener noreferrer website" class="nav-link external">
  Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://chat.btcpayserver.org/" target="_blank" rel="noopener noreferrer chat" class="nav-link external">
  Chat
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/btcpayserver/" target="_blank" rel="noopener noreferrer github" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://twitter.com/BtcpayServer" target="_blank" rel="noopener noreferrer twitter" class="nav-link external">
  Twitter
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/btcpayserver/btcpayserver-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <button type="button" class="btcpay-theme-switch"><svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path transform="translate(1 1)" d="M2.72 0A3.988 3.988 0 000 3.78c0 2.21 1.79 4 4 4 1.76 0 3.25-1.14 3.78-2.72-.4.13-.83.22-1.28.22-2.21 0-4-1.79-4-4 0-.45.08-.88.22-1.28z" class="btcpay-theme-switch-dark"></path><path transform="translate(1 1)" d="M4 0c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5S4.28 0 4 0zM1.5 1c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm5 0c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zM4 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM.5 3.5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm7 0c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zM1.5 6c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm5 0c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zM4 7c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5S4.28 7 4 7z" class="btcpay-theme-switch-light"></path></svg></button></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links social"><div class="nav-item"><a href="https://btcpayserver.org/" target="_blank" rel="noopener noreferrer website" class="nav-link external">
  Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://chat.btcpayserver.org/" target="_blank" rel="noopener noreferrer chat" class="nav-link external">
  Chat
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/btcpayserver/" target="_blank" rel="noopener noreferrer github" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://twitter.com/BtcpayServer" target="_blank" rel="noopener noreferrer twitter" class="nav-link external">
  Twitter
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/btcpayserver/btcpayserver-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <nav class="nav-links"><div class="nav-item"><a href="/Guide/" class="nav-link">
  User Guide
</a></div><div class="nav-item"><a href="/Deployment/" class="nav-link">
  Deployment
</a></div><div class="nav-item"><a href="/Development/" class="nav-link">
  Developers
</a></div><div class="nav-item"><a href="/Contribute/" class="nav-link">
  Contribute
</a></div><div class="nav-item"><a href="/FAQ/" class="nav-link">
  FAQ
</a></div> <a href="https://github.com/btcpayserver/btcpayserver-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Learn</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Guide/" class="sidebar-link">Introduction</a></li><li><a href="/TryItOut/" class="sidebar-link">Try it out</a></li><li><a href="/Walkthrough/" class="sidebar-link">Walkthrough</a></li><li><a href="/UseCase/" class="sidebar-link">Use Case</a></li><li><a href="/BTCPayVsOthers/" class="sidebar-link">BTCPay Server vs. Others</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Getting Started</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/RegisterAccount/" class="sidebar-link">(1) Register account</a></li><li><a href="/CreateStore/" class="sidebar-link">(2) Create a store</a></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/WalletSetup" class="sidebar-heading clickable open"><span>(3) Wallet Setup</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ConnectWallet/" class="sidebar-link">Connect Wallet</a></li><li><a href="/CreateWallet/" class="sidebar-link">Create Wallet</a></li><li><a href="/LightningNetwork/" aria-current="page" class="active sidebar-link">Lightning Network</a></li></ul></section></li><li><a href="/WhatsNext/" class="sidebar-link">(4) What's Next?</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Features</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Dashboard/" class="sidebar-link">Dashboard</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/Wallet" class="sidebar-heading clickable"><span>Wallet</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/Invoices/" class="sidebar-link">Invoices</a></li><li><a href="/PaymentRequests/" class="sidebar-link">Payment Requests</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/PullPayments" class="sidebar-heading clickable"><span>Pull Payments</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/Payouts/" class="sidebar-link">Payouts</a></li><li><a href="/Forms/" class="sidebar-link">Forms</a></li><li><a href="/Apps/" class="sidebar-link">Apps</a></li><li><a href="/Accounting/" class="sidebar-link">Accounting</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/Payjoin" class="sidebar-heading clickable"><span>Payjoin</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Integrations</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/WooCommerce/" class="sidebar-link">WooCommerce</a></li><li><a href="/Shopify/" class="sidebar-link">Shopify</a></li><li><a href="/Magento/" class="sidebar-link">Magento</a></li><li><a href="/PrestaShop/" class="sidebar-link">PrestaShop</a></li><li><a href="/OpenCart/" class="sidebar-link">OpenCart</a></li><li><a href="/Drupal/" class="sidebar-link">Drupal</a></li><li><a href="/Zapier/" class="sidebar-link">Zapier</a></li><li><a href="/Shopware/" class="sidebar-link">Shopware</a></li><li><a href="/VirtueMart/" class="sidebar-link">VirtueMart</a></li><li><a href="/CustomIntegration/" class="sidebar-link">Custom Integration</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Plugins</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/LNbank/" class="sidebar-heading clickable"><span>LNbank</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/LNDhubAPI/" class="sidebar-link">LNDhub API</a></li><li><a href="/Nostr/" class="sidebar-link">Nostr</a></li><li><a href="/PodServer/" class="sidebar-link">PodServer</a></li><li><a href="/TicketTailor/" class="sidebar-link">TicketTailor</a></li><li><a href="/Trocador/" class="sidebar-link">Trocador</a></li><li><a href="/Wabisabi/" class="sidebar-link">Wabisabi Coinjoin</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Support and Community</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Troubleshooting/" class="sidebar-link">Troubleshooting an issue</a></li><li><a href="/Support/" class="sidebar-link">Support</a></li><li><a href="/Community/" class="sidebar-link">Community</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="lightning-network-ln-and-btcpay-server"><a href="#lightning-network-ln-and-btcpay-server" class="header-anchor">#</a> Lightning Network (LN) and BTCPay Server</h1> <h2 id="overview"><a href="#overview" class="header-anchor">#</a> Overview</h2> <p>After deploying BTCPay Server, you may want to experiment with an innovative second-layer payment system built on top of Bitcoin protocol - the <a href="https://en.bitcoin.it/wiki/Lightning_Network" target="_blank" rel="noopener noreferrer">Lightning Network<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>This guide will show you how to set up your Lightning Network (LN) node in BTCPay Server and guide you through the basics.</p> <p>BTCPay Server currently offers three implementations of the Lightning Network:</p> <ul><li><a href="https://github.com/lightningnetwork/lnd" target="_blank" rel="noopener noreferrer">LND<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/ElementsProject/lightning" target="_blank" rel="noopener noreferrer">Core Lightning (CLN)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (formerly c-lightning)</li> <li><a href="https://github.com/ACINQ/eclair" target="_blank" rel="noopener noreferrer">Eclair<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="custom-block danger"><p class="custom-block-title">DANGER</p> <p>Before you proceed, please understand that the Lightning Network is still in the experimental stage.
Using the Lightning Network can put your money at risk. Do not use more than you can afford to lose.</p></div> <p>Take time to familiarize yourself with the risks associated with using the Lightning Network.</p> <p>If you choose to run the internal Lightning Node in BTCPay Server, consider:</p> <ol><li>Any lightning network node operates at 2 levels: <strong>on-chain</strong> and <strong>off-chain</strong>.</li> <li>The LN implementation of choice will create an on-chain hot wallet that will be used to fund the off-chain payment channels.</li> <li>Make sure you back up the <strong>on-chain</strong> hot wallet seed (see below instructions for the individual implementations).</li> <li>The seed in step #3 can <strong>only recover the on-chain funds</strong>, although it is necessary for the off-chain operation.</li> <li><strong>Off-chain</strong> funds locked in channels <strong>cannot</strong> be backed up using a single-seed. Read the documentation issued by your LN implementation of choice.</li> <li><strong>Off-chain</strong> recovery mechanisms are under active research and development. Erasing your BTCPay Server or unsafe/unsecure operation of the computing environment (e.g Filesystem corruption, compromised keys) can lead to permanent <strong>loss of funds</strong>.</li></ol> <p>As the technology matures and develops, mechanisms for proper backup will be easier to implement in BTCPay Server.
As of <a href="https://blog.btcpayserver.org/btcpay-lnd-migration/" target="_blank" rel="noopener noreferrer">v1.0.3.138<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, LND is the only lightning network implementation that allows for <a href="/FAQ/LightningNetwork/#where-can-i-find-recovery-seed-backup-for-my-lightning-network-wallet-in-btcpay-server">lightning seed backups with BTCPay Server</a>.</p> <h2 id="choosing-the-lightning-network-implementation"><a href="#choosing-the-lightning-network-implementation" class="header-anchor">#</a> Choosing the Lightning Network implementation</h2> <p>First, read <a href="/FAQ/LightningNetwork/#can-i-use-a-pruned-node-with-ln-in-btcpay">here</a> about using pruned Bitcoin nodes with lightning network implementations before deploying.</p> <p>On the installation, you'll have the option to choose the implementation.</p> <p>For <a href="/Deployment/LunaNode/">web-interface installations</a>, you can simply select the implementation from the drop-down menu.
For other <a href="https://github.com/btcpayserver/btcpayserver-docker" target="_blank" rel="noopener noreferrer">docker<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> based <a href="/Deployment/">deployment methods</a> you need to:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span> -
<span class="token builtin class-name">cd</span> btcpayserver-docker
<span class="token builtin class-name">export</span> <span class="token assign-left variable">BTCPAYGEN_LIGHTNING</span><span class="token operator">=</span><span class="token string">&quot;implementationgoeshere&quot;</span>
<span class="token builtin class-name">.</span> ./btcpay-setup.sh -i
</code></pre></div><ul><li>For <strong>Core Lightning (CLN)</strong> use <code>export BTCPAYGEN_LIGHTNING=&quot;clightning&quot;</code></li> <li>For <strong>LND</strong> use <code>export BTCPAYGEN_LIGHTNING=&quot;lnd&quot;</code></li> <li>For <strong>eclair</strong> use <code>export BTCPAYGEN_LIGHTNING=&quot;eclair&quot;</code> AND <code>export BTCPAYGEN_ADDITIONAL_FRAGMENTS=&quot;opt-txindex&quot;</code></li></ul> <p>Finally, to begin using Lightning, your blockchain needs to be fully synced.</p> <h2 id="lightning-node-configuration-in-btcpay-server"><a href="#lightning-node-configuration-in-btcpay-server" class="header-anchor">#</a> Lightning node configuration in BTCPay Server</h2> <h3 id="connecting-your-internal-lightning-node"><a href="#connecting-your-internal-lightning-node" class="header-anchor">#</a> Connecting your internal Lightning Node</h3> <p>Irrespective of the LN implementation deployed, the process of connecting your internal Lightning Node in BTCPay Server is the same.</p> <ol><li>Choose a store</li> <li>Go to &quot;Lightning&quot; &gt; Select &quot;Use internal node&quot;</li> <li>Click &quot;Save&quot; &gt; See &quot;BTC Lightning node updated&quot; message</li> <li>Go to &quot;Public Node Info&quot; &gt; The node should appear <strong>&quot;Online&quot;</strong></li></ol> <figure><img src="/assets/img/LightningNetworkNodeSetupOverview.e5d785ca.jpg" alt="LightningNetworkNodeSetupOverview" title="LightningNetworkNodeSetupOverview"></figure> <p>If the internal connection fails, confirm:</p> <ol><li>The Bitcoin on-chain node is fully synchronized</li> <li>The Internal lightning node is &quot;Enabled&quot; under &quot;Lightning&quot; &gt; &quot;Settings&quot; &gt; &quot;BTC Lightning Settings&quot;</li></ol> <p>If you are unable to connect to your Lightning node, try <a href="/FAQ/ServerSettings/#how-to-restart-btcpay-server">restarting your server</a> or reviewing our <a href="/Troubleshooting/">troubleshooting guide</a>. You will not be able to accept lightning payments in your store until your Lightning node appears &quot;Online&quot;. Try to test your Lightning connection by clicking the &quot;Public Node Info&quot; link.</p> <h3 id="connecting-an-external-lightning-node-in-btcpay-server"><a href="#connecting-an-external-lightning-node-in-btcpay-server" class="header-anchor">#</a> Connecting an external Lightning Node in BTCPay Server</h3> <p>BTCPay Server offers the option to connect to an external Lightning node. To configure it:</p> <ol><li>Go to &quot;Lightning&quot; &gt; Select &quot;Use custom node&quot; if there is no Lightning node configured.</li> <li>Go to &quot;Lightning&quot; &gt; Select &quot;Settings&quot; &gt; Select &quot;Change connection&quot; &gt; Select &quot;Use custom node&quot; to modify an existing connection</li> <li>Add the configuration details matching the lightning implementation used &gt; &quot;Test connection&quot;</li></ol> <h2 id="getting-started-with-btcpay-server-and-lnd"><a href="#getting-started-with-btcpay-server-and-lnd" class="header-anchor">#</a> Getting started with BTCPay Server and LND</h2> <h3 id="control-your-lnd-using-rtl"><a href="#control-your-lnd-using-rtl" class="header-anchor">#</a> Control your LND using RTL</h3> <p>The easiest way to use LND implementation with BTCPay Server is to use the <strong><a href="https://github.com/ShahanaFarooqui/RTL" target="_blank" rel="noopener noreferrer">Ride The Lightning<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong> (RTL) service. A web user interface for the Lightning Network, RTL allows you to operate your node without leaving BTCPay Server, from your browser.
<br>
To initiate RTL in BTCPay Server, Go to Server Settings &gt; Services &gt; RTL &gt; See information.</p> <h3 id="control-your-lnd-using-zap"><a href="#control-your-lnd-using-zap" class="header-anchor">#</a> Control your LND using Zap</h3> <p>For remote use of your LND node on iOS or PC, you can use <a href="https://github.com/LN-Zap/zap-tutorials/blob/master/docs/desktop/btcpay-server.mdx" target="_blank" rel="noopener noreferrer">Zap wallet integration<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.
\</p> <a href="https://www.youtube.com/watch?v=CWhTOunTb2Q" title="LND BTCPay" data-id="CWhTOunTb2Q" class="ytEmbed" style="background-image:url(https://img.youtube.com/vi/CWhTOunTb2Q/hqdefault.jpg);"><iframe title="LND BTCPay" data-src="https://www.youtube-nocookie.com/embed/CWhTOunTb2Q?&amp;autoplay=1&amp;autohide=1&amp;modestbranding=1&amp;color=white&amp;rel=0" frameborder="0" allow="autoplay;encrypted-media;picture-in-picture" allowfullscreen="allowfullscreen"></iframe></a>
\
Besides Zap, there are a few more wallets that allow remote control of the LND node, [the Nayuta wallet](https://nayuta.co/) and the [ZeusLN](https://github.com/ZeusLN/zeus). Both of which have not yet extensively been tested by the community.
<h3 id="control-your-lnd-using-lightning-joule"><a href="#control-your-lnd-using-lightning-joule" class="header-anchor">#</a> Control your LND using Lightning Joule</h3> <p>To remotely control your LND node via web browser, you can use Lightning Joule.
\</p> <a href="https://www.youtube.com/watch?v=a9_uHJhnKR4" title="Joule" data-id="a9_uHJhnKR4" class="ytEmbed" style="background-image:url(https://img.youtube.com/vi/a9_uHJhnKR4/hqdefault.jpg);"><iframe title="Joule" data-src="https://www.youtube-nocookie.com/embed/a9_uHJhnKR4?&amp;autoplay=1&amp;autohide=1&amp;modestbranding=1&amp;color=white&amp;rel=0" frameborder="0" allow="autoplay;encrypted-media;picture-in-picture" allowfullscreen="allowfullscreen"></iframe></a> <h3 id="control-your-lnd-via-the-command-line-lncli"><a href="#control-your-lnd-via-the-command-line-lncli" class="header-anchor">#</a> Control your LND via the command-line: lncli</h3> <p>LND can be accessed via the command-line using the shell script <code>bitcoin-lncli.sh</code>.
<br>
If you're on Docker make sure you're in docker directory.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span> -
<span class="token builtin class-name">cd</span> btcpayserver-docker
./bitcoin-lncli.sh <span class="token variable">$command</span>
./bitcoin-lncli.sh getinfo <span class="token comment">#show info about the node</span>
</code></pre></div><p>Run ./bitcoin-lncli.sh --help` to see a full list of commands or check the full <a href="https://api.lightning.community/" target="_blank" rel="noopener noreferrer">API documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="getting-started-with-btcpay-server-and-core-lightning-cln"><a href="#getting-started-with-btcpay-server-and-core-lightning-cln" class="header-anchor">#</a> Getting started with BTCPay Server and Core Lightning (CLN)</h2> <h3 id="control-your-cln-using-spark"><a href="#control-your-cln-using-spark" class="header-anchor">#</a> Control your CLN using Spark</h3> <p>The most straightforward way to start using the <strong>CLN implementation in BTCPay Server</strong> is to use <a href="https://github.com/shesek/spark-wallet" target="_blank" rel="noopener noreferrer">Spark Wallet<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> integration. Just like Zap for LND, Spark is a graphical interface of your internal CLN node.
\</p> <a href="https://www.youtube.com/watch?v=uV1R6IQpmg8" title="BTCPay Server - CLN and Spark" data-id="uV1R6IQpmg8" class="ytEmbed" style="background-image:url(https://img.youtube.com/vi/uV1R6IQpmg8/hqdefault.jpg);"><iframe title="BTCPay Server - CLN and Spark" data-src="https://www.youtube-nocookie.com/embed/uV1R6IQpmg8?&amp;autoplay=1&amp;autohide=1&amp;modestbranding=1&amp;color=white&amp;rel=0" frameborder="0" allow="autoplay;encrypted-media;picture-in-picture" allowfullscreen="allowfullscreen"></iframe></a>
\
You can use Spark as an internal or external wallet. Internal wallet allows users to use Spark via the web-browser inside their BTCPay Server. You can also connect externally to a Spark mobile or desktop app just by scanning a QR code.
\
Go to Server Settings &gt; Services &gt; Spark Server &gt; See information.
<h3 id="control-your-cln-via-the-command-line-lightning-cli"><a href="#control-your-cln-via-the-command-line-lightning-cli" class="header-anchor">#</a> Control your CLN via the command-line: lightning-cli</h3> <p>Similar to <code>lncli</code>, CLN can be accessed via the command-line using the shell script <code>bitcoin-lightning-cli.sh</code>.
<br>
If you're on Docker make sure you're in docker directory.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span> -
<span class="token builtin class-name">cd</span> btcpayserver-docker
./bitcoin-lightning-cli.sh <span class="token variable">$command</span>
./bitcoin-lightning-cli.sh getinfo <span class="token comment">#show info about the node</span>
</code></pre></div><p>Run <code>./bitcoin-lightning-cli.sh help</code> to see a full list of commands or check the full <a href="https://lightning.readthedocs.io/" target="_blank" rel="noopener noreferrer">API documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="lightning-node-backup"><a href="#lightning-node-backup" class="header-anchor">#</a> Lightning node backup</h2> <p>Before you start transacting using your new lightning node, consider backing up the <strong>on-chain</strong> wallet. Steps:</p> <ol><li><strong>for LND</strong>: storing a copy of the LND seed.
Go to &quot;Server Settings&quot; &gt; &quot;Services&quot; &gt; &quot;LND Seed Backup&quot; and select &quot;See information&quot;</li> <li><strong>for CLN</strong>: storing a copy of the <a href="https://lightning.readthedocs.io/BACKUP.html#hsm-secret" target="_blank" rel="noopener noreferrer">hsm_secret<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <br>
The CLN $LIGHTNINGDIR is located in <code>/var/lib/docker/volumes/generated_clightning_bitcoin_datadir/_data/bitcoin</code></li></ol> <p>Acknowledge the limitations of <strong>off-chain</strong> payment channel backups and associated risks.
<br>
See <a href="/Docker/backup-restore/#lightning-channel-backup">backup FAQ</a> if you are running the BTCPay Server instance with Docker.</p> <h3 id="funding-your-on-chain-wallet"><a href="#funding-your-on-chain-wallet" class="header-anchor">#</a> Funding your on-chain wallet</h3> <p>Now that your lightning node is active, before opening lightning payment channels, you will need to fund the on-chain wallet.
<br>
The on-chain funding process can be performed in two ways:</p> <ol><li>via the Ride The Lightning (RTL) UI interface</li></ol> <ul><li>Select a &quot;Store&quot; and go to the &quot;Lightning&quot; section</li> <li>Under &quot;Services&quot;, select &quot;Ride The Lightning&quot;</li> <li>In the RTL app, go to &quot;On-chain&quot;, select &quot;Receive&quot; under the &quot;On-chain Transactions&quot; menu</li> <li>Select &quot;Generate Address&quot; and use it as the destination for the allocated funds</li></ul> <ol start="2"><li>via the command-line using <code>bitcoin-lncli.sh</code> or <code>bitcoin-lightning-cli.sh</code></li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span> -
<span class="token builtin class-name">cd</span> btcpayserver-docker
./bitcoin-lncli.sh newaddress p2wkh <span class="token comment">#for LND</span>
./bitcoin-lightning-cli.sh newaddr  <span class="token comment">#for CLN</span>
<span class="token punctuation">{</span>
   <span class="token string">&quot;address&quot;</span> / <span class="token string">&quot;bech32&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;bc1...........&quot;</span> <span class="token comment">#use this as the destination for the allocated funds</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Once your on-chain lightning node is funded, it's time to connect to other nodes on the network and open payment channels.
<br>
Check out <a href="/LightningNetwork_PaymentChannels/">Payment channels</a> for recommendations on opening payment channels, liquidity management and more.</p> <h2 id="lapps-lightning-network-apps"><a href="#lapps-lightning-network-apps" class="header-anchor">#</a> Lapps (Lightning Network Apps)</h2> <p><a href="https://blockstream.com/2018/03/29/blockstreams-week-of-lapps-ends/" target="_blank" rel="noopener noreferrer">Lapps<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> are applications built on top of the <a href="https://blockstream.com/2018/01/16/lightning-charge/" target="_blank" rel="noopener noreferrer">Lightning Charge<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, a complimentary package that allows users and developers to easier use and develop on top of CLN. If you decided to use CLN, you can easily connect your BTCPay to any of the Lapps.</p> <p>BTCPay Server exposes all the necessary information required to <strong>connect your internal BTCPay CLN node to a Lightning Network App</strong>. Go to Server Settings &gt; Services &gt; Lightning charge server &gt; See information &gt; Credentials.</p> <p>Below are videos that showcase how to connect some of the lapps to your BTCPay.</p> <a href="https://www.youtube.com/watch?v=6EHNq1anD1k" title="BTCPay Server - CLN and lapps intro" data-id="6EHNq1anD1k" class="ytEmbed" style="background-image:url(https://img.youtube.com/vi/6EHNq1anD1k/hqdefault.jpg);"><iframe title="BTCPay Server - CLN and lapps intro" data-src="https://www.youtube-nocookie.com/embed/6EHNq1anD1k?&amp;autoplay=1&amp;autohide=1&amp;modestbranding=1&amp;color=white&amp;rel=0" frameborder="0" allow="autoplay;encrypted-media;picture-in-picture" allowfullscreen="allowfullscreen"></iframe></a> <a href="https://www.youtube.com/watch?v=ZbM3jcxau0o" title="&quot;BTCPay Server - CLN and lapps publisher" data-id="ZbM3jcxau0o" class="ytEmbed" style="background-image:url(https://img.youtube.com/vi/ZbM3jcxau0o/hqdefault.jpg);"><iframe title="&quot;BTCPay Server - CLN and lapps publisher" data-src="https://www.youtube-nocookie.com/embed/ZbM3jcxau0o?&amp;autoplay=1&amp;autohide=1&amp;modestbranding=1&amp;color=white&amp;rel=0" frameborder="0" allow="autoplay;encrypted-media;picture-in-picture" allowfullscreen="allowfullscreen"></iframe></a> <a href="https://www.youtube.com/watch?v=EYrsU3LGpbI" title="BTCPay Server - CLN and lapps woo lightning" data-id="EYrsU3LGpbI" class="ytEmbed" style="background-image:url(https://img.youtube.com/vi/EYrsU3LGpbI/hqdefault.jpg);"><iframe title="BTCPay Server - CLN and lapps woo lightning" data-src="https://www.youtube-nocookie.com/embed/EYrsU3LGpbI?&amp;autoplay=1&amp;autohide=1&amp;modestbranding=1&amp;color=white&amp;rel=0" frameborder="0" allow="autoplay;encrypted-media;picture-in-picture" allowfullscreen="allowfullscreen"></iframe></a></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/btcpayserver/btcpayserver-doc/edit/master/docs/LightningNetwork.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="edit-link"><a href="https://github.com/btcpayserver/btcpayserver-doc/issues/new?title=Improve%20Lightning%20Network%20(LN)%20and%20BTCPay%20Server&amp;body=I%20could%20not%20find%20the%20information%20I%20was%20looking%20for%20on%20the%20%22Lightning%20Network%20(LN)%20and%20BTCPay%20Server%22%20page%20(%60%2FLightningNetwork%2F%60).%0A%0A%5BPLEASE%20DESCRIBE%20HOW%20THE%20PAGE%20CAN%20BE%20IMPROVED%5D&amp;labels=question" target="_blank" rel="noopener noreferrer">Didn't find an answer?</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      
      <a href="/CreateWallet/" class="prev">
        Create Wallet
      </a></span> <span class="next"><a href="/WhatsNext/">
        (4) What's Next?
      </a>
      
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.08b4f1e3.js" defer></script><script src="/assets/js/3.ac00e2a0.js" defer></script><script src="/assets/js/16.38e4d94a.js" defer></script><script src="/assets/js/71.97bae10c.js" defer></script>
  </body>
</html>
