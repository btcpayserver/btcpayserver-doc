(window.webpackJsonp=window.webpackJsonp||[]).push([[157],{983:function(e,t,a){"use strict";a.r(t);var r=a(17),s=Object(r.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"api-specification"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#api-specification"}},[e._v("#")]),e._v(" API Specification")]),e._v(" "),t("p",[e._v("NBXplorer is a multi crypto currency lightweight block explorer.")]),e._v(" "),t("p",[e._v("NBXplorer does not index the whole blockchain, rather, it listens transactions and blocks from a trusted full node and index only addresses and transactions which belongs to a "),t("code",[e._v("DerivationScheme")]),e._v(" that you decide to track.")]),e._v(" "),t("p",[e._v("This document describes the concepts, while the "),t("a",{attrs:{href:"https://dgarage.github.io/NBXplorer/",target:"_blank",rel:"noopener noreferrer"}},[e._v("API endpoints are documented here"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("h2",{attrs:{id:"table-of-content"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#table-of-content"}},[e._v("#")]),e._v(" Table of content")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#configuration"}},[e._v("Configuration")])]),e._v(" "),t("li",[t("a",{attrs:{href:"#tracked-sources"}},[e._v("Tracked Sources")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#derivation-scheme"}},[e._v("Derivation scheme")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#standard-derivation-scheme"}},[e._v("Standard Derivation schemes")])]),e._v(" "),t("li",[t("a",{attrs:{href:"#policy-derivation-scheme"}},[e._v("Policy Derivation scheme")])])])]),e._v(" "),t("li",[t("a",{attrs:{href:"#groups"}},[e._v("Groups")])]),e._v(" "),t("li",[t("a",{attrs:{href:"#addresses"}},[e._v("Standalone addresses")])])])]),e._v(" "),t("li",[t("a",{attrs:{href:"#authentication"}},[e._v("Authentication")])])]),e._v(" "),t("h2",{attrs:{id:"configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configuration"}},[e._v("#")]),e._v(" Configuration")]),e._v(" "),t("p",[e._v("You can check the available settings with "),t("code",[e._v("--help")]),e._v(".")]),e._v(" "),t("p",[e._v("NBXplorer can be configured in three way:")]),e._v(" "),t("ul",[t("li",[e._v("Through command line arguments (eg. "),t("code",[e._v("--chains btc")]),e._v(")")]),e._v(" "),t("li",[e._v("Through environment variables (eg. "),t("code",[e._v("NBXPLORER_CHAINS=btc")]),e._v(")")]),e._v(" "),t("li",[e._v("Through configuration file (eg. "),t("code",[e._v("chains=btc")]),e._v(")")])]),e._v(" "),t("p",[e._v("If you use configuration file, you can find it on windows in:")]),e._v(" "),t("div",{staticClass:"language-pwsh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("C:\\Users\\<user>\\AppData\\Roaming\\NBXplorer\\<network>\\settings.config\n")])])]),t("p",[e._v("On linux or mac:")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("~/.nbxplorer/"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("network"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("/settings.config\n")])])]),t("p",[e._v("Be careful, if you run NBXplorer with "),t("code",[e._v("dotnet run")]),e._v(", you should do it this way, with settings after the "),t("code",[e._v("--")]),e._v(":")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("dotnet run --no-launch-profile --no-build "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-c")]),e._v(" Release "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-p")]),e._v(" ."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("NBXplorer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("NBXplorer.csproj -- "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--chains")]),e._v(" btc\n")])])]),t("p",[e._v("Else, launch profiles, which are settings meant to be used only for debugging time, might be taken into account.")]),e._v(" "),t("h2",{attrs:{id:"tracked-sources"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tracked-sources"}},[e._v("#")]),e._v(" "),t("a",{attrs:{name:"tracked-source"}}),e._v("Tracked Sources")]),e._v(" "),t("p",[e._v("A tracked source is a generic way to track a set of scripts (addresses) and its UTXOs, transactions, and balances.")]),e._v(" "),t("p",[e._v("And there are three different types: "),t("code",[e._v("Derivation Schemes")]),e._v(", "),t("code",[e._v("Groups")]),e._v(" and "),t("code",[e._v("Standalone addresses")]),e._v(".")]),e._v(" "),t("h3",{attrs:{id:"derivation-scheme"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#derivation-scheme"}},[e._v("#")]),e._v(" "),t("a",{attrs:{name:"derivationScheme"}}),e._v("Derivation scheme")]),e._v(" "),t("p",[e._v("A derivation scheme, also called "),t("code",[e._v("derivationStrategy")]),e._v(" internally, is a flexible way to define how to generate deterministic addresses for a wallet.")]),e._v(" "),t("p",[e._v("A derivation scheme tracked source's format is "),t("code",[e._v("DERIVATIONSCHEME:derivationScheme")]),e._v(" (eg. "),t("code",[e._v("DERIVATIONSCHEME:xpub1")]),e._v(").\nYou can create one by calling "),t("a",{attrs:{href:"https://dgarage.github.io/NBXplorer/#tag/Derivations/operation/Track",target:"_blank",rel:"noopener noreferrer"}},[e._v("Tracking derivation scheme"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("p",[e._v("There are two types of derivation schemes:")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#standard-derivation-scheme"}},[e._v("Standard")]),e._v(", for simple and standard use cases (single sig, or multi sig)")]),e._v(" "),t("li",[t("a",{attrs:{href:"#policy-derivation-scheme"}},[e._v("Policy")]),e._v(", for supporting more complex spending conditions through "),t("a",{attrs:{href:"https://github.com/bitcoin/bips/blob/master/bip-0388.mediawiki",target:"_blank",rel:"noopener noreferrer"}},[e._v("Wallet policies (BIP0388)"),t("OutboundLink")],1),e._v(".")])]),e._v(" "),t("h4",{attrs:{id:"standard-derivation-scheme"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#standard-derivation-scheme"}},[e._v("#")]),e._v(" "),t("a",{attrs:{name:"standard-derivation-scheme"}}),e._v("Standard Derivation scheme")]),e._v(" "),t("p",[e._v("A "),t("code",[e._v("Standard Derivation Scheme")]),e._v(" defines how wallet addresses and keys are generated from a master public key (xpub) using standard hierarchical deterministic (HD) derivation paths. These schemes typically follow BIP standards (like BIP44, BIP49, BIP84, BIP86) and use predefined formats to produce addresses.")]),e._v(" "),t("p",[e._v("They assume the spending conditions are simple: derived keys authorize spending. Theres no support for complex policy scripts, multisig setups, or conditional logic.")]),e._v(" "),t("p",[e._v("NBXplorer will track any addresses on the "),t("code",[e._v("0/x")]),e._v(", "),t("code",[e._v("1/x")]),e._v(" and "),t("code",[e._v("x")]),e._v(" path.\nHere a documentation of the different supported standard derivation schemes:")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("Address type")]),e._v(" "),t("th",[e._v("Format")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[e._v("P2WPKH")]),e._v(" "),t("td",[e._v("xpub1")])]),e._v(" "),t("tr",[t("td",[e._v("P2SH-P2WPKH")]),e._v(" "),t("td",[e._v("xpub1-[p2sh]")])]),e._v(" "),t("tr",[t("td",[e._v("P2PKH")]),e._v(" "),t("td",[e._v("xpub-[legacy]")])]),e._v(" "),t("tr",[t("td",[e._v("Multi-sig P2WSH")]),e._v(" "),t("td",[e._v("2-of-xpub1-xpub2")])]),e._v(" "),t("tr",[t("td",[e._v("Multi-sig P2SH-P2WSH")]),e._v(" "),t("td",[e._v("2-of-xpub1-xpub2-[p2sh]")])]),e._v(" "),t("tr",[t("td",[e._v("Multi-sig P2SH")]),e._v(" "),t("td",[e._v("2-of-xpub1-xpub2-[legacy]")])]),e._v(" "),t("tr",[t("td",[e._v("P2TR")]),e._v(" "),t("td",[e._v("xpub1-[taproot]")])])])]),e._v(" "),t("p",[e._v("For multisig, the public keys are ordered before generating the address by default for privacy reason, use "),t("code",[e._v("-[keeporder]")]),e._v(" to disable it.")]),e._v(" "),t("p",[e._v("You can use more than one options at same time, example: "),t("code",[e._v("2-of-xpub1-xpub2-[legacy]-[keeporder]")])]),e._v(" "),t("p",[e._v("Most of routes asks for a "),t("code",[e._v("cryptoCode")]),e._v(". This identify the crypto currency to request data from. (eg. "),t("code",[e._v("BTC")]),e._v(", "),t("code",[e._v("LTC")]),e._v("...)")]),e._v(" "),t("h4",{attrs:{id:"policy-derivation-scheme"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#policy-derivation-scheme"}},[e._v("#")]),e._v(" "),t("a",{attrs:{name:"policy-derivation-scheme"}}),e._v("Policy Derivation scheme")]),e._v(" "),t("p",[e._v("A "),t("code",[e._v("Policy Derivation Scheme")]),e._v(" extends the standard approach. Instead of generating addresses using simple key derivation paths, it defines flexible spending policies using "),t("a",{attrs:{href:"https://github.com/bitcoin/bips/blob/master/bip-0379.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("Miniscript (BIP0379)"),t("OutboundLink")],1),e._v(" or "),t("a",{attrs:{href:"https://github.com/bitcoin/bips/blob/master/bip-0380.mediawiki",target:"_blank",rel:"noopener noreferrer"}},[e._v("Output Descriptors (BIP0380)"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("p",[e._v("This allows you to specify complex conditions like multi-signature setups, timelocks, or combinations of keys. The scheme then generates addresses based on these policies, offering far more control than standard derivation schemes.")]),e._v(" "),t("p",[e._v("You can use this "),t("a",{attrs:{href:"https://bitcoin.sipa.be/miniscript/",target:"_blank",rel:"noopener noreferrer"}},[e._v("website"),t("OutboundLink")],1),e._v(" to design your own "),t("code",[e._v("Miniscript policy")]),e._v(". For example, a simple policy might look like this:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("and(pk(A), or(pk(B), or(pk(C), older(1000))))\n")])])]),t("p",[e._v("This "),t("code",[e._v("miniscript policy")]),e._v(" allows spending from the wallet if both conditions are met:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("A")]),e._v(" signs, and")]),e._v(" "),t("li",[e._v("either "),t("code",[e._v("B")]),e._v(" signs, or "),t("code",[e._v("C")]),e._v(" signs after the UTXO is "),t("code",[e._v("1000")]),e._v(" blocks old.")])]),e._v(" "),t("p",[e._v("The website will convert this policy into a "),t("code",[e._v("Miniscript output")]),e._v(", which NBXplorer needs to generate addresses. In this case:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("and_v(or_c(pk(B),or_c(pk(C),v:older(1000))),pk(A))\n")])])]),t("p",[e._v("If you want to generate a P2WSH address for this script, wrap it with "),t("code",[e._v("wsh()")]),e._v(", like so:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("wsh(and_v(or_c(pk(B),or_c(pk(C),v:older(1000))),pk(A)))\n")])])]),t("p",[e._v("Finally, replace "),t("code",[e._v("A")]),e._v(", "),t("code",[e._v("B")]),e._v(", and "),t("code",[e._v("C")]),e._v(" with the appropriate xpubs in the following format: "),t("code",[e._v("[00112233/44'/55']xpub.../**")]),e._v(".\nWhere:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("00112233")]),e._v(" is the "),t("code",[e._v("xpub fingerprint")]),e._v(" (the first four bytes of the hash160 of the master private key)")]),e._v(" "),t("li",[t("code",[e._v("44'/55'")]),e._v(" is an arbitrary "),t("code",[e._v("key path")]),e._v(" used by the wallet that will sign with this key.")]),e._v(" "),t("li",[t("code",[e._v("xpub")]),e._v(" is the "),t("a",{attrs:{href:"https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki",target:"_blank",rel:"noopener noreferrer"}},[e._v("hierarchical public key (BIP032)"),t("OutboundLink")],1),e._v(" derived at "),t("code",[e._v("44'/55'")]),e._v(" from the master private key. (sometimes called the "),t("code",[e._v("account key")]),e._v(")")]),e._v(" "),t("li",[t("code",[e._v("**")]),e._v(" as defined by "),t("a",{attrs:{href:"https://github.com/bitcoin/bips/blob/master/bip-0389.mediawiki",target:"_blank",rel:"noopener noreferrer"}},[e._v("BIP0389"),t("OutboundLink")],1),e._v(", specifies that deposit addresses are generated from "),t("code",[e._v("0/i")]),e._v("  and change addresses from "),t("code",[e._v("1/i")]),e._v(" on the xpub. You can change it to another pattern (for example, "),t("code",[e._v("<2;3>/*")]),e._v(") if desired.")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("wsh(and_v(or_c(pk([973a74ba/48'/1'/0']tprv8gZh1wDxtsw28saCHAXAKGRStbAZpWAzuT13AVv5erS3CxHMNLmmJUFfpUKtvfBzQx5qajkzcHkghNp8kuPknDhMTwxPdzPA29NZQcr17ZT/**),or_c(pk([39bad04c/48'/1'/1']tprv8fkJnxvpWbmwWd8Ep6YdXoYrhp1WNDFLvVJKsioFwatwA2kyZtfpFhSqi84QGb83VXqPHWBiH4xV8rcrHz1WeWtk1gWS1MwJsE3dJWfp1Fj/**),v:older(1000))),pk([f19e9416/48'/1'/2']tprv8fuFjBofiYNzDW3GAyPeoMqDf2QdrQZxozJjAT74CxaeYkQv7cKZvrPLSTuB2Z6qX8nxfBbTQaGCzDpPzaH1jyV9RiRj8xVFmo34hFzsKb8/**)))\n")])])]),t("p",[e._v("When passing this derivation scheme to the API via a URL path (like when calling "),t("a",{attrs:{href:"https://dgarage.github.io/NBXplorer/#tag/Derivations/operation/Track",target:"_blank",rel:"noopener noreferrer"}},[e._v("Tracking derivation scheme"),t("OutboundLink")],1),e._v("), dont forget to escape it properly.")]),e._v(" "),t("p",[e._v("For example, if you need to track this policy, replace:")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("Character")]),e._v(" "),t("th",[e._v("Escape Sequence")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[t("code",[e._v("[")])]),e._v(" "),t("td",[t("code",[e._v("%5B")])])]),e._v(" "),t("tr",[t("td",[t("code",[e._v("]")])]),e._v(" "),t("td",[t("code",[e._v("%5D")])])]),e._v(" "),t("tr",[t("td",[t("code",[e._v("'")])]),e._v(" "),t("td",[t("code",[e._v("%27")])])]),e._v(" "),t("tr",[t("td",[t("code",[e._v("/")])]),e._v(" "),t("td",[t("code",[e._v("%2F")])])]),e._v(" "),t("tr",[t("td",[t("code",[e._v(",")])]),e._v(" "),t("td",[t("code",[e._v("%2C")])])]),e._v(" "),t("tr",[t("td",[t("code",[e._v("(")])]),e._v(" "),t("td",[t("code",[e._v("%28")])])]),e._v(" "),t("tr",[t("td",[t("code",[e._v(")")])]),e._v(" "),t("td",[t("code",[e._v("%29")])])]),e._v(" "),t("tr",[t("td",[t("code",[e._v(":")])]),e._v(" "),t("td",[t("code",[e._v("%3A")])])]),e._v(" "),t("tr",[t("td",[t("code",[e._v("*")])]),e._v(" "),t("td",[t("code",[e._v("%2A")])])])])]),e._v(" "),t("p",[e._v("The call to "),t("a",{attrs:{href:"https://dgarage.github.io/NBXplorer/#tag/Derivations/operation/Track",target:"_blank",rel:"noopener noreferrer"}},[e._v("Tracking derivation scheme"),t("OutboundLink")],1),e._v(" would then be:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("HTTP POST /v1/cryptos/BTC/derivations/wsh%28and_v%28or_c%28pk%28%5B973a74ba%2F48%27%2F1%27%2F0%27%5Dtprv8gZh1wDxtsw28saCHAXAKGRStbAZpWAzuT13AVv5erS3CxHMNLmmJUFfpUKtvfBzQx5qajkzcHkghNp8kuPknDhMTwxPdzPA29NZQcr17ZT%2F%2A%2A%29%2Cor_c%28pk%28%5B39bad04c%2F48%27%2F1%27%2F1%27%5Dtprv8fkJnxvpWbmwWd8Ep6YdXoYrhp1WNDFLvVJKsioFwatwA2kyZtfpFhSqi84QGb83VXqPHWBiH4xV8rcrHz1WeWtk1gWS1MwJsE3dJWfp1Fj%2F%2A%2A%29%2Cv%3Aolder%281000%29%29%29%2Cpk%28%5Bf19e9416%2F48%27%2F1%27%2F2%27%5Dtprv8fuFjBofiYNzDW3GAyPeoMqDf2QdrQZxozJjAT74CxaeYkQv7cKZvrPLSTuB2Z6qX8nxfBbTQaGCzDpPzaH1jyV9RiRj8xVFmo34hFzsKb8%2F%2A%2A%29%29%29%23adgpkx0s\n")])])]),t("h3",{attrs:{id:"groups"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#groups"}},[e._v("#")]),e._v(" "),t("a",{attrs:{name:"groups"}}),e._v("Groups")]),e._v(" "),t("p",[e._v("A group is a tracked source which serves as a logical method for grouping several tracked sources into a single entity. You can add or remove tracked sources to and from a group.")]),e._v(" "),t("p",[e._v("Additionally, specific addresses can be tracked through the group.")]),e._v(" "),t("p",[e._v("Every address attached by a child tracked source will be added to the group, including all related UTXOs and transactions.")]),e._v(" "),t("p",[e._v("A group can have any number of children, and a group can also be a child of another group.\nPlease note that all the children are returned by "),t("a",{attrs:{href:"https://dgarage.github.io/NBXplorer/#tag/Groups/operation/Get",target:"_blank",rel:"noopener noreferrer"}},[e._v("Get a group"),t("OutboundLink")],1),e._v(". As such, it is advised not to add too many children to avoid slowing down this call.")]),e._v(" "),t("p",[e._v("A group tracked source's format is "),t("code",[e._v("GROUP:groupid")]),e._v(".")]),e._v(" "),t("p",[e._v("You can create a new group by calling "),t("a",{attrs:{href:"https://dgarage.github.io/NBXplorer/#tag/Groups/operation/Create",target:"_blank",rel:"noopener noreferrer"}},[e._v("Create a group"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("h3",{attrs:{id:"standalone-addresses"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#standalone-addresses"}},[e._v("#")]),e._v(" "),t("a",{attrs:{name:"addresses"}}),e._v("Standalone addresses")]),e._v(" "),t("p",[e._v("This refers to a tracked source that monitors a single address. It functions similarly to a group, but with only one specific address to it.")]),e._v(" "),t("p",[e._v("The address tracked source's format is "),t("code",[e._v("ADDRESS:bc1...")]),e._v(".")]),e._v(" "),t("p",[e._v("You can create one by calling "),t("a",{attrs:{href:"https://dgarage.github.io/NBXplorer/#tag/Legacy/operation/TrackSingleAddress",target:"_blank",rel:"noopener noreferrer"}},[e._v("Tracking an address"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("h2",{attrs:{id:"authentication"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#authentication"}},[e._v("#")]),e._v(" Authentication")]),e._v(" "),t("p",[e._v("By default a cookie file is generated when NBXplorer is starting, for windows in:")]),e._v(" "),t("div",{staticClass:"language-pwsh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("C:\\Users\\<user>\\AppData\\Roaming\\NBXplorer\\<network>\\.cookie\n")])])]),t("p",[e._v("On linux or mac:")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("~/.nbxplorer/"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("network"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("/.cookie\n")])])]),t("p",[e._v("The content of this cookie must be used is used as HTTP BASIC authentication to use the API.")]),e._v(" "),t("p",[e._v("This can be disabled with "),t("code",[e._v("--noauth")]),e._v(" or "),t("code",[e._v("NBXPLORER_NOAUTH=1")]),e._v(".")]),e._v(" "),t("p",[e._v("Also, NBXPlorer listen by default on "),t("code",[e._v("127.0.0.1")]),e._v(", if you want to access it from another machine, run "),t("code",[e._v('--bind "0.0.0.0"')]),e._v(".")])])}),[],!1,null,null,null);t.default=s.exports}}]);