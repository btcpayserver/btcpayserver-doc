(window.webpackJsonp=window.webpackJsonp||[]).push([[173],{907:function(e,t,r){"use strict";r.r(t);var o=r(17),a=Object(o.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"btcpay-server-payment-provider-accept-bitcoin-payments-in-xenforo-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#btcpay-server-payment-provider-accept-bitcoin-payments-in-xenforo-2"}},[e._v("#")]),e._v(" BTCPay Server Payment Provider  Accept Bitcoin payments in XenForo 2")]),e._v(" "),t("figure",[t("img",{attrs:{src:"https://raw.githubusercontent.com/btcpayserver/xenforo/main/src/addons/BS/BtcPayProvider/btcpay-xenforo-banner.png",alt:"BTCPay XenForo Banner",title:"BTCPay XenForo Banner"}})]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/021-projects/xf2-btcpay/pulse",target:"_blank",rel:"noopener noreferrer"}},[t("img",{attrs:{src:"https://img.shields.io/maintenance/yes/2024?style=flat-square",alt:"Maintained",title:"Maintained"}}),t("OutboundLink")],1),e._v(" "),t("a",{attrs:{href:"https://github.com/021-projects/xf2-btcpay/blob/main/LICENSE",target:"_blank",rel:"noopener noreferrer"}},[t("img",{attrs:{src:"https://img.shields.io/github/license/021-projects/xf2-btcpay?color=brightgreen&style=flat-square",alt:"GitHub License",title:"GitHub License"}}),t("OutboundLink")],1),e._v(" "),t("a",{attrs:{href:"https://github.com/021-projects/xf2-btcpay/graphs/contributors",target:"_blank",rel:"noopener noreferrer"}},[t("img",{attrs:{src:"https://img.shields.io/github/contributors-anon/021-projects/xf2-btcpay?style=flat-square",alt:"GitHub contributors",title:"GitHub contributors"}}),t("OutboundLink")],1)]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/021-projects/xf2-btcpay/releases",target:"_blank",rel:"noopener noreferrer"}},[t("img",{attrs:{src:"https://img.shields.io/github/v/release/021-projects/xf2-btcpay?sort=semver&style=flat-square",alt:"GitHub release (latest SemVer)",title:"GitHub release (latest SemVer)"}}),t("OutboundLink")],1),e._v(" "),t("a",{attrs:{href:"https://github.com/021-projects/xf2-btcpay/releases",target:"_blank",rel:"noopener noreferrer"}},[t("img",{attrs:{src:"https://img.shields.io/github/downloads/021-projects/xf2-btcpay/total?style=flat-square",alt:"GitHub all releases",title:"GitHub all releases"}}),t("OutboundLink")],1)]),e._v(" "),t("h2",{attrs:{id:"requirements"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#requirements"}},[e._v("#")]),e._v(" Requirements")]),e._v(" "),t("ul",[t("li",[e._v("PHP 8.0+")]),e._v(" "),t("li",[e._v("XenForo 2.2+")]),e._v(" "),t("li",[t("a",{attrs:{href:"https://btcpayserver.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("BTCPay Server"),t("OutboundLink")],1),e._v(" ("),t("RouterLink",{attrs:{to:"/Deployment/"}},[e._v("self-hosted")]),e._v(" / "),t("RouterLink",{attrs:{to:"/Deployment/ThirdPartyHosting/"}},[e._v("third party")]),e._v(")")],1),e._v(" "),t("li",[t("RouterLink",{attrs:{to:"/CreateStore/"}},[e._v("Store On BTCPay Server")])],1),e._v(" "),t("li",[t("RouterLink",{attrs:{to:"/WalletSetup/"}},[e._v("Connected Wallet on BTCPay Server")])],1)]),e._v(" "),t("h3",{attrs:{id:"notes"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#notes"}},[e._v("#")]),e._v(" Notes")]),e._v(" "),t("ul",[t("li",[e._v("The add-on does not support recurring payments")]),e._v(" "),t("li",[e._v("The add-on does not support refunds")])]),e._v(" "),t("h2",{attrs:{id:"installation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#installation"}},[e._v("#")]),e._v(" Installation")]),e._v(" "),t("ol",[t("li",[e._v("Download the add-on from the "),t("a",{attrs:{href:"https://github.com/btcpayserver/xenforo/releases",target:"_blank",rel:"noopener noreferrer"}},[e._v("releases page"),t("OutboundLink")],1)]),e._v(" "),t("li",[e._v("Install the add-on via "),t("a",{attrs:{href:"https://xenforo.com/docs/xf2/add-ons/#control-panel-installation-21",target:"_blank",rel:"noopener noreferrer"}},[e._v("control panel"),t("OutboundLink")],1),e._v(" or "),t("a",{attrs:{href:"https://xenforo.com/docs/xf2/add-ons/#manual-installation",target:"_blank",rel:"noopener noreferrer"}},[e._v("manually"),t("OutboundLink")],1)])]),e._v(" "),t("h2",{attrs:{id:"configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configuration"}},[e._v("#")]),e._v(" Configuration")]),e._v(" "),t("h3",{attrs:{id:"payment-profile"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#payment-profile"}},[e._v("#")]),e._v(" Payment Profile")]),e._v(" "),t("ol",[t("li",[e._v("Go to XenForo Admin Panel (/admin.php)")]),e._v(" "),t("li",[e._v("Click on [Setup] -> [Payment Profiles]")]),e._v(" "),t("li",[e._v("Click on [Add Payment Profile]")]),e._v(" "),t("li",[e._v('Choose "BTCPay Server" in the "Provider" dropdown')]),e._v(" "),t("li",[e._v('Click on "Proceed..."')]),e._v(" "),t("li",[e._v('In the field "Host", enter the full URL of your host (including the https)  https://btcpay.mydomain.com')])]),e._v(" "),t("h3",{attrs:{id:"create-api-key"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#create-api-key"}},[e._v("#")]),e._v(" Create API Key")]),e._v(" "),t("ol",[t("li",[e._v("Go to your BTCPay Server")]),e._v(" "),t("li",[e._v("Click on [Account] -> Manage Account on the bottom left")]),e._v(" "),t("li",[e._v('Go to the tab "API Keys"')]),e._v(" "),t("li",[e._v("Click [Generate Key]")]),e._v(" "),t("li",[e._v("Check the following permissions:\n"),t("ul",[t("li",[e._v("Create an invoice (btcpay.store.cancreateinvoice)")]),e._v(" "),t("li",[e._v("View your stores (btcpay.store.canviewstoresettings)")])])]),e._v(" "),t("li",[e._v("Below the permissions click on [Select specific stores] and select the store created already (this ensures the API key is restricted to this single store)")]),e._v(" "),t("li",[e._v("Click on [Generate API Key]")]),e._v(" "),t("li",[e._v("Copy the generated API Key to your BTCPay Server payment profile settings form")])]),e._v(" "),t("h3",{attrs:{id:"setup-webhook"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#setup-webhook"}},[e._v("#")]),e._v(" Setup Webhook")]),e._v(" "),t("ol",[t("li",[e._v("Go to your BTCPay Server")]),e._v(" "),t("li",[e._v("Click on [Settings]")]),e._v(" "),t("li",[e._v('Go to the tab "Webhooks"')]),e._v(" "),t("li",[e._v("Click [Create Webhook]")]),e._v(" "),t("li",[e._v('Enter the following URL, replacing "https://mydomain.com" with your forum URL, in the "Payload URL" field: https://mydomain.com/payment_callback.php?_xfProvider=btcPayServer')]),e._v(" "),t("li",[e._v('Below "Which events would you like to trigger this webhook?" choose "Send me specific events" and select "An invoice has been settled"')]),e._v(" "),t("li",[e._v('Click on the eye icon near the "Secret" field and copy the secret to your BTCPay Server payment profile settings form')]),e._v(" "),t("li",[e._v("Click on [Add Webhook]")])]),e._v(" "),t("p",[e._v("Note: When testing a webhook, it may produce a 403 error - this is normal.")]),e._v(" "),t("h3",{attrs:{id:"payment-profile-continued"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#payment-profile-continued"}},[e._v("#")]),e._v(" Payment Profile (continued)")]),e._v(" "),t("ol",[t("li",[e._v("Go to your BTCPay Server")]),e._v(" "),t("li",[e._v("Click on [Settings]")]),e._v(" "),t("li",[e._v('Copy the "Store ID" to your BTCPay Server payment profile settings form')]),e._v(" "),t("li",[e._v("Click on [Save]")])]),e._v(" "),t("h2",{attrs:{id:"usage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#usage"}},[e._v("#")]),e._v(" Usage")]),e._v(" "),t("p",[e._v("You can use this integration wherever payment goes through XenForo payment profiles.")]),e._v(" "),t("p",[e._v("In most cases, a newly created payment profile requires activation in certain contexts.\nLet's look at an example of activating a newly created profile for user upgrades:")]),e._v(" "),t("ol",[t("li",[e._v("Go to XenForo Admin Panel (/admin.php)")]),e._v(" "),t("li",[e._v("Click on [Setup] -> [Users] -> [Users customization]-> [User upgrades]")]),e._v(" "),t("li",[e._v("Click on the user upgrade you want to activate the payment profile for")]),e._v(" "),t("li",[e._v('Select the payment profile you created in the "Payment profile" select box')]),e._v(" "),t("li",[e._v("Click on [Save]")])])])}),[],!1,null,null,null);t.default=a.exports}}]);