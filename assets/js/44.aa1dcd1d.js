(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{477:function(t,e,n){t.exports=n.p+"assets/img/ThirdPartyEnableLNOthers.36c1ffc4.png"},478:function(t,e,n){t.exports=n.p+"assets/img/btcpay-node-info.7e60d6c0.jpg"},479:function(t,e,n){t.exports=n.p+"assets/img/btcpaylightningfaq1.ed53f824.jpg"},480:function(t,e,n){t.exports=n.p+"assets/img/LightningNodepPageInfo.b96d25bc.png"},481:function(t,e,n){t.exports=n.p+"assets/img/LND-Service-Seed-Backup.a5298c02.jpg"},482:function(t,e,n){t.exports=n.p+"assets/img/LND-With-Seed-Example.3a3dd077.jpg"},842:function(t,e,n){"use strict";n.r(e);var a=n(17),s=Object(a.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"lightning-network-faq"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#lightning-network-faq"}},[t._v("#")]),t._v(" Lightning Network FAQ")]),t._v(" "),e("p",[t._v("This document clarifies some of the most common questions and issues users face with the Lightning Network in BTCPay. Before you start using the off-chain protocol, familiarize yourself with the risks. Additionally, read "),e("RouterLink",{attrs:{to:"/LightningNetwork/"}},[t._v("Getting Started with Lightning Network in BTCPay")])],1),t._v(" "),e("p"),e("div",{staticClass:"table-of-contents"},[e("ul",[e("li",[e("a",{attrs:{href:"#lightning-network-general-faq"}},[t._v("Lightning Network General FAQ")]),e("ul",[e("li",[e("a",{attrs:{href:"#how-many-users-can-use-lightning-network-in-btcpay"}},[t._v("How many users can use Lightning Network in BTCPay?")])]),e("li",[e("a",{attrs:{href:"#how-to-find-node-info-and-open-a-direct-channel-with-a-store-using-btcpay"}},[t._v("How to find node info and open a direct channel with a store using BTCPay?")])]),e("li",[e("a",{attrs:{href:"#as-a-merchant-do-i-need-to-open-direct-channels"}},[t._v("As a merchant, do I need to open direct channels?")])]),e("li",[e("a",{attrs:{href:"#how-can-i-get-inbound-capacity-to-my-node"}},[t._v("How can I get inbound capacity to my node?")])]),e("li",[e("a",{attrs:{href:"#i-previously-installed-btcpayserver-without-lightning-can-i-enable-it"}},[t._v("I previously installed BTCPayServer without lightning, can I enable it?")])]),e("li",[e("a",{attrs:{href:"#can-i-use-a-pruned-node-with-ln-in-btcpay"}},[t._v("Can I use a pruned node with LN in BTCPay?")])]),e("li",[e("a",{attrs:{href:"#can-i-use-my-existing-ln-node-with-btcpay"}},[t._v("Can I use my existing LN node with BTCPay?")])]),e("li",[e("a",{attrs:{href:"#how-to-change-from-core-lightning-cln-to-lnd-or-vice-versa"}},[t._v("How to change from Core Lightning (CLN) to LND or vice-versa?")])]),e("li",[e("a",{attrs:{href:"#i-switched-lightning-network-implementation-but-getting-no-payment-available-error"}},[t._v('I switched Lightning Network implementation, but getting "no payment available" error')])]),e("li",[e("a",{attrs:{href:"#i-get-warning-the-lightning-alias-variable-is-not-set-defaulting-to-a-blank-string-when-starting-container"}},[t._v('I get "WARNING: The LIGHTNING_ALIAS variable is not set. Defaulting to a blank string" when starting container')])]),e("li",[e("a",{attrs:{href:"#how-to-display-my-lightning-node-information-so-that-others-can-connect-to-me"}},[t._v("How to display my Lightning Node information so that others can connect to me?")])]),e("li",[e("a",{attrs:{href:"#where-can-i-find-recovery-seed-backup-for-my-lightning-network-wallet-in-btcpay-server"}},[t._v("Where can I find recovery seed backup for my Lightning Network wallet in BTCPay Server?")])]),e("li",[e("a",{attrs:{href:"#how-to-disable-on-chain-payments-and-use-ln-payments-only"}},[t._v("How to disable on-chain payments and use LN payments only?")])]),e("li",[e("a",{attrs:{href:"#how-to-see-my-lightning-network-version"}},[t._v("How to see my Lightning Network version?")])]),e("li",[e("a",{attrs:{href:"#how-to-redirect-a-lightning-address"}},[t._v("How to redirect a Lightning Address?")])])])]),e("li",[e("a",{attrs:{href:"#lightning-network-lnd-faq"}},[t._v("Lightning Network LND FAQ")]),e("ul",[e("li",[e("a",{attrs:{href:"#how-to-restart-my-lnd"}},[t._v("How to restart my LND?")])]),e("li",[e("a",{attrs:{href:"#how-to-rescan-the-lnd-on-chain-wallet"}},[t._v("How to rescan the LND on-chain wallet?")])]),e("li",[e("a",{attrs:{href:"#how-to-see-lnd-logs"}},[t._v("How to see LND logs?")])]),e("li",[e("a",{attrs:{href:"#what-s-the-default-directory-of-lnd-in-btcpay"}},[t._v("What’s the default directory of LND in BTCPay?")])]),e("li",[e("a",{attrs:{href:"#which-macaroon-needs-to-be-provided-for-external-nodes"}},[t._v("Which macaroon needs to be provided for external nodes?")])]),e("li",[e("a",{attrs:{href:"#lnd-connection-issues-after-an-update"}},[t._v("LND connection issues after an update")])]),e("li",[e("a",{attrs:{href:"#how-to-change-my-lnd-node-alias"}},[t._v("How to change my LND Node alias?")])]),e("li",[e("a",{attrs:{href:"#how-to-edit-lndconf"}},[t._v("How to edit lnd.conf?")])]),e("li",[e("a",{attrs:{href:"#how-to-connect-to-a-lnd-watchtower"}},[t._v("How to connect to a LND watchtower?")])]),e("li",[e("a",{attrs:{href:"#how-to-run-a-lnd-watchtower"}},[t._v("How to run a LND watchtower?")])]),e("li",[e("a",{attrs:{href:"#how-to-install-thunderhub"}},[t._v("How to install ThunderHub?")])])])]),e("li",[e("a",{attrs:{href:"#lightning-network-core-lightning-cln-faq"}},[t._v("Lightning Network Core Lightning (CLN) FAQ")]),e("ul",[e("li",[e("a",{attrs:{href:"#how-to-restart-my-core-lightning-cln"}},[t._v("How to restart my Core Lightning (CLN)?")])]),e("li",[e("a",{attrs:{href:"#how-to-announce-an-ipv6-address"}},[t._v("How to announce an IPv6 address?")])]),e("li",[e("a",{attrs:{href:"#how-to-edit-lightningconfig"}},[t._v("How to edit .lightning/config?")])])])]),e("li",[e("a",{attrs:{href:"#lightning-network-questions-and-support"}},[t._v("Lightning Network Questions and Support")])])])]),e("p"),t._v(" "),e("h2",{attrs:{id:"lightning-network-general-faq"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#lightning-network-general-faq"}},[t._v("#")]),t._v(" Lightning Network General FAQ")]),t._v(" "),e("p",[t._v("Here are some general questions about LN in BTCPay, regardless of the implementation.")]),t._v(" "),e("h3",{attrs:{id:"how-many-users-can-use-lightning-network-in-btcpay"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#how-many-users-can-use-lightning-network-in-btcpay"}},[t._v("#")]),t._v(" How many users can use Lightning Network in BTCPay?")]),t._v(" "),e("p",[t._v("On a self-hosted server, you can use only one internal Lightning node. Server owners can use the same Lightning node for an unlimited number of stores tied to their admin account.")]),t._v(" "),e("p",[t._v("Since version 1.0.3.128, a BTCPay Server host can enable it's registrants to use the internal Lightning Network node.\nIt can be enabled in Server Settings > Policies > Allow non-admins to use the internal lightning node in their stores.")]),t._v(" "),e("figure",[e("img",{attrs:{src:n(477),alt:"Enable LN for Others",title:"Enable LN for Others"}})]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("As a third-party host")]),t._v(" "),e("p",[t._v("All your registrants' funds will go to your own Lightning Wallet.\nYou will have to manually check and redispatch the funds to their respective owners. This could potentially become a burden.")])]),t._v(" "),e("div",{staticClass:"custom-block danger"},[e("p",{staticClass:"custom-block-title"},[t._v("As an individual using a third-party host")]),t._v(" "),e("p",[t._v("All payments made through the Lightning Network will go to your third-party's wallet.\nTake precautions and only use this option while using a trustworthy third-party host to ensure you get your funds back.")])]),t._v(" "),e("p",[t._v("Non-admin users can also connect to their own external nodes. Lightning node external connections are a technically advanced task. We recommend that if you want Lightning, you should deploy your own server instead, which comes with all the necessities bundled up.")]),t._v(" "),e("h3",{attrs:{id:"how-to-find-node-info-and-open-a-direct-channel-with-a-store-using-btcpay"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#how-to-find-node-info-and-open-a-direct-channel-with-a-store-using-btcpay"}},[t._v("#")]),t._v(" How to find node info and open a direct channel with a store using BTCPay?")]),t._v(" "),e("p",[t._v("If you're a customer trying to pay a Lightning Network invoice:")]),t._v(" "),e("ol",[e("li",[t._v('make sure to select "Lightning" from coin selection.')]),t._v(" "),e("li",[t._v("Select Copy/Scan")]),t._v(" "),e("li",[t._v("Select Node Info and scan or copy it manually.")])]),t._v(" "),e("figure",[e("img",{attrs:{src:n(478),alt:"BTCPay Checkout",title:"BTCPay Checkout"}})]),t._v(" "),e("p",[t._v("The exact procedure of opening a direct Lightning Network channel depends on the wallet you’re using. But, you should be able to figure it out easily now that you have merchant’s node information.")]),t._v(" "),e("h3",{attrs:{id:"as-a-merchant-do-i-need-to-open-direct-channels"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#as-a-merchant-do-i-need-to-open-direct-channels"}},[t._v("#")]),t._v(" As a merchant, do I need to open direct channels?")]),t._v(" "),e("p",[t._v("Merchants need incoming channels. Other people opening a channel with them provides liquidity to the merchant. Your customer should be able to open a direct channel with you.")]),t._v(" "),e("p",[t._v("You can also ask well-connected nodes to open a direct channel with you. Opening a channel is not spending funds, it’s more like putting the funds on a pre-paid card, and spending it later, or withdrawing it by closing a channel.")]),t._v(" "),e("h3",{attrs:{id:"how-can-i-get-inbound-capacity-to-my-node"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#how-can-i-get-inbound-capacity-to-my-node"}},[t._v("#")]),t._v(" How can I get inbound capacity to my node?")]),t._v(" "),e("p",[t._v("There are many ways in which one can get an inbound capacity. We recommend that you read this great article that provides "),e("a",{attrs:{href:"https://medium.com/lightningto-me/practical-solutions-to-inbound-capacity-problem-in-lightning-network-60224aa13393",target:"_blank",rel:"noopener noreferrer"}},[t._v("practical tips to inbound capacity"),e("OutboundLink")],1),t._v(".\nWhen asking for inbound capacity, consider any routing policy fees the service may have.")]),t._v(" "),e("h3",{attrs:{id:"i-previously-installed-btcpayserver-without-lightning-can-i-enable-it"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#i-previously-installed-btcpayserver-without-lightning-can-i-enable-it"}},[t._v("#")]),t._v(" I previously installed BTCPayServer without lightning, can I enable it?")]),t._v(" "),e("p",[t._v("BTCPay Server will allow you to set up your Lightning at any moment after creating your first store.\nWe currently support three implementations of the Lightning Network.")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/lightningnetwork/lnd",target:"_blank",rel:"noopener noreferrer"}},[t._v("LND"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/ElementsProject/lightning",target:"_blank",rel:"noopener noreferrer"}},[t._v("Core Lightning (CLN)"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/ACINQ/eclair",target:"_blank",rel:"noopener noreferrer"}},[t._v("eclair"),e("OutboundLink")],1)])]),t._v(" "),e("figure",[e("img",{attrs:{src:n(479),alt:"Connecting Lightning to store",title:"Connecting Lightning to store"}})]),t._v(" "),e("p",[t._v("Want to learn more on how to set up your store with Lightning ?\nFollow along the "),e("RouterLink",{attrs:{to:"/LightningNetwork/"}},[t._v("Lightning Network")]),t._v(" guide, and you will get your store connected to Lightning Network!")],1),t._v(" "),e("h3",{attrs:{id:"can-i-use-a-pruned-node-with-ln-in-btcpay"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#can-i-use-a-pruned-node-with-ln-in-btcpay"}},[t._v("#")]),t._v(" Can I use a pruned node with LN in BTCPay?")]),t._v(" "),e("p",[t._v("It is recommended to use Core Lightning (CLN) because the implementation supports pruned nodes.")]),t._v(" "),e("h3",{attrs:{id:"can-i-use-my-existing-ln-node-with-btcpay"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#can-i-use-my-existing-ln-node-with-btcpay"}},[t._v("#")]),t._v(" Can I use my existing LN node with BTCPay?")]),t._v(" "),e("p",[t._v("If you already have a well connected lightning node with sufficient inbound liquidity, you may want to use it with BTCPay instead of the included lightning node.")]),t._v(" "),e("p",[t._v("To do so, go to the lightning node settings page of your store (Store > Settings > Lightning > Modify). Here on the lightning node setting page, select the option for Use a custom lightning node.")]),t._v(" "),e("p",[t._v("The connection strings vary per lightning implementation, the "),e("RouterLink",{attrs:{to:"/LightningNetwork/#connecting-an-external-lightning-node-in-btcpay"}},[t._v("settings page")]),t._v(" contains the documentation for the connection settings to give you further guidance.")],1),t._v(" "),e("h3",{attrs:{id:"how-to-change-from-core-lightning-cln-to-lnd-or-vice-versa"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#how-to-change-from-core-lightning-cln-to-lnd-or-vice-versa"}},[t._v("#")]),t._v(" How to change from Core Lightning (CLN) to LND or vice-versa?")]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),e("p",[t._v("Be sure to have closed all channels and removed both on-chain and Lightning funds from the Lightning node before switching from one to the other.")])]),t._v(" "),e("p",[t._v("You need to SSH log in into your virtual machine.")]),t._v(" "),e("p",[t._v("To switch to LND:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("su")]),t._v(" -\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" btcpayserver-docker\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("BTCPAYGEN_LIGHTNING")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lnd"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" ./btcpay-setup.sh "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-i")]),t._v("\n")])])]),e("p",[t._v("To switch to Core Lightning (CLN):")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("su")]),t._v(" -\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" btcpayserver-docker\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("BTCPAYGEN_LIGHTNING")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"clightning"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" ./btcpay-setup.sh "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-i")]),t._v("\n")])])]),e("h3",{attrs:{id:"i-switched-lightning-network-implementation-but-getting-no-payment-available-error"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#i-switched-lightning-network-implementation-but-getting-no-payment-available-error"}},[t._v("#")]),t._v(' I switched Lightning Network implementation, but getting "no payment available" error')]),t._v(" "),e("p",[t._v("When you switch from one implementation to another, you need to reconfigure your lightning connection string at a store level, to use adequate implementation. Stores > Settings > Lightning > Setup > "),e("strong",[t._v("Connection string")]),t._v('. In connection string, click on the "click here" link.')]),t._v(" "),e("h3",{attrs:{id:"i-get-warning-the-lightning-alias-variable-is-not-set-defaulting-to-a-blank-string-when-starting-container"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#i-get-warning-the-lightning-alias-variable-is-not-set-defaulting-to-a-blank-string-when-starting-container"}},[t._v("#")]),t._v(' I get "WARNING: The LIGHTNING_ALIAS variable is not set. Defaulting to a blank string" when starting container')]),t._v(" "),e("p",[t._v("You can ignore this.\nIf you want to set an alias for your lightning node, open the env file:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("su")]),t._v(" -\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$BTCPAY_ENV_FILE")]),t._v("\n")])])]),e("p",[t._v("And add or modify the "),e("code",[t._v("LIGHTNING_ALIAS")]),t._v(" entry to "),e("code",[t._v("LIGHTNING_ALIAS=myawesomenode")]),t._v(".")]),t._v(" "),e("h3",{attrs:{id:"how-to-display-my-lightning-node-information-so-that-others-can-connect-to-me"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#how-to-display-my-lightning-node-information-so-that-others-can-connect-to-me"}},[t._v("#")]),t._v(" How to display my Lightning Node information so that others can connect to me?")]),t._v(" "),e("p",[t._v("The information other users need to connect to your node, is already displayed at the checkout. Sometimes, merchants want to display their node so that their customers can connect beforehand.")]),t._v(" "),e("p",[t._v('There are numerous ways to find your node information, but the easiest way to display it to others is by using Lightning Node info page. Go to Store > Settings > Lightning > Modify. At the bottom of the page, there is a "Open Public Node Page" button. Click on it to see the information. The page can be embedded into your website with '),e("code",[t._v("<iframe>")]),t._v(".")]),t._v(" "),e("figure",[e("img",{attrs:{src:n(480),alt:"BTCPay Checkout",title:"BTCPay Checkout"}})]),t._v(" "),e("h3",{attrs:{id:"where-can-i-find-recovery-seed-backup-for-my-lightning-network-wallet-in-btcpay-server"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#where-can-i-find-recovery-seed-backup-for-my-lightning-network-wallet-in-btcpay-server"}},[t._v("#")]),t._v(" Where can I find recovery seed backup for my Lightning Network wallet in BTCPay Server?")]),t._v(" "),e("p",[t._v("Originally BTCPay did use "),e("code",[t._v("noseedbackup")]),t._v(", so you couldn’t backup your LN wallet or get your recovery seed. This was because in Lightning Network there was no solution for backing up funds in channels, just in your on-chain wallet.\nBy now LND has functionality like static channel backup that depends on seed presence.\nBut once again, please understand that the Lightning Network is still in an experimental phase and do not put funds into it, which you're not "),e("a",{attrs:{href:"https://www.youtube.com/watch?v=5fMv8MpzLgQ",target:"_blank",rel:"noopener noreferrer"}},[t._v("willing to lose"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("h4",{attrs:{id:"using-lnd-with-seed-since-v103138"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#using-lnd-with-seed-since-v103138"}},[t._v("#")]),t._v(" Using LND with seed (since "),e("a",{attrs:{href:"https://github.com/btcpayserver/btcpayserver/releases/tag/v1.0.3.138",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("v1.0.3.138")]),e("OutboundLink")],1),t._v(")")]),t._v(" "),e("p",[t._v("You can find the LND Seed Service under:")]),t._v(" "),e("ul",[e("li",[t._v("Server Settings > Services > LND Seed Backup")])]),t._v(" "),e("figure",[e("img",{attrs:{src:n(481),alt:"LND Seed Backup service",title:"LND Seed Backup service"}})]),t._v(" "),e("p",[t._v("Safely backup and store your recovery seed. The seed is a backup of your on-chain Lightning wallet, but is also necessary to perform static channel backups.")]),t._v(" "),e("figure",[e("img",{attrs:{src:n(482),alt:"LND Seed Backup example",title:"LND Seed Backup example"}})]),t._v(" "),e("p",[t._v("If you backed it up safely you can remove it from the server.")]),t._v(" "),e("p",[t._v("If you migrate from an older version to "),e("code",[t._v("v1.0.3.138")]),t._v(" "),e("a",{attrs:{href:"https://blog.btcpayserver.org/btcpay-lnd-migration",target:"_blank",rel:"noopener noreferrer"}},[t._v("this blog post on how to do the migration"),e("OutboundLink")],1),t._v(" might be helpful.")]),t._v(" "),e("h3",{attrs:{id:"how-to-disable-on-chain-payments-and-use-ln-payments-only"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#how-to-disable-on-chain-payments-and-use-ln-payments-only"}},[t._v("#")]),t._v(" How to disable on-chain payments and use LN payments only?")]),t._v(" "),e("p",[t._v("There are two easy ways to do this:")]),t._v(" "),e("ol",[e("li",[t._v("Store > Settings > Checkout experience > Choose default payment method at checkout")]),t._v(" "),e("li",[t._v("Store > Settings > Modify > Uncheck the Enabled box to disable on-chain payments")])]),t._v(" "),e("h3",{attrs:{id:"how-to-see-my-lightning-network-version"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#how-to-see-my-lightning-network-version"}},[t._v("#")]),t._v(" How to see my Lightning Network version?")]),t._v(" "),e("p",[t._v("You can check your Lightning Network version from the command line.\nFor LND")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("su")]),t._v(" -\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" btcpayserver-docker\n./bitcoin-lncli.sh "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("help")]),t._v("\n")])])]),e("p",[t._v("For Core Lightning (CLN)")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("su")]),t._v(" -\n./bitcoin-lightning-cli.sh getinfo\n")])])]),e("p",[t._v("Most of the wallets (RTL, Zap, Zeus, etc.) that are able to your lightning node remotely will display the version on the front-end as well.")]),t._v(" "),e("h3",{attrs:{id:"how-to-redirect-a-lightning-address"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#how-to-redirect-a-lightning-address"}},[t._v("#")]),t._v(" How to redirect a Lightning Address?")]),t._v(" "),e("p",[t._v("Use case: Your run a BTCPay server at "),e("code",[t._v("pay.example.com")]),t._v(", but want to use "),e("code",[t._v("me@example.com")]),t._v(" as your Lightning Address, because it looks nicer than "),e("code",[t._v("me@pay.example.com")]),t._v(".")]),t._v(" "),e("p",[t._v("All you need to do is set up a "),e("code",[t._v("301")]),t._v(" redirect from "),e("code",[t._v("example.com/.well-known/lnurlp/me")]),t._v(" to "),e("code",[t._v("pay.example.com/.well-known/lnurlp/me")]),t._v(".\nYou can do so in your webserver configuration, here is an example for nginx:")]),t._v(" "),e("div",{staticClass:"language-nginx extra-class"},[e("pre",{pre:!0,attrs:{class:"language-nginx"}},[e("code",[e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("server")])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("server_name")]),t._v(" example.com")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Redirect Lightning Address requests to BTCPay Server")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("rewrite")]),t._v(" ^/\\.well-known/lnurlp/(.*)$ https://pay.example.com/.well-known/lnurlp/"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$1")]),t._v(" permanent")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h2",{attrs:{id:"lightning-network-lnd-faq"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#lightning-network-lnd-faq"}},[t._v("#")]),t._v(" Lightning Network LND FAQ")]),t._v(" "),e("p",[t._v("Here are some of the common questions about the "),e("a",{attrs:{href:"https://github.com/lightningnetwork/lnd/issues",target:"_blank",rel:"noopener noreferrer"}},[t._v("LND implementation"),e("OutboundLink")],1),t._v(" of the Lightning Network.")]),t._v(" "),e("h3",{attrs:{id:"how-to-restart-my-lnd"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#how-to-restart-my-lnd"}},[t._v("#")]),t._v(" How to restart my LND?")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("su")]),t._v(" -\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" restart btcpayserver_lnd_bitcoin\n")])])]),e("h3",{attrs:{id:"how-to-rescan-the-lnd-on-chain-wallet"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#how-to-rescan-the-lnd-on-chain-wallet"}},[t._v("#")]),t._v(" How to rescan the LND on-chain wallet?")]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),e("p",[t._v("only enable this fragment temporarily to reset the on-chain wallet transactions of lnd and to trigger a rescan\nafter a successful rescan, you should disable this fragment again, or it will rescan the on-chain wallet at\nevery restart!\nWARNING: The rescan can only pick up the transactions within your archived blocks (beware of PRUNED nodes!)")])]),t._v(" "),e("p",[t._v("To customize LND settings which are not available as environment variables, you can "),e("RouterLink",{attrs:{to:"/Docker/#how-can-i-customize-the-generated-docker-compose-file"}},[t._v("create a custom fragment")]),t._v(" in "),e("code",[t._v("docker-compose-generator/docker-fragments/opt-lnd-wallet-rescan.custom.yml")]),t._v(" like this:")],1),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('version: "3"\nservices:\n  lnd_bitcoin:\n    environment:\n      LND_EXTRA_ARGS: |\n        reset-wallet-transactions=1\n  lnd_litecoin:\n    environment:\n      LND_EXTRA_ARGS: |\n        reset-wallet-transactions=1\n  lnd_bitcoingold:\n    environment:\n      LND_EXTRA_ARGS: |\n        reset-wallet-transactions=1\n')])])]),e("p",[t._v("For more information on this LND feature, see "),e("a",{attrs:{href:"https://github.com/lightningnetwork/lnd/blob/master/docs/recovery.md#forced-in-place-rescan",target:"_blank",rel:"noopener noreferrer"}},[t._v("their documentation"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("h3",{attrs:{id:"how-to-see-lnd-logs"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#how-to-see-lnd-logs"}},[t._v("#")]),t._v(" How to see LND logs?")]),t._v(" "),e("p",[t._v("To check the logs of your LND node in BTCPay Server (Docker installations) use the following command:")]),t._v(" "),e("p",[e("code",[t._v("docker logs --tail 40 btcpayserver_lnd_bitcoin")])]),t._v(" "),e("p",[t._v("You can change 40 to whatever number you wish. The number represents the lines of code that will be shown. For more information about the logs, see "),e("RouterLink",{attrs:{to:"/Troubleshooting/"}},[t._v("Troubleshooting page")])],1),t._v(" "),e("h3",{attrs:{id:"what-s-the-default-directory-of-lnd-in-btcpay"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#what-s-the-default-directory-of-lnd-in-btcpay"}},[t._v("#")]),t._v(" What’s the default directory of LND in BTCPay?")]),t._v(" "),e("p",[e("code",[t._v("/var/lib/docker/volumes/generated_lnd_bitcoin_datadir/_data")])]),t._v(" "),e("h3",{attrs:{id:"which-macaroon-needs-to-be-provided-for-external-nodes"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#which-macaroon-needs-to-be-provided-for-external-nodes"}},[t._v("#")]),t._v(" Which macaroon needs to be provided for external nodes?")]),t._v(" "),e("p",[t._v("BTCPay Server needs the "),e("code",[t._v("admin.macaroon")]),t._v(" to check whether the lightning node is fully synced before creating an invoice.\nIf you want to tailor a macaroon specific to the BTCPay Server connection, use the LND macaroon bakery:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("lncli bakemacaroon address:read address:write info:read invoices:read invoices:write onchain:read\n")])])]),e("h3",{attrs:{id:"lnd-connection-issues-after-an-update"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#lnd-connection-issues-after-an-update"}},[t._v("#")]),t._v(" LND connection issues after an update")]),t._v(" "),e("p",[t._v("Authentication tends to fail on LND after an update, symptoms are:")]),t._v(" "),e("ul",[e("li",[t._v("In store settings, when testing the connection to your node you get "),e("code",[t._v("Error while connecting to the API (The HTTP status code of the response was not expected (500).)")])]),t._v(" "),e("li",[t._v("In Zap wallet, "),e("code",[t._v("Unable to connect to host: cannot retrieve macaroon: cannot get macaroon: root key with id 0 doesn’t exist")])])]),t._v(" "),e("p",[t._v("In such case, you need to delete the macaroon of lnd and restart it.")]),t._v(" "),e("p",[t._v("If you are using docker deployment, please connect with SSH to your VM and the following command:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("su")]),t._v(" -\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" btcpayserver_lnd_bitcoin "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" /data/admin.macaroon\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" btcpayserver_lnd_bitcoin "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" /data/invoice.macaroon\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" btcpayserver_lnd_bitcoin "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" /data/readonly.macaroon\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" btcpayserver_lnd_bitcoin "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" /data/data/macaroons.db\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" btcpayserver_lnd_bitcoin "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" /data/data/chain/bitcoin/mainnet/invoice.macaroon\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" btcpayserver_lnd_bitcoin "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" /data/data/chain/bitcoin/mainnet/macaroons.db\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" btcpayserver_lnd_bitcoin "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" /data/data/chain/bitcoin/mainnet/readonly.macaroon\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" restart btcpayserver_lnd_bitcoin\n")])])]),e("p",[t._v("If a macaroon does not exist, you will see an error message, you can safely ignore it.")]),t._v(" "),e("p",[t._v("Because this will invalidate the previous macaroons, you need to manually reconnect with Zap with "),e("code",[t._v("Server Settings / Services / LND-gRPC")]),t._v(".")]),t._v(" "),e("h3",{attrs:{id:"how-to-change-my-lnd-node-alias"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#how-to-change-my-lnd-node-alias"}},[t._v("#")]),t._v(" How to change my LND Node alias?")]),t._v(" "),e("p",[t._v("To change the display name of your LND node, you should ssh log in into your virtual machine and apply the following:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("su")]),t._v(" -\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" btcpayserver-docker\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("LIGHTNING_ALIAS")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"namehere"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" ./btcpay-setup.sh "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-i")]),t._v("\n")])])]),e("h3",{attrs:{id:"how-to-edit-lndconf"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#how-to-edit-lndconf"}},[t._v("#")]),t._v(" How to edit lnd.conf?")]),t._v(" "),e("p",[t._v("To customize "),e("a",{attrs:{href:"https://docs.lightning.engineering/lightning-network-tools/lnd/lnd.conf",target:"_blank",rel:"noopener noreferrer"}},[t._v("LND settings"),e("OutboundLink")],1),t._v(" which are not available as environment variables, you can "),e("RouterLink",{attrs:{to:"/Docker/#how-can-i-customize-the-generated-docker-compose-file"}},[t._v("create a custom fragment")]),t._v(" in "),e("code",[t._v("docker-compose-generator/docker-fragments/opt-lnd-config.custom.yml")]),t._v(" like this:")],1),t._v(" "),e("div",{staticClass:"language-yml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("version")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'3'")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("services")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("lnd_bitcoin")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environment")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("LND_EXTRA_ARGS")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),e("span",{pre:!0,attrs:{class:"token scalar string"}},[t._v("\n        minchansize=1234567")]),t._v("\n")])])]),e("p",[t._v("You can add your customizations in the "),e("code",[t._v("LND_EXTRA_ARGS")]),t._v(" value, like shown by setting the "),e("code",[t._v("minchansize")]),t._v(" value.")]),t._v(" "),e("p",[t._v("Afterwards the configuration has to be added to the additional fragments and setup needs to be run:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("BTCPAYGEN_ADDITIONAL_FRAGMENTS")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$BTCPAYGEN_ADDITIONAL_FRAGMENTS")]),t._v(';opt-lnd-config.custom"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" ./btcpay-setup.sh "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-i")]),t._v("\n")])])]),e("p",[t._v("This way your custom settings gets added to the config and they will persist updates.")]),t._v(" "),e("h3",{attrs:{id:"how-to-connect-to-a-lnd-watchtower"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#how-to-connect-to-a-lnd-watchtower"}},[t._v("#")]),t._v(" How to connect to a LND watchtower?")]),t._v(" "),e("p",[t._v("To connect a LND watchtower you need to integrate the "),e("a",{attrs:{href:"https://github.com/btcpayserver/btcpayserver-docker/blob/master/docker-compose-generator/docker-fragments/opt-lnd-wtclient.yml",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("opt-lnd-wtclient")]),e("OutboundLink")],1),t._v(" fragment and optionally configure the "),e("code",[t._v("LND_WTCLIENT_SWEEP_FEE")]),t._v(":")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("BTCPAYGEN_ADDITIONAL_FRAGMENTS")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$BTCPAYGEN_ADDITIONAL_FRAGMENTS")]),t._v(';opt-lnd-wtclient"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("LND_WTCLIENT_SWEEP_FEE")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Fee to be used for sweep transaction, 10 sat/vbyte is the default")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" ./btcpay-setup.sh "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-i")]),t._v("\n")])])]),e("p",[t._v("Afterwards you can use the "),e("code",[t._v("wtclient")]),t._v(" RPC commands for managing the connections to watchtowers:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Connect to a remote watchtower")]),t._v("\n./bitcoin-lncli.sh wtclient "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" PUBKEY@IP:PORT\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# See your watchtower connections")]),t._v("\n./bitcoin-lncli.sh wtclient towers\n")])])]),e("h3",{attrs:{id:"how-to-run-a-lnd-watchtower"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#how-to-run-a-lnd-watchtower"}},[t._v("#")]),t._v(" How to run a LND watchtower?")]),t._v(" "),e("p",[t._v("You can run a watchtower alongside your LND instance by integrating the "),e("a",{attrs:{href:"https://github.com/btcpayserver/btcpayserver-docker/blob/master/docker-compose-generator/docker-fragments/opt-lnd-watchtower.yml",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("opt-lnd-watchtower")]),e("OutboundLink")],1),t._v(" fragment:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("BTCPAYGEN_ADDITIONAL_FRAGMENTS")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$BTCPAYGEN_ADDITIONAL_FRAGMENTS")]),t._v(';opt-lnd-watchtower"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" ./btcpay-setup.sh "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-i")]),t._v("\n")])])]),e("p",[t._v("This will make the watchtower available on the server.")]),t._v(" "),e("p",[t._v("To allow connections from other watchtower clients (via the "),e("a",{attrs:{href:""}},[t._v("wtclient RPC commands")]),t._v("), you will need to add the "),e("code",[t._v("watchtower.externalip")]),t._v(" to a "),e("RouterLink",{attrs:{to:"/Docker/#how-can-i-customize-the-generated-docker-compose-file"}},[t._v("custom fragment")]),t._v(" in "),e("code",[t._v("docker-compose-generator/docker-fragments/opt-lnd-config.custom.yml")]),t._v(" like this:")],1),t._v(" "),e("div",{staticClass:"language-yml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("version")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'3'")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("services")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("lnd_bitcoin")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environment")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("LND_EXTRA_ARGS")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),e("span",{pre:!0,attrs:{class:"token scalar string"}},[t._v("\n        watchtower.externalip=YOUR_SERVER_IP")]),t._v("\n")])])]),e("p",[t._v("Afterwards the configuration has to be added to the additional fragments and open the port "),e("code",[t._v("9911")]),t._v(" in the firewall settings:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Add the custom LND fragment")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("BTCPAYGEN_ADDITIONAL_FRAGMENTS")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$BTCPAYGEN_ADDITIONAL_FRAGMENTS")]),t._v(';opt-lnd-config.custom"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" ./btcpay-setup.sh "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-i")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Open port the watchtower RPC port in the firewall")]),t._v("\nufw allow "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("9911")]),t._v("/tcp\n")])])]),e("p",[t._v("Running the "),e("code",[t._v("tower info")]),t._v(" command should then list your public watchtower instance in  the "),e("code",[t._v("uris")]),t._v(" section.")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ./bitcoin-lncli.sh tower info")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pubkey"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"YOUR_TOWER_PUBKEY"')]),t._v(",\n    "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"listeners"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"172.23.0.9:9911"')]),t._v(",\n        "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"127.0.0.1:9911"')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(",\n    "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"uris"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"YOUR_TOWER_PUBKEY@YOUR_SERVER_IP:9911"')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("Learn more about "),e("a",{attrs:{href:"https://docs.lightning.engineering/lightning-network-tools/lnd/watchtower",target:"_blank",rel:"noopener noreferrer"}},[t._v("configuring watchtowers"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("h3",{attrs:{id:"how-to-install-thunderhub"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#how-to-install-thunderhub"}},[t._v("#")]),t._v(" How to install ThunderHub?")]),t._v(" "),e("p",[t._v("To install ThunderHub on your instance apply the following:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("BTCPAYGEN_ADDITIONAL_FRAGMENTS")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$BTCPAYGEN_ADDITIONAL_FRAGMENTS")]),t._v(';opt-add-thunderhub"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" btcpay-setup.sh "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-i")]),t._v("\n")])])]),e("p",[t._v("If you get the following warning message "),e("strong",[t._v("Unable to connect to this node")]),t._v(" it is probably because the certificate used to communicate with LND doesn't have the correct domains. LND doesn't generate new ones unless the previous ones are deleted first.")]),t._v(" "),e("p",[t._v("To delete the old certificate and key and have LND generate new ones, apply the following:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" btcpayserver_lnd_bitcoin "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" /data/tls.cert\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" btcpayserver_lnd_bitcoin "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" /data/tls.key\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" restart btcpayserver_lnd_bitcoin\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" restart generated_bitcoin_thub_1\n")])])]),e("h2",{attrs:{id:"lightning-network-core-lightning-cln-faq"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#lightning-network-core-lightning-cln-faq"}},[t._v("#")]),t._v(" Lightning Network Core Lightning (CLN) FAQ")]),t._v(" "),e("p",[t._v("Here are some of the common questions about the "),e("a",{attrs:{href:"https://github.com/ElementsProject/lightning/issues",target:"_blank",rel:"noopener noreferrer"}},[t._v("Core Lightning (CLN)"),e("OutboundLink")],1),t._v(" implementation of the Lightning Network.")]),t._v(" "),e("h3",{attrs:{id:"how-to-restart-my-core-lightning-cln"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#how-to-restart-my-core-lightning-cln"}},[t._v("#")]),t._v(" How to restart my Core Lightning (CLN)?")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("su")]),t._v(" -\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" restart btcpayserver_clightning_bitcoin\n")])])]),e("h3",{attrs:{id:"how-to-announce-an-ipv6-address"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#how-to-announce-an-ipv6-address"}},[t._v("#")]),t._v(" How to announce an IPv6 address?")]),t._v(" "),e("p",[t._v("First, copy "),e("code",[t._v("bitcoin-clightning.yml")]),t._v(" into the the docker fragment folder as "),e("code",[t._v("bitcoin-clightning.custom.yml")]),t._v(".\nImportant: the file must end with "),e("code",[t._v(".custom.yml")]),t._v(", or there will be git conflicts whenever you run "),e("code",[t._v("btcpay-update.sh")]),t._v(".")]),t._v(" "),e("p",[t._v("Modify the new "),e("code",[t._v("bitcoin-clightning.custom.yml")]),t._v(" as the following:")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("services")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("clightning_bitcoin")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environment")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("LIGHTNINGD_OPT")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),e("span",{pre:!0,attrs:{class:"token scalar string"}},[t._v("\n        announce-addr=[ipv6 here]")]),t._v("\n")])])]),e("p",[t._v("Make sure to insert the address between the two square brackets [].")]),t._v(" "),e("p",[t._v("Then set it up:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("BTCPAYGEN_ADDITIONAL_FRAGMENTS")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bitcoin-clightning.custom"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" ./btcpay-setup.sh "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-i")]),t._v("\n")])])]),e("h3",{attrs:{id:"how-to-edit-lightningconfig"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#how-to-edit-lightningconfig"}},[t._v("#")]),t._v(" How to edit .lightning/config?")]),t._v(" "),e("p",[t._v("To customize the "),e("a",{attrs:{href:"https://docs.corelightning.org/reference/lightningd-config",target:"_blank",rel:"noopener noreferrer"}},[t._v("Core Lightning settings"),e("OutboundLink")],1),t._v(" which are not available as environment variables, you can "),e("RouterLink",{attrs:{to:"/Docker/#how-can-i-customize-the-generated-docker-compose-file"}},[t._v("create a custom fragment")]),t._v(" in "),e("code",[t._v("docker-compose-generator/docker-fragments/opt-lightningd-config.custom.yml")]),t._v(" like this:")],1),t._v(" "),e("div",{staticClass:"language-yml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("version")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'3'")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("services")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("clightning_bitcoin")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environment")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("LIGHTNINGD_OPT")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),e("span",{pre:!0,attrs:{class:"token scalar string"}},[t._v("\n        alias=MyNodeName\n        rgb=003366")]),t._v("\n")])])]),e("p",[t._v("You can add your customizations in the "),e("code",[t._v("LIGHTNINGD_OPT")]),t._v(" value, like shown by setting the "),e("code",[t._v("alias")]),t._v(" and "),e("code",[t._v("rgb")]),t._v(" values.")]),t._v(" "),e("p",[t._v("Afterwards the configuration has to be added to the additional fragments and setup needs to be run:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("BTCPAYGEN_ADDITIONAL_FRAGMENTS")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$BTCPAYGEN_ADDITIONAL_FRAGMENTS")]),t._v(';opt-lightningd-config.custom"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" ./btcpay-setup.sh "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-i")]),t._v("\n")])])]),e("p",[t._v("This way your custom settings gets added to the config and they will persist updates.")]),t._v(" "),e("h2",{attrs:{id:"lightning-network-questions-and-support"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#lightning-network-questions-and-support"}},[t._v("#")]),t._v(" Lightning Network Questions and Support")]),t._v(" "),e("p",[t._v("Community support for Lightning Network questions is pretty limited, since the protocol is fairly new.")]),t._v(" "),e("p",[t._v("If you're facing a technical problem with your Lightning Network implementation, that's not documented here you may want to ask questions in their respective communities.")]),t._v(" "),e("h4",{attrs:{id:"lnd-support"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#lnd-support"}},[t._v("#")]),t._v(" LND Support")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/lightningnetwork/lnd/issues",target:"_blank",rel:"noopener noreferrer"}},[t._v("LND GitHub"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://lightningcommunity.slack.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("Lightning Community on Slack"),e("OutboundLink")],1)])]),t._v(" "),e("h4",{attrs:{id:"core-lightning-cln-support"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#core-lightning-cln-support"}},[t._v("#")]),t._v(" Core Lightning (CLN) Support")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/ElementsProject/lightning/issues",target:"_blank",rel:"noopener noreferrer"}},[t._v("CLN GitHub"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://t.me/lightningd",target:"_blank",rel:"noopener noreferrer"}},[t._v("CLN Telegram Group"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://lightning.readthedocs.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("CLN docs"),e("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=s.exports}}]);