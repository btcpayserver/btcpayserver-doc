(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1004:function(t,e,a){"use strict";a.r(e);var o=a(17),s=Object(o.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"accept-bitcoin-in-shopify-with-btcpay-server"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#accept-bitcoin-in-shopify-with-btcpay-server"}},[t._v("#")]),t._v(" Accept Bitcoin in Shopify with BTCPay Server")]),t._v(" "),e("p",[t._v("Introducing BTCPay Server for Shopify – open-source payment gateway that enables you accept bitcoin payments directly on your website or stores from customers with no fee.")]),t._v(" "),e("p",[t._v("Our integration with Shopify allows you to connect your self-hosted BTCPay Server with your "),e("a",{attrs:{href:"https://www.shopify.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Shopify store"),e("OutboundLink")],1),t._v(", enabling you accept Bitcoin payments swiftly and securely.")]),t._v(" "),e("h2",{attrs:{id:"what-btcpay-offers"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#what-btcpay-offers"}},[t._v("#")]),t._v(" What BTCPay offers:")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("Zero fees")]),t._v(": Enjoy a payment gateway with no fees. Yes, You saw that right. Zero fees!")]),t._v(" "),e("li",[e("strong",[t._v("Direct payment, No middlemen or KYC")]),t._v(": Say goodbye to intermediaries and tedious paperwork, and get your money directly in your wallet")]),t._v(" "),e("li",[e("strong",[t._v("Fully automated system")]),t._v(": BTCPay takes care of payments, invoice management and refunds automatically.")]),t._v(" "),e("li",[e("strong",[t._v("Display Bitcoin QR code at checkout")]),t._v(": Enhance customer experience with an easy and secure payment option.")]),t._v(" "),e("li",[e("strong",[t._v("Self-hosted infrastructure")]),t._v(": Maintain full control over your payment gateway.")]),t._v(" "),e("li",[e("strong",[t._v("Lightning Network integrated")]),t._v(": Instant, fast and low cost payments and payouts")]),t._v(" "),e("li",[e("strong",[t._v("Easy CSV exports")])]),t._v(" "),e("li",[e("strong",[t._v("Versatile plugin system")]),t._v(": Extend functionality according to your needs")]),t._v(" "),e("li",[e("strong",[t._v("Point-of-sale integration")]),t._v(" – Accept payments in your physical shops")]),t._v(" "),e("li",[e("strong",[t._v("Multilingual ready")]),t._v(": Serve a global audience right out of the box.")]),t._v(" "),e("li",[e("strong",[t._v("Community-driven support")]),t._v(": Get responsive assistance from our dedicated community ("),e("a",{attrs:{href:"http://chat.btcpayserver.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mattermost"),e("OutboundLink")],1),t._v(" or "),e("a",{attrs:{href:"https://t.me/btcpayserver",target:"_blank",rel:"noopener noreferrer"}},[t._v("Telegram"),e("OutboundLink")],1),t._v(").")])]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),e("p",[t._v("This is more simplified version of the previous Shopify V2 documentation (available from 30th December 2024 until 23rd February 2025) that required you to deploy the shopify app on a separate VPS. Now the app is deployed directly on your BTCPay Server and the BTCPay Shopify plugin has been changed. Everybody should switch to this setup as it is the only one we will maintain in the future.")])]),t._v(" "),e("h2",{attrs:{id:"prerequisites"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites"}},[t._v("#")]),t._v(" Prerequisites:")]),t._v(" "),e("p",[t._v("Before diving into the setup process, ensure you have the following:")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://www.shopify.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Shopify"),e("OutboundLink")],1),t._v(" account and store setup")]),t._v(" "),e("li",[t._v("An active Shopify subscription plan (at least Basic Shopify plan)")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://www.shopify.com/partners",target:"_blank",rel:"noopener noreferrer"}},[t._v("A Shopify partner account"),e("OutboundLink")],1),t._v(" (it's free to register)")]),t._v(" "),e("li",[t._v("BTCPay Server - "),e("RouterLink",{attrs:{to:"/Deployment/"}},[t._v("self-hosted")]),t._v(" or run by a "),e("RouterLink",{attrs:{to:"/Deployment/ThirdPartyHosting/"}},[t._v("third-party host")]),t._v(" * v2.0.6 or later.")],1),t._v(" "),e("li",[e("RouterLink",{attrs:{to:"/CreateStore/"}},[t._v("Created BTCPay Server store")]),t._v(" with "),e("RouterLink",{attrs:{to:"/WalletSetup/"}},[t._v("wallet set up")])],1)]),t._v(" "),e("ul",[e("li",[t._v("Please note that if you are on a 3rd-party host, they need to have activated the shopify fragment and enabled the Shopify v2 plugin for you. Otherwise it won't be available in your BTCPay Server.")])]),t._v(" "),e("h2",{attrs:{id:"set-up-a-shopify-app"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#set-up-a-shopify-app"}},[t._v("#")]),t._v(" Set up a Shopify app")]),t._v(" "),e("p",[t._v("First we will create a new app in the Shopify partner portal. Make sure you are registered as a "),e("a",{attrs:{href:"https://www.shopify.com/partners",target:"_blank",rel:"noopener noreferrer"}},[t._v("Shopify partner"),e("OutboundLink")],1),t._v(" (it's free to register).")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("On Shopify Partner "),e("a",{attrs:{href:"https://partners.shopify.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("dashboard"),e("OutboundLink")],1),t._v(", click on "),e("code",[t._v("App distribution")]),t._v(", on the next page click on "),e("code",[t._v("View Dev Dashboard")]),t._v(" which will open a page in a new browser tab. In this page, click "),e("code",[t._v("Create app")]),t._v(" > "),e("code",[t._v("Start from Dev Dashboard")]),t._v(", enter the name you want to call the app (e.g. BTCPay Server) and click "),e("code",[t._v("Create")]),t._v(".")]),t._v(" "),e("figure",[e("img",{attrs:{src:a(698),alt:"Shopify-App: Create app manually",title:"Shopify-App: Create app manually"}})])]),t._v(" "),e("li",[e("p",[t._v("Once created, click on "),e("code",[t._v("Settings")]),t._v(', there your "Client ID" and "Client secret" is displayed, which we need in a minute. Please note them down or come back to this page later.\n'),e("img",{attrs:{src:a(699),alt:"Shopify-App: client id and secret",title:"Shopify-App: client id and secret"}})])]),t._v(" "),e("li",[e("p",[t._v("Go back to your partner's dashboard, reload the page so the app list now includes the newly created app. Once done, click "),e("code",[t._v("All Apps")]),t._v(",  click your just created app, select "),e("code",[t._v("API access requests")]),t._v(" on the left menu, scroll down to "),e("code",[t._v("Allow network access in checkout and account UI extensions")]),t._v(" and grant network access. You should see the following screen once network access is granted\n"),e("img",{attrs:{src:a(700),alt:"Shopify-App: Partner app network access",title:"Shopify-App: Partner app network access"}})])])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("In case you encounter an error: \"Could not grant checkout ui extension scope 'read_checkout_external_data'\" while granting network access, this error occurs when you have not setup your first and last name in partner's account profile. To resolve this, update your profile with the required information, then attempt to grant network access again.")])]),t._v(" "),e("ol",{attrs:{start:"4"}},[e("li",[t._v("Click on the shopify partner logo on the to return to partners dashboard")]),t._v(" "),e("li",[t._v('At the bottom of the page, click on "Settings"'),e("br"),t._v(" "),e("img",{attrs:{src:a(343),alt:"partners_settings.png",title:"partners_settings.png"}})]),t._v(" "),e("li",[t._v('Scroll down to the bottom section of "CLI Token" and click on "Manage tokens"\n'),e("img",{attrs:{src:a(344),alt:"partners_settings-cli-token.png",title:"partners_settings-cli-token.png"}})]),t._v(" "),e("li",[t._v('On top right click on "Generate new token"\n'),e("img",{attrs:{src:a(345),alt:"partners_create-cli-token.png",title:"partners_create-cli-token.png"}})]),t._v(" "),e("li",[t._v('In the modal popup keep the default and click on "Generate token"\n'),e("img",{attrs:{src:a(346),alt:"partners_create-cli-token-duration.png",title:"partners_create-cli-token-duration.png"}})]),t._v(" "),e("li",[t._v("Copy the token and note it next to client ID and client secret from above. This token is only shown once.\n"),e("img",{attrs:{src:a(347),alt:"partners_cli-token-created.png",title:"partners_cli-token-created.png"}})])]),t._v(" "),e("h2",{attrs:{id:"deploy-the-shopify-btcpay-app-on-your-btcpay-server"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#deploy-the-shopify-btcpay-app-on-your-btcpay-server"}},[t._v("#")]),t._v(" Deploy the Shopify-BTCPay-app on your BTCPay Server")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("For the instructions below to work you need to be the admin of your own BTCPay Server instance. If you are on a 3rd-party host then their admin needs to have activated the shopify fragment and enabled the Shopify v2 plugin for you, otherwise it won't be available to you.")])]),t._v(" "),e("h3",{attrs:{id:"deploy-the-shopify-fragment"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#deploy-the-shopify-fragment"}},[t._v("#")]),t._v(" Deploy the Shopify fragment")]),t._v(" "),e("ol",[e("li",[t._v("Log into your BTCPay Server via SSH")]),t._v(" "),e("li",[t._v("Run the following commands:")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# if you are not root user, switch to root")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("su")]),t._v(" -\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# go to the BTCPay Server docker directory")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$BTCPAY_BASE_DIRECTORY")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" btcpayserver-docker\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# make sure you have latest btcpayserver-docker commits")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" pull\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# add the shopify fragment to your BTCPay Server")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("BTCPAYGEN_ADDITIONAL_FRAGMENTS")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$BTCPAYGEN_ADDITIONAL_FRAGMENTS")]),t._v(';opt-add-shopify"')]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# run the setup script")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" ./btcpay-setup.sh "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-i")]),t._v("\n")])])]),e("p",[t._v("The setup script fetches the "),e("a",{attrs:{href:"https://github.com/btcpayserver/shopify-app",target:"_blank",rel:"noopener noreferrer"}},[t._v("BTCPay Shopify app"),e("OutboundLink")],1),t._v(" and deploys it to a docker container. If you want to be sure it worked you can check with:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("ps")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" shopify\n")])])]),e("p",[t._v("We can now proceed with installing the BTCPay Server Shopify plugin.")]),t._v(" "),e("h3",{attrs:{id:"install-btcpay-server-shopify-plugin-v2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#install-btcpay-server-shopify-plugin-v2"}},[t._v("#")]),t._v(" Install BTCPay Server Shopify plugin v2")]),t._v(" "),e("ol",[e("li",[t._v('On your BTCPay Server, click on "Manage Plugins" in the sidebar, find and install the "BTCPay Server Shopify plugin v2" by btcpayserver.\n'),e("img",{attrs:{src:a(701),alt:"plugin_install.png",title:"plugin_install.png"}})]),t._v(" "),e("li",[t._v('After that, scroll to the top and click on the "Restart now" link to restart BTCPay.\n'),e("img",{attrs:{src:a(702),alt:"plugin_install-restart.png",title:"plugin_install-restart.png"}})])]),t._v(" "),e("p",[t._v("BTCPay Server will restart which can take a few minutes.")]),t._v(" "),e("h3",{attrs:{id:"configure-btcpay-server-shopify-plugin"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#configure-btcpay-server-shopify-plugin"}},[t._v("#")]),t._v(" Configure BTCPay Server Shopify plugin")]),t._v(" "),e("ol",[e("li",[t._v("Make sure your store is selected at the top, then on the left sidebar click on "),e("code",[t._v("Shopify v2")])]),t._v(" "),e("li",[t._v("In the first of 3 sections you will need to enter the "),e("code",[t._v("Client ID")]),t._v(", "),e("code",[t._v("Client Secret")]),t._v(" from "),e("a",{attrs:{href:"#set-up-a-shopify-app"}},[t._v("Shopify app setup")]),t._v(' above. Click on "Save"\n'),e("img",{attrs:{src:a(703),alt:"plugin_section-1.png",title:"plugin_section-1.png"}})]),t._v(" "),e("li",[t._v('In the next section "Deploy the app" you need to enter the '),e("code",[t._v("App name")]),t._v(", best to use the same as on "),e("a",{attrs:{href:"#setup-a-shopify-app"}},[t._v("Shopify app setup")]),t._v(". In the field "),e("code",[t._v("CLI token")]),t._v(' enter the also previously noted "CLI Token" from the app setup.\n'),e("img",{attrs:{src:a(704),alt:"plugin_section-2.png",title:"plugin_section-2.png"}})]),t._v(" "),e("li",[t._v('Click on "Deploy App"\nYou will now see some console output and that the app will be deployed to shopify. If everything goes well the section will close and the last section will open.\n'),e("img",{attrs:{src:a(705),alt:"plugin_section-2--console-output.png",title:"plugin_section-2--console-output.png"}})]),t._v(" "),e("li",[t._v('In the last section "Install the app on your Shopify store" there is nothing to do, it will just check if the app is installed on the store. We will do that in the next steps below.\n'),e("img",{attrs:{src:a(706),alt:"plugin_section-3.png",title:"plugin_section-3.png"}})])]),t._v(" "),e("h2",{attrs:{id:"install-btcpay-shopify-app-on-your-shopify-store"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#install-btcpay-shopify-app-on-your-shopify-store"}},[t._v("#")]),t._v(" Install BTCPay-Shopify app on your Shopify store")]),t._v(" "),e("p",[t._v("Now it's time to install your Shopify app to the Shopify store (which will link your store to your BTCPay Server).")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("On your "),e("a",{attrs:{href:"https://partners.shopify.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("partner account"),e("OutboundLink")],1),t._v(" app overview, select the app you just created, click on "),e("code",[t._v("Choose Distribution")]),t._v(" and select "),e("code",[t._v("Custom distribution")]),t._v(". Confirm the selection.")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("Please note that selecting custom distribution means that you can only use the app one Shopify store. This is irreversible. You can deploy multiple apps though if you have more than one store.")])]),t._v(" "),e("p",[e("img",{attrs:{src:a(707),alt:"App install: select custom distribution",title:"App install: select custom distribution"}}),t._v(" "),e("img",{attrs:{src:a(708),alt:"App install: confirm custom distribution",title:"App install: confirm custom distribution"}})])]),t._v(" "),e("li",[e("p",[t._v("On the next screen enter the Shopify store URL that you want to link the application to. This is typically the internal store url you see on configuring the store, e.g. "),e("code",[t._v("your-store.myshopify.com")]),t._v("."),e("br"),t._v(" "),e("img",{attrs:{src:a(709),alt:"app-deploy_copy-store-url.png",title:"app-deploy_copy-store-url.png"}}),t._v('\nMake sure to uncheck "Allow multi-store install for one Plus organization"'),e("br"),t._v(" "),e("img",{attrs:{src:a(710),alt:"App install: enter your store url",title:"App install: enter your store url"}})])]),t._v(" "),e("li",[e("p",[t._v("Click on "),e("code",[t._v("Generate link")]),t._v(" and you will see a link generated. Copy that link and put it into your browser to start the installation.\n"),e("img",{attrs:{src:a(711),alt:"App install: link generated",title:"App install: link generated"}})])]),t._v(" "),e("li",[e("p",[t._v("You will see your app listed and you can now install it by clicking on "),e("code",[t._v("Install")]),t._v(". (If you are not logged in you need to log in first)\n"),e("img",{attrs:{src:a(712),alt:"app-deploy_distribution-install-to-store-confirm.png",title:"app-deploy_distribution-install-to-store-confirm.png"}})])])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("Even though the app lists access to customer and store owner data it does not access any of that data. The app only uses the checkout ID and order ID to update the order status. At no time any personal customer or admin data is transmitted to your BTCPay Server.")])]),t._v(" "),e("ol",{attrs:{start:"5"}},[e("li",[t._v('Once installed, you will see the app page with the message "Shopify plugin successfully configured"\n'),e("img",{attrs:{src:a(713),alt:"app-deploy_install-successful.png",title:"app-deploy_install-successful.png"}})]),t._v(" "),e("li",[t._v('(Optional) You can click on the link at the bottom line "You can navigate to your plugin\'s settings page by clicking here." to double-check that the app is properly connected to your BTCPay Server. (The last section has now also a green checkmark)\n'),e("img",{attrs:{src:a(714),alt:"app-deploy_plugin-all-green.png",title:"app-deploy_plugin-all-green.png"}})])]),t._v(" "),e("h2",{attrs:{id:"customize-the-thank-you-page"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#customize-the-thank-you-page"}},[t._v("#")]),t._v(' Customize the "Thank you" page')]),t._v(" "),e("ol",[e("li",[t._v("On your shopify dashboard, click on "),e("code",[t._v("Settings")]),t._v(", which is located on the bottom of the left nav panel, select "),e("code",[t._v("Checkout")]),t._v(" and then "),e("code",[t._v("Customize")]),t._v("."),e("br"),t._v(" "),e("img",{attrs:{src:a(715),alt:"Store steup: settings",title:"Store steup: settings"}}),t._v(" "),e("img",{attrs:{src:a(716),alt:"Store setup: settings customize checkout",title:"Store setup: settings customize checkout"}})]),t._v(" "),e("li",[t._v('In the editor change the selected page to the "Thank you" page.'),e("br"),t._v(" "),e("img",{attrs:{src:a(717),alt:"Store setup: switch to thank you page",title:"Store setup: switch to thank you page"}}),e("br"),t._v(" "),e("img",{attrs:{src:a(718),alt:"Store setup: thank you page",title:"Store setup: thank you page"}})]),t._v(" "),e("li",[t._v("Click on the "),e("code",[t._v("Apps")]),t._v(" icon on the left panel\n"),e("img",{attrs:{src:a(719),alt:"App Setup: Step 9",title:"App Setup: Step 9"}})]),t._v(" "),e("li",[t._v('Click on the (+) sign on the listed "BTCPay Checkout" app and then on the "Thank you" page listed.\n'),e("img",{attrs:{src:a(720),alt:"App Setup: Step 10",title:"App Setup: Step 10"}})]),t._v(" "),e("li",[t._v('You will now see the extension got added to your "Thank you" page. '),e("strong",[t._v("Important")]),t._v(': Click "Save" in the top right corner.\n'),e("img",{attrs:{src:a(721),alt:"App Setup: Step 11",title:"App Setup: Step 11"}})]),t._v(" "),e("li",[t._v("To double-check all is working, click on the left arrow "),e("code",[t._v("<")]),t._v(' next to "BTCPay Checkout" and verify it is listed in the "Order details section".\n'),e("img",{attrs:{src:a(722),alt:"App Setup: Step 12.1",title:"App Setup: Step 12.1"}}),t._v(" "),e("img",{attrs:{src:a(723),alt:"App Setup: Step 12.2",title:"App Setup: Step 12.2"}})])]),t._v(" "),e("h2",{attrs:{id:"set-up-a-custom-payment-method-in-shopify"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#set-up-a-custom-payment-method-in-shopify"}},[t._v("#")]),t._v(" Set up a custom payment method in Shopify")]),t._v(" "),e("p",[t._v("One last step is to set up a custom payment method in Shopify to display the Bitcoin payment option to your customers.")]),t._v(" "),e("ol",[e("li",[t._v("Go back to your dashboard, click on "),e("code",[t._v("Settings")]),t._v(" >> "),e("code",[t._v("Payments")]),t._v(' on the left sidebar, scroll down to "Manual payment methods", click on '),e("code",[t._v("(+) Manual payment method")]),t._v(" and select "),e("code",[t._v("Create custom payment method")]),t._v(" on the dropdown.\n"),e("img",{attrs:{src:a(724),alt:"Create payment method step 1",title:"Create payment method step 1"}})]),t._v(" "),e("li",[t._v("In "),e("code",[t._v("Custom payment method name")]),t._v(" fill in something like "),e("code",[t._v("Pay with Bitcoin (BTCPay Server)")]),t._v(' (also see TIP box below), optionally you can fill in other fields, but it\'s not required.\nHowever, you would need to inform your customers that payment with Bitcoin comes on the next screen after checkout on the "Thank you" page. Ideally you would inform your customers in the '),e("code",[t._v("Additional details")]),t._v(' field.\nThe payment option can have a slight delay before it shows on the "Thank you" page, we suggest to communicate that to the customers. Suggested text: '),e("code",[t._v('Please note that the Bitcoin payment button "Complete payment" will be displayed on the "Thank you"-page. Please click on it to complete the payment.')]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v('"Custom Payment method name" '),e("strong",[t._v("must")]),t._v(" contain at least one of the following words (case-insensitive): "),e("code",[t._v("bitcoin")]),t._v(", "),e("code",[t._v("btcpayserver")]),t._v(", "),e("code",[t._v("btcpay server")]),t._v(" or "),e("code",[t._v("btc")]),t._v(" to work.")])])]),t._v(" "),e("li",[t._v("Hit "),e("code",[t._v("Activate")]),t._v(" and you've set up Shopify and BTCPay Server payment method successfully.\n"),e("img",{attrs:{src:a(725),alt:"Create payment method step 2 and 3",title:"Create payment method step 2 and 3"}})])]),t._v(" "),e("p",[t._v("Congratulations! You have successfully installed the BTCPay-Shopify app and set up the payment method on your Shopify store. You are ready to go. See the demo checkout flow below.")]),t._v(" "),e("h2",{attrs:{id:"demo-checkout-flow-after-everything-is-set-up"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#demo-checkout-flow-after-everything-is-set-up"}},[t._v("#")]),t._v(" Demo Checkout flow after everything is set up")]),t._v(" "),e("p",[t._v("Customer select the payment option on the checkout page:\n"),e("img",{attrs:{src:a(726),alt:"Shopify checkout show payment option",title:"Shopify checkout show payment option"}})]),t._v(" "),e("p",[t._v('Customer gets redirected to the "Thank you"-page where the payment button is shown:\n'),e("img",{attrs:{src:a(727),alt:"Shopify Thank you page with pay button",title:"Shopify Thank you page with pay button"}})]),t._v(" "),e("p",[t._v('Customer clicks on "Complete payment" and gets redirected to BTCPay payment page:\n'),e("img",{attrs:{src:a(728),alt:"Customer click on complete payment",title:"Customer click on complete payment"}})]),t._v(" "),e("p",[t._v("Customer pays the invoice and clicks on return to merchant:\n"),e("img",{attrs:{src:a(729),alt:"Customer paid invoice",title:"Customer paid invoice"}})]),t._v(" "),e("p",[t._v("Customer gets redirected to Shopify order status page:\n"),e("img",{attrs:{src:a(730),alt:"Order status page after payment",title:"Order status page after payment"}})]),t._v(" "),e("hr"),t._v(" "),e("p",[t._v("In your BTCPay Server store you can see the paid invoice:\n"),e("img",{attrs:{src:a(731),alt:"BTCPay Server shopify step 37",title:"BTCPay Server shopify step 37"}})]),t._v(" "),e("p",[t._v("When you click on it you can see the payment details:\n"),e("img",{attrs:{src:a(732),alt:"BTCPay Server shopify step 38",title:"BTCPay Server shopify step 38"}})]),t._v(" "),e("h2",{attrs:{id:"faq"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#faq"}},[t._v("#")]),t._v(" FAQ")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("Can I use Shopify V1 and Shopify V2 together? No, Shopify V1 and Shopify V2 should not be used together. Using both versions simultaneously can lead to unexpected behavior, such as duplicate order record on Shopify. We recommend that you disable Shopify V1 and stick to only Shopify V2")])]),t._v(" "),e("li",[e("p",[t._v("What happens when an invoice is Invalid? The sum of confirmed payments up to the expiration is reflected on Shopify")])]),t._v(" "),e("li",[e("p",[t._v("What if I mark an invoice as invalid in my BTCPay Server? BTCPay does nothing, so the Shopify order stays pending.")])]),t._v(" "),e("li",[e("p",[t._v("What happens when an invoice is settled manually on BTCPay Server? The Shopify order is marked as fully paid in Shopify.")])]),t._v(" "),e("li",[e("p",[t._v("What happens if the customer didn't pay? When the BTCPay invoice expires, the Shopify order is voided, and stock is returned.")])]),t._v(" "),e("li",[e("p",[t._v("What happens if the customer did pay, but with insufficient fees for confirmation in a reasonable time? The BTCPay invoice becomes Invalid, and the Shopify order remains Payment Pending.")])]),t._v(" "),e("li",[e("p",[t._v("What if the customer paid partially? The BTCPay invoice expires. The Shopify order stays Payment Pending or is marked Partially Paid based on confirmed payments at expiration.")])]),t._v(" "),e("li",[e("p",[t._v("How to avoid partial payments? Partial payments often happen when customers pay from exchanges that deduct fees. You can set a small "),e("RouterLink",{attrs:{to:"/FAQ/Stores/#consider-the-invoice-paid-even-if-the-paid-amount-is-less-than-expected"}},[t._v("underpayment tolerance")]),t._v(" in your store's settings to avoid this.")],1)]),t._v(" "),e("li",[e("p",[t._v("How can I reshare an invoice link if the customer didn’t complete the payment? BTCPay Server stores the invoice link in Shopify order metafields when BTCPay is the selected payment method.")])])]),t._v(" "),e("p",[t._v("Retrieve metafields using Shopify’s API:")]),t._v(" "),e("div",{staticClass:"language-pwsh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("https://{SHOPNAME}.myshopify.com/admin/api/{VERSION}/orders/{ORDER-ID}/metafields.json\n")])])]),e("p",[t._v("More details:")]),t._v(" "),e("ol",[e("li",[e("a",{attrs:{href:"https://shopify.dev/docs/api/admin-graphql/latest/objects/Order#fields-metafields",target:"_blank",rel:"noopener noreferrer"}},[t._v("Shopify GraphQL API - Order Metafields"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://shopify.dev/docs/api/admin-rest/2025-01/resources/metafield#get-orders-order-id-metafields",target:"_blank",rel:"noopener noreferrer"}},[t._v("Shopify REST API - Order Metafields"),e("OutboundLink")],1),t._v(".")])]),t._v(" "),e("h2",{attrs:{id:"troubleshooting"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#troubleshooting"}},[t._v("#")]),t._v(" Troubleshooting")]),t._v(" "),e("h3",{attrs:{id:"plugin-installation-fails"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#plugin-installation-fails"}},[t._v("#")]),t._v(" Plugin Installation fails?")]),t._v(" "),e("p",[t._v('You tried to install the plugin on BTCPay Server and you get the error "This app has been migrated to the new Next-Gen Dev platform"? If you are the server admin of the BTCPay instance, all you need to do is to update your BTCPay Server following the '),e("code",[t._v("Deploy the Shopify fragment")]),t._v(" guide discussed earlier. If you aren't the server admin, please reach out to the admin and request that they upgrade their shopify fragment. Once this is done, you should now be able to sucessfully link your BTCPay Server and Shopify following the installation guide.")]),t._v(" "),e("figure",[e("img",{attrs:{src:a(733),alt:"Shopify Migration - Plugin Install fails",title:"Shopify Migration - Plugin Install fails"}})]),t._v(" "),e("h3",{attrs:{id:"the-update-of-the-app-fails-with-an-error"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#the-update-of-the-app-fails-with-an-error"}},[t._v("#")]),t._v(" The update of the app fails with an error?")]),t._v(" "),e("p",[t._v("If you installed your app before 15th September 2025 and get the error \"Your app has extensions which need to be assigned 'uid' identifiers\" when you try to update the app via redeployment - you need to uninstall and the app due to a major "),e("a",{attrs:{href:"https://shopify.dev/docs/apps/build/dev-dashboard/migrate-from-partners",target:"_blank",rel:"noopener noreferrer"}},[t._v("Shopify app update"),e("OutboundLink")],1),t._v(" and install a new one following the steps below:")]),t._v(" "),e("ul",[e("li",[t._v("Uninstall the app from your shopify store")]),t._v(" "),e("li",[t._v("Delete the app in Shopify partners (optional)")]),t._v(" "),e("li",[t._v("Head back to your Shopify plugin page on BTCPay Server and click the "),e("code",[t._v("Reset")]),t._v(" button")]),t._v(" "),e("li",[t._v("Ensure you are using the latest shopify fragment (>= 1.5) by running ./btcpay-update.sh from your btcpayserver-docker directory")]),t._v(" "),e("li",[t._v("Follow the installation instructions and start afresh")])]),t._v(" "),e("figure",[e("img",{attrs:{src:a(734),alt:"Shopify Migration - Old user error",title:"Shopify Migration - Old user error"}})]),t._v(" "),e("h3",{attrs:{id:"how-to-update-btcpay-shopify-app"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#how-to-update-btcpay-shopify-app"}},[t._v("#")]),t._v(" How to update BTCPay Shopify app?")]),t._v(" "),e("p",[t._v("When you see or hear that the "),e("a",{attrs:{href:"https://github.com/btcpayserver/shopify-app",target:"_blank",rel:"noopener noreferrer"}},[t._v("BTCPay Shopify app"),e("OutboundLink")],1),t._v(" has been updated, you can push the new version to your store by following these steps:")]),t._v(" "),e("p",[t._v("First we need to get a new CLI token (in case you don't have it anymore, or it expired) from the "),e("a",{attrs:{href:"https://partners.shopify.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("Shopify partner portal"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("h4",{attrs:{id:"get-a-new-cli-token"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#get-a-new-cli-token"}},[t._v("#")]),t._v(" Get a new CLI token")]),t._v(" "),e("ol",[e("li",[t._v("Log into the Shopify Partner Portal")]),t._v(" "),e("li",[t._v('At the bottom of the page, click on "Settings"'),e("br"),t._v(" "),e("img",{attrs:{src:a(343),alt:"Partner dashboard Settings",title:"Partner dashboard Settings"}})]),t._v(" "),e("li",[t._v('Scroll down to the bottom section of "CLI Token" and click on "Manage tokens"\n'),e("img",{attrs:{src:a(344),alt:"Settings CLI Token",title:"Settings CLI Token"}})]),t._v(" "),e("li",[t._v('On top right click on "Generate new token"\n'),e("img",{attrs:{src:a(345),alt:"Create CLI Token",title:"Create CLI Token"}})]),t._v(" "),e("li",[t._v('In the modal popup keep the default and click on "Generate token"\n'),e("img",{attrs:{src:a(346),alt:"Select CLI Token validity duration",title:"Select CLI Token validity duration"}})]),t._v(" "),e("li",[t._v("Copy the CLI token. This token is only shown once.\n"),e("img",{attrs:{src:a(347),alt:"CLI Token was created successfully",title:"CLI Token was created successfully"}})])]),t._v(" "),e("h4",{attrs:{id:"ssh-into-your-btcpay-server"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ssh-into-your-btcpay-server"}},[t._v("#")]),t._v(" SSH into your BTCPay Server")]),t._v(" "),e("p",[t._v("We now log into our BTCPay Server and run the update script so all the latest docker images (including BTCPay Shopify app) are downloaded.")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# if you are not root user, switch to root")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("su")]),t._v(" -\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# go to the BTCPay Server docker directory")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$BTCPAY_BASE_DIRECTORY")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" btcpayserver-docker\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# run the update script")]),t._v("\n./btcpay-update.sh\n")])])]),e("h4",{attrs:{id:"update-the-btcpay-shopify-app"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#update-the-btcpay-shopify-app"}},[t._v("#")]),t._v(" Update the BTCPay Shopify app")]),t._v(" "),e("ol",[e("li",[t._v("Log into your BTCPay Server")]),t._v(" "),e("li",[t._v("Select your store that is connected with Shopify")]),t._v(" "),e("li",[t._v("On the left sidebar click on "),e("code",[t._v("Shopify v2")])]),t._v(" "),e("li",[t._v('Expand the second section "Deploy the app"')]),t._v(" "),e("li",[t._v('Paste the CLI token and click on "Deploy App"\n'),e("img",{attrs:{src:a(735),alt:"plugin_update-app--deploy.png",title:"plugin_update-app--deploy.png"}})]),t._v(" "),e("li",[t._v("You will see some console output and the section will close if all went well\n"),e("img",{attrs:{src:a(736),alt:"plugin_update-app--console.png",title:"plugin_update-app--console.png"}}),t._v(" "),e("img",{attrs:{src:a(737),alt:"plugin_update-app--finished.png",title:"plugin_update-app--finished.png"}})])]),t._v(" "),e("p",[t._v("Congratulations, you have now updated the BTCPay Shopify app.")]),t._v(" "),e("h3",{attrs:{id:"i-cant-create-a-new-app-in-the-shopify-partner-portal"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#i-cant-create-a-new-app-in-the-shopify-partner-portal"}},[t._v("#")]),t._v(" I can't create a new app in the Shopify partner portal")]),t._v(" "),e("p",[t._v('Check if you profile on the top right says "null null". This means you did not enter your first and last name in the profile. You need to fill out those fields and it should work.')]),t._v(" "),e("ol",[e("li",[t._v("Click on your profile on the top right")]),t._v(" "),e("li",[t._v('Select "Your profile"')]),t._v(" "),e("li",[t._v('Enter "First name" and "Last name"')]),t._v(" "),e("li",[t._v("Return to shopify partners and it should work now")])]),t._v(" "),e("h2",{attrs:{id:"support-and-community"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#support-and-community"}},[t._v("#")]),t._v(" Support and community")]),t._v(" "),e("p",[t._v("Feel free to join our support channel over at "),e("a",{attrs:{href:"https://chat.btcpayserver.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mattermost"),e("OutboundLink")],1),t._v(" or "),e("a",{attrs:{href:"https://t.me/btcpayserver",target:"_blank",rel:"noopener noreferrer"}},[t._v("Telegram"),e("OutboundLink")],1),t._v(" if you need help or have any further questions.")])])}),[],!1,null,null,null);e.default=s.exports},343:function(t,e,a){t.exports=a.p+"assets/img/partners_settings.64090a07.png"},344:function(t,e,a){t.exports=a.p+"assets/img/partners_settings-cli-token.d2b78a59.png"},345:function(t,e,a){t.exports=a.p+"assets/img/partners_create-cli-token.4dcd283f.png"},346:function(t,e,a){t.exports=a.p+"assets/img/partners_create-cli-token-duration.d72b6a0f.png"},347:function(t,e,a){t.exports=a.p+"assets/img/partners_cli-token-created.46832e07.png"},698:function(t,e,a){t.exports=a.p+"assets/img/create_app_manually.d2c2a35a.png"},699:function(t,e,a){t.exports=a.p+"assets/img/partner-app_client-id-secret.4795a45d.png"},700:function(t,e,a){t.exports=a.p+"assets/img/partner_app_network_access.dfc7d15f.png"},701:function(t,e,a){t.exports=a.p+"assets/img/plugin_install.9c439b76.png"},702:function(t,e,a){t.exports=a.p+"assets/img/plugin_install-restart.46a3ceac.png"},703:function(t,e,a){t.exports=a.p+"assets/img/plugin_section-1.6732ed7c.png"},704:function(t,e,a){t.exports=a.p+"assets/img/plugin_section-2.1503d876.png"},705:function(t,e,a){t.exports=a.p+"assets/img/plugin_section-2--console-output.1899fca2.png"},706:function(t,e,a){t.exports=a.p+"assets/img/plugin_section-3.78b64091.png"},707:function(t,e,a){t.exports=a.p+"assets/img/app-deploy_custom-distribution-1.00bcb7ef.png"},708:function(t,e,a){t.exports=a.p+"assets/img/app-deploy_distribution-confirm.ba7101d7.png"},709:function(t,e,a){t.exports=a.p+"assets/img/app-deploy_distribution-copy-store-url.2e85c2ed.png"},710:function(t,e,a){t.exports=a.p+"assets/img/app-deploy_distribution-generate-link.ebeb1017.png"},711:function(t,e,a){t.exports=a.p+"assets/img/app-deploy_distribution-generated-link-copy.925e42a9.png"},712:function(t,e,a){t.exports=a.p+"assets/img/app-deploy_distribution-install-to-store-confirm.32549bb6.png"},713:function(t,e,a){t.exports=a.p+"assets/img/app-deploy_install-successful.e1ad14f4.png"},714:function(t,e,a){t.exports=a.p+"assets/img/app-deploy_plugin-all-green.8b1ec87e.png"},715:function(t,e,a){t.exports=a.p+"assets/img/app-setup_step-4-1.735b3d9f.png"},716:function(t,e,a){t.exports=a.p+"assets/img/app-setup_step-4-2.0b871a76.png"},717:function(t,e,a){t.exports=a.p+"assets/img/app-setup_step-5-1.a71cf731.png"},718:function(t,e,a){t.exports=a.p+"assets/img/app-setup_step-5-2.9550a3c5.png"},719:function(t,e,a){t.exports=a.p+"assets/img/app-setup_step-6.1bcb2593.png"},720:function(t,e,a){t.exports=a.p+"assets/img/app-setup_step-7.0cca2330.png"},721:function(t,e,a){t.exports=a.p+"assets/img/app-setup_step-8.66591a22.png"},722:function(t,e,a){t.exports=a.p+"assets/img/app-setup_step-9-1.98153ef7.png"},723:function(t,e,a){t.exports=a.p+"assets/img/app-setup_step-9-2.2cd78663.png"},724:function(t,e,a){t.exports=a.p+"assets/img/pm_step_1.1bea1f2a.png"},725:function(t,e,a){t.exports=a.p+"assets/img/pm_step_2_and_3.9bf6b09b.png"},726:function(t,e,a){t.exports=a.p+"assets/img/payment_option.08c972fd.png"},727:function(t,e,a){t.exports=a.p+"assets/img/complete_payment.62c00531.png"},728:function(t,e,a){t.exports=a.p+"assets/img/btcpay_checkout.36e5c20c.png"},729:function(t,e,a){t.exports=a.p+"assets/img/invoice_paid.904f82f8.png"},730:function(t,e,a){t.exports=a.p+"assets/img/order_status_page_after_payment.f26232ee.png"},731:function(t,e,a){t.exports=a.p+"assets/img/paid_invoice_btcpay.676f5a70.png"},732:function(t,e,a){t.exports=a.p+"assets/img/invoice_payment_details.e65e8d6b.png"},733:function(t,e,a){t.exports=a.p+"assets/img/plugin_install_fails.f87aa727.png"},734:function(t,e,a){t.exports=a.p+"assets/img/shopify_migration_old_user_error.c2158215.png"},735:function(t,e,a){t.exports=a.p+"assets/img/plugin_update-app--deploy.fb63d749.png"},736:function(t,e,a){t.exports=a.p+"assets/img/plugin_update-app--console.95ef7156.png"},737:function(t,e,a){t.exports=a.p+"assets/img/plugin_update-app--finished.8cdf47f4.png"}}]);