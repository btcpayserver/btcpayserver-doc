<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Fast sync Bitcoin for BTCPay Server | BTCPay Server</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="stylesheet" href="/styles/btcpayserver-variables.css">
    <meta name="description" content="BTCPay Server Official Documentation">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    
    <link rel="preload" href="/assets/css/0.styles.5d7f2299.css" as="style"><link rel="preload" href="/assets/js/app.01d0ad5b.js" as="script"><link rel="preload" href="/assets/js/2.69e840d8.js" as="script"><link rel="preload" href="/assets/js/52.4af82f1d.js" as="script"><link rel="prefetch" href="/assets/js/1.6dcc8ac1.js"><link rel="prefetch" href="/assets/js/100.e4c5460f.js"><link rel="prefetch" href="/assets/js/101.7cfb3c2d.js"><link rel="prefetch" href="/assets/js/102.6776f8f2.js"><link rel="prefetch" href="/assets/js/103.36ea5ac7.js"><link rel="prefetch" href="/assets/js/104.4a042728.js"><link rel="prefetch" href="/assets/js/105.f2aec81a.js"><link rel="prefetch" href="/assets/js/106.9d0ec7aa.js"><link rel="prefetch" href="/assets/js/107.31420484.js"><link rel="prefetch" href="/assets/js/108.b2360cce.js"><link rel="prefetch" href="/assets/js/109.661cd161.js"><link rel="prefetch" href="/assets/js/110.37b5d5ad.js"><link rel="prefetch" href="/assets/js/111.d537d64e.js"><link rel="prefetch" href="/assets/js/112.476fe814.js"><link rel="prefetch" href="/assets/js/113.750a97fa.js"><link rel="prefetch" href="/assets/js/114.048a62bf.js"><link rel="prefetch" href="/assets/js/115.00de1ce3.js"><link rel="prefetch" href="/assets/js/116.c2e215f0.js"><link rel="prefetch" href="/assets/js/117.60a56e9e.js"><link rel="prefetch" href="/assets/js/118.c3ad70fd.js"><link rel="prefetch" href="/assets/js/119.1fb35858.js"><link rel="prefetch" href="/assets/js/12.f01bd663.js"><link rel="prefetch" href="/assets/js/120.104a9ebb.js"><link rel="prefetch" href="/assets/js/121.9f7e9725.js"><link rel="prefetch" href="/assets/js/122.773a2b6b.js"><link rel="prefetch" href="/assets/js/123.ed98a80a.js"><link rel="prefetch" href="/assets/js/124.a48cd14f.js"><link rel="prefetch" href="/assets/js/125.0d702ee3.js"><link rel="prefetch" href="/assets/js/126.7ee3edde.js"><link rel="prefetch" href="/assets/js/127.8a71144f.js"><link rel="prefetch" href="/assets/js/128.dcd74f3f.js"><link rel="prefetch" href="/assets/js/129.e3338c03.js"><link rel="prefetch" href="/assets/js/13.80552765.js"><link rel="prefetch" href="/assets/js/130.4c95b490.js"><link rel="prefetch" href="/assets/js/131.6b065cc0.js"><link rel="prefetch" href="/assets/js/132.21abe491.js"><link rel="prefetch" href="/assets/js/133.dea3440a.js"><link rel="prefetch" href="/assets/js/134.c2bd6437.js"><link rel="prefetch" href="/assets/js/135.e7e37b87.js"><link rel="prefetch" href="/assets/js/136.034e2b1e.js"><link rel="prefetch" href="/assets/js/137.e374235b.js"><link rel="prefetch" href="/assets/js/138.eb05dc12.js"><link rel="prefetch" href="/assets/js/139.29c61ed3.js"><link rel="prefetch" href="/assets/js/14.931ae9fa.js"><link rel="prefetch" href="/assets/js/140.6dff3bd0.js"><link rel="prefetch" href="/assets/js/141.b4d6b8a2.js"><link rel="prefetch" href="/assets/js/142.dcd9a35f.js"><link rel="prefetch" href="/assets/js/143.79089bee.js"><link rel="prefetch" href="/assets/js/144.81ae5562.js"><link rel="prefetch" href="/assets/js/145.e2ab3a87.js"><link rel="prefetch" href="/assets/js/146.dcede175.js"><link rel="prefetch" href="/assets/js/147.5750d304.js"><link rel="prefetch" href="/assets/js/148.6deed62e.js"><link rel="prefetch" href="/assets/js/149.19c1fd81.js"><link rel="prefetch" href="/assets/js/15.297b8848.js"><link rel="prefetch" href="/assets/js/150.bfa60330.js"><link rel="prefetch" href="/assets/js/151.f50526f4.js"><link rel="prefetch" href="/assets/js/152.bc8a4c35.js"><link rel="prefetch" href="/assets/js/153.cebe0351.js"><link rel="prefetch" href="/assets/js/154.86cffbac.js"><link rel="prefetch" href="/assets/js/155.d1f357ca.js"><link rel="prefetch" href="/assets/js/156.a58c761a.js"><link rel="prefetch" href="/assets/js/157.95eae068.js"><link rel="prefetch" href="/assets/js/158.e15f7f6b.js"><link rel="prefetch" href="/assets/js/159.078b1c97.js"><link rel="prefetch" href="/assets/js/16.53ec9fa4.js"><link rel="prefetch" href="/assets/js/160.319c5e15.js"><link rel="prefetch" href="/assets/js/161.0f1b9d59.js"><link rel="prefetch" href="/assets/js/162.a9e0dda5.js"><link rel="prefetch" href="/assets/js/163.df93571c.js"><link rel="prefetch" href="/assets/js/164.bec676ed.js"><link rel="prefetch" href="/assets/js/165.4cdf8faf.js"><link rel="prefetch" href="/assets/js/166.071ec55a.js"><link rel="prefetch" href="/assets/js/167.e5847dd4.js"><link rel="prefetch" href="/assets/js/168.3646a201.js"><link rel="prefetch" href="/assets/js/169.53f9591a.js"><link rel="prefetch" href="/assets/js/17.1dd172e4.js"><link rel="prefetch" href="/assets/js/170.82b4d48c.js"><link rel="prefetch" href="/assets/js/171.85c14d62.js"><link rel="prefetch" href="/assets/js/172.c6212d30.js"><link rel="prefetch" href="/assets/js/173.7d4425cf.js"><link rel="prefetch" href="/assets/js/174.db0d46ef.js"><link rel="prefetch" href="/assets/js/175.e1375a12.js"><link rel="prefetch" href="/assets/js/18.d49cb66e.js"><link rel="prefetch" href="/assets/js/19.0e6ecc65.js"><link rel="prefetch" href="/assets/js/20.ab16e953.js"><link rel="prefetch" href="/assets/js/21.362d2eef.js"><link rel="prefetch" href="/assets/js/22.a1f1c20f.js"><link rel="prefetch" href="/assets/js/23.1a5f50b2.js"><link rel="prefetch" href="/assets/js/24.e5aeae4f.js"><link rel="prefetch" href="/assets/js/25.44a9dc7a.js"><link rel="prefetch" href="/assets/js/26.18218b7c.js"><link rel="prefetch" href="/assets/js/27.f7178af6.js"><link rel="prefetch" href="/assets/js/28.0cd74218.js"><link rel="prefetch" href="/assets/js/29.a06a73b6.js"><link rel="prefetch" href="/assets/js/3.5d51cd07.js"><link rel="prefetch" href="/assets/js/30.e2508810.js"><link rel="prefetch" href="/assets/js/31.4dd6ddbc.js"><link rel="prefetch" href="/assets/js/32.4fe7a710.js"><link rel="prefetch" href="/assets/js/33.c5b0bb01.js"><link rel="prefetch" href="/assets/js/34.e35f155e.js"><link rel="prefetch" href="/assets/js/35.bf713132.js"><link rel="prefetch" href="/assets/js/36.8effc16b.js"><link rel="prefetch" href="/assets/js/37.ac2ce1fc.js"><link rel="prefetch" href="/assets/js/38.2a64fadf.js"><link rel="prefetch" href="/assets/js/39.d8764013.js"><link rel="prefetch" href="/assets/js/4.daa0f049.js"><link rel="prefetch" href="/assets/js/40.2f8a729b.js"><link rel="prefetch" href="/assets/js/41.5d679408.js"><link rel="prefetch" href="/assets/js/42.2f879ed7.js"><link rel="prefetch" href="/assets/js/43.4cad130d.js"><link rel="prefetch" href="/assets/js/44.99963395.js"><link rel="prefetch" href="/assets/js/45.45c28e3e.js"><link rel="prefetch" href="/assets/js/46.b3571296.js"><link rel="prefetch" href="/assets/js/47.e6c986c3.js"><link rel="prefetch" href="/assets/js/48.02d166dd.js"><link rel="prefetch" href="/assets/js/49.03956705.js"><link rel="prefetch" href="/assets/js/5.3ca27d8b.js"><link rel="prefetch" href="/assets/js/50.6533953f.js"><link rel="prefetch" href="/assets/js/51.501c9179.js"><link rel="prefetch" href="/assets/js/53.1f850463.js"><link rel="prefetch" href="/assets/js/54.a6b38428.js"><link rel="prefetch" href="/assets/js/55.72c49f4a.js"><link rel="prefetch" href="/assets/js/56.2b6ae7ff.js"><link rel="prefetch" href="/assets/js/57.ed20b88a.js"><link rel="prefetch" href="/assets/js/58.2f2245bb.js"><link rel="prefetch" href="/assets/js/59.4dade192.js"><link rel="prefetch" href="/assets/js/6.c5d56401.js"><link rel="prefetch" href="/assets/js/60.0c8da18e.js"><link rel="prefetch" href="/assets/js/61.9ad14098.js"><link rel="prefetch" href="/assets/js/62.1eb29bf8.js"><link rel="prefetch" href="/assets/js/63.a4ad0a2b.js"><link rel="prefetch" href="/assets/js/64.1e68a1b2.js"><link rel="prefetch" href="/assets/js/65.7de684dc.js"><link rel="prefetch" href="/assets/js/66.032ad91f.js"><link rel="prefetch" href="/assets/js/67.94013764.js"><link rel="prefetch" href="/assets/js/68.ab45f60a.js"><link rel="prefetch" href="/assets/js/69.8ebbe909.js"><link rel="prefetch" href="/assets/js/7.0e189d0b.js"><link rel="prefetch" href="/assets/js/70.633570b1.js"><link rel="prefetch" href="/assets/js/71.989d2c8c.js"><link rel="prefetch" href="/assets/js/72.18edbfd4.js"><link rel="prefetch" href="/assets/js/73.483b0feb.js"><link rel="prefetch" href="/assets/js/74.d9a0cdbd.js"><link rel="prefetch" href="/assets/js/75.ee25c2a5.js"><link rel="prefetch" href="/assets/js/76.699dac12.js"><link rel="prefetch" href="/assets/js/77.9fce2371.js"><link rel="prefetch" href="/assets/js/78.5ec0adf7.js"><link rel="prefetch" href="/assets/js/79.19495dc6.js"><link rel="prefetch" href="/assets/js/8.1eaf45bf.js"><link rel="prefetch" href="/assets/js/80.90fd2143.js"><link rel="prefetch" href="/assets/js/81.d43f70c9.js"><link rel="prefetch" href="/assets/js/82.1399c9d5.js"><link rel="prefetch" href="/assets/js/83.a53ea771.js"><link rel="prefetch" href="/assets/js/84.4f6efd43.js"><link rel="prefetch" href="/assets/js/85.e9d9bd52.js"><link rel="prefetch" href="/assets/js/86.411465d5.js"><link rel="prefetch" href="/assets/js/87.e97f92c2.js"><link rel="prefetch" href="/assets/js/88.0105e11a.js"><link rel="prefetch" href="/assets/js/89.f9f05b3d.js"><link rel="prefetch" href="/assets/js/9.e1477110.js"><link rel="prefetch" href="/assets/js/90.baa31b7f.js"><link rel="prefetch" href="/assets/js/91.c3f9d342.js"><link rel="prefetch" href="/assets/js/92.8b88a285.js"><link rel="prefetch" href="/assets/js/93.accae1b6.js"><link rel="prefetch" href="/assets/js/94.0ba146fe.js"><link rel="prefetch" href="/assets/js/95.e764290c.js"><link rel="prefetch" href="/assets/js/96.4239a46b.js"><link rel="prefetch" href="/assets/js/97.6940a4af.js"><link rel="prefetch" href="/assets/js/98.cbc83444.js"><link rel="prefetch" href="/assets/js/99.7b682585.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.867fe92d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5d7f2299.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/btcpay-logo.svg" alt="BTCPay Server" class="logo"> <span class="site-name can-hide">BTCPay Server</span></a> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Guide/" class="nav-link">
  User Guide
</a></div><div class="nav-item"><a href="/Deployment/" class="nav-link">
  Deployment
</a></div><div class="nav-item"><a href="/Development/" class="nav-link">
  Developers
</a></div><div class="nav-item"><a href="/Contribute/" class="nav-link">
  Contribute
</a></div><div class="nav-item"><a href="/FAQ/" class="nav-link">
  FAQ
</a></div> <a href="https://github.com/btcpayserver/btcpayserver-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide social"><div class="nav-item"><a href="https://btcpayserver.org/" target="_blank" rel="noopener noreferrer website" class="nav-link external">
  Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://chat.btcpayserver.org/" target="_blank" rel="noopener noreferrer chat" class="nav-link external">
  Chat
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/btcpayserver/" target="_blank" rel="noopener noreferrer github" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://twitter.com/BtcpayServer" target="_blank" rel="noopener noreferrer twitter" class="nav-link external">
  Twitter
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/btcpayserver/btcpayserver-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <button type="button" class="btcpay-theme-switch"><svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path transform="translate(1 1)" d="M2.72 0A3.988 3.988 0 000 3.78c0 2.21 1.79 4 4 4 1.76 0 3.25-1.14 3.78-2.72-.4.13-.83.22-1.28.22-2.21 0-4-1.79-4-4 0-.45.08-.88.22-1.28z" class="btcpay-theme-switch-dark"></path><path transform="translate(1 1)" d="M4 0c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5S4.28 0 4 0zM1.5 1c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm5 0c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zM4 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM.5 3.5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm7 0c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zM1.5 6c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm5 0c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zM4 7c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5S4.28 7 4 7z" class="btcpay-theme-switch-light"></path></svg></button></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links social"><div class="nav-item"><a href="https://btcpayserver.org/" target="_blank" rel="noopener noreferrer website" class="nav-link external">
  Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://chat.btcpayserver.org/" target="_blank" rel="noopener noreferrer chat" class="nav-link external">
  Chat
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/btcpayserver/" target="_blank" rel="noopener noreferrer github" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://twitter.com/BtcpayServer" target="_blank" rel="noopener noreferrer twitter" class="nav-link external">
  Twitter
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/btcpayserver/btcpayserver-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <nav class="nav-links"><div class="nav-item"><a href="/Guide/" class="nav-link">
  User Guide
</a></div><div class="nav-item"><a href="/Deployment/" class="nav-link">
  Deployment
</a></div><div class="nav-item"><a href="/Development/" class="nav-link">
  Developers
</a></div><div class="nav-item"><a href="/Contribute/" class="nav-link">
  Contribute
</a></div><div class="nav-item"><a href="/FAQ/" class="nav-link">
  FAQ
</a></div> <a href="https://github.com/btcpayserver/btcpayserver-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Deployment</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Deployment/" class="sidebar-link">Choosing a Deployment Method</a></li><li><a href="/Deployment/ThirdPartyHosting/" class="sidebar-link">Third-party hosting</a></li><li><a href="/Configurator/" class="sidebar-link">Deploy BTCPay with Configurator</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Docker</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Docker/" aria-current="page" class="sidebar-link">Introduction</a></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/Deployment/webdeployment" class="sidebar-heading clickable"><span>Web/Cloud Deployment</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/Deployment/LunaNode/" class="sidebar-link">Luna Node</a></li><li><a href="/Deployment/voltagecloud/" class="sidebar-link">Voltage Cloud</a></li><li><a href="/Deployment/Clovyr/" class="sidebar-link">Clovyr</a></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><a href="/Deployment/Azure" class="sidebar-heading clickable"><span>Azure</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/Deployment/GoogleCloud/" class="sidebar-link">Google Cloud</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/Deployment/Hardware" class="sidebar-heading clickable"><span>Hardware Deployment</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/Deployment/RaspberryPi4/" class="sidebar-link">Raspberry Pi Deployment</a></li><li><a href="/Deployment/Hack0/" class="sidebar-link">Hack0 Deployment</a></li><li><a href="/Deployment/LightningInABox/" class="sidebar-link">LightningInABox Deployment</a></li><li><a href="/Deployment/DynamicDNS/" class="sidebar-link">Dynamic DNS</a></li><li><a href="/Docker/cloudflare-tunnel/" class="sidebar-link">Exposing on clearnet with Cloudflare</a></li><li><a href="/Deployment/ReverseSSHtunnel/" class="sidebar-link">Exposing on clearnet with a reverse SSH Tunnel</a></li><li><a href="/Deployment/ReverseProxyToTor/" class="sidebar-link">Exposing on Tor</a></li><li><a href="/Deployment/HardwareAsAService/" class="sidebar-link">Hardware As A Service</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Docker Plugins</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/Docker/fastsync/" aria-current="page" class="active sidebar-link">FastSync</a></li><li><a href="/Docker/backup-restore/" class="sidebar-link">Backup &amp; Restore</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Manual Deployment</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Deployment/ManualDeployment/" class="sidebar-link">Minimal manual setup</a></li><li><a href="/Deployment/ManualDeploymentExtended/" class="sidebar-link">Extended Manual Setup</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="fast-sync-bitcoin-for-btcpay-server"><a href="#fast-sync-bitcoin-for-btcpay-server" class="header-anchor">#</a> Fast sync Bitcoin for BTCPay Server</h1> <h2 id="what-problem-does-fast-sync-solve"><a href="#what-problem-does-fast-sync-solve" class="header-anchor">#</a> What problem does Fast Sync solve?</h2> <p>When you start a new BTCPay Server, you need to synchronize your Bitcoin node from the genesis block.</p> <p>Validating from the genesis blocks takes, in general, 1 or 2 days on affordable servers. (around 10$ per month)</p> <p>However, synchronization time will take around two weeks on some low-powered devices like a raspberry PI. (and it will linearly increase with time)</p> <p>Fast Sync provides a solution to decrease the synchronization time dramatically to minutes or a few hours.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Current UTXO Set snapshots only work for Bitcoin Core 0.17.0 or higher. Do NOT use these sets on older versions of Bitcoin Core (0.16.3 or lower)</p></div> <h2 id="how-does-fast-sync-solve-the-problem"><a href="#how-does-fast-sync-solve-the-problem" class="header-anchor">#</a> How does Fast Sync solve the problem?</h2> <p>For Bitcoin software to operate, you do not need all the history of blocks from the genesis.</p> <p>You need the state of Bitcoin up to a certain block (this state is called <code>UTXO Set</code>), and around ~300 blocks before this point.</p> <p>Fast Sync downloads the UTXO Set at a specific block on an external server, and deploy it on your node. We call this file a <code>UTXO Set snapshot</code>.</p> <p>When your node starts up again, with the <code>UTXO Set snapshot</code> it will only need to synchronize from this point to the latest blocks.</p> <h2 id="what-are-the-downsides-of-fast-sync"><a href="#what-are-the-downsides-of-fast-sync" class="header-anchor">#</a> What are the downsides of Fast Sync?</h2> <h3 id="malicious-utxo-set"><a href="#malicious-utxo-set" class="header-anchor">#</a> Malicious UTXO Set</h3> <p>Fast Sync can potentially get abused:</p> <ol><li>The attacker gives you a <code>UTXO Set snapshot</code>, which does not follow Bitcoin consensus.</li> <li>The attacker makes a purchase to your store.</li> <li>Nodes following the consensus would not recognize the payment as valid, but your node will.</li> <li>The coins the attacker sent you are just worthless.</li></ol> <p>Other attacks can completely bring down your node.</p> <h3 id="lightning-network-routing-issues"><a href="#lightning-network-routing-issues" class="header-anchor">#</a> Lightning Network routing issues</h3> <p>As a merchant, you generally do not care about this issue. Merchants are mainly receiving payment, so they don't need to do any routing.</p> <p>However, if you plan to send payments from your lightning node, you may have issues:</p> <p>Because you do not have old blocks, your lightning node won't see any channels created prior to the snapshot.</p> <p>If this is a problem for you, use an older snapshot.</p> <h2 id="how-to-verify-that-the-utxo-set-snapshot-follows-the-consensus"><a href="#how-to-verify-that-the-utxo-set-snapshot-follows-the-consensus" class="header-anchor">#</a> How to verify that the UTXO Set snapshot follows the consensus?</h2> <h3 id="if-you-trust-the-owner-of-this-repository"><a href="#if-you-trust-the-owner-of-this-repository" class="header-anchor">#</a> If you trust the owner of this repository....</h3> <p>The snapshots recognized as valid by the <code>btcpayserver-docker</code> repository you've cloned, can be found on <a href="https://github.com/btcpayserver/btcpayserver-docker/blob/master/contrib/FastSync/utxo-sets" target="_blank" rel="noopener noreferrer">utxo-sets<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>When you SSH into your new Sync BTCPay Server (by the use of Putty, for example), the first thing you have to do is become <code>root</code>.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span> -
</code></pre></div><p>Before you start the <a href="https://github.com/btcpayserver/btcpayserver-docker/blob/master/contrib/FastSync/load-utxo-set.sh" target="_blank" rel="noopener noreferrer">load-utxo-set.sh<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, you must bring down your BTCPay Server.</p> <p>In the <code>btcpayserver-docker</code> directory you run <code>btcpay-down.sh</code> to bring down your instance.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> <span class="token variable">$BTCPAY_BASE_DIRECTORY</span>/btcpayserver-docker
./btcpay-down.sh
</code></pre></div><figure><img src="/assets/img/btcpayfastsync1.b3088b95.jpg" alt="BTCPay Server FastSync" title="BTCPay Server FastSync"></figure> <p>After you've shut down BTCPay Server, you now go into the FastSync directory and run the <code>load-utxo-set.sh</code> script:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> <span class="token variable">$BTCPAY_BASE_DIRECTORY</span>/btcpayserver-docker/contrib/FastSync
./load-utxo-set.sh
</code></pre></div><p>The script <a href="https://github.com/btcpayserver/btcpayserver-docker/blob/master/contrib/FastSync/load-utxo-set.sh" target="_blank" rel="noopener noreferrer">load-utxo-set.sh<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> will download the utxo-set from the environment variable <code>UTXO_DOWNLOAD_LINK</code>.</p> <p>If <code>UTXO_DOWNLOAD_LINK</code> is empty, <code>NBITCOIN_NETWORK</code> (with value set to <code>mainnet</code> or <code>testnet</code>) will be used to take a default <code>UTXO_DOWNLOAD_LINK</code> that we hard coded inside <a href="https://github.com/btcpayserver/btcpayserver-docker/blob/master/contrib/FastSync/load-utxo-set.sh" target="_blank" rel="noopener noreferrer">load-utxo-set.sh<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <figure><img src="/assets/img/btcpayfastsync2.4daae8f3.jpg" alt="BTCPay Server FastSync" title="BTCPay Server FastSync"></figure> <p>Once the files are downloaded, the hash will be checked against those in <a href="https://github.com/btcpayserver/btcpayserver-docker/blob/master/contrib/FastSync/utxo-sets" target="_blank" rel="noopener noreferrer">utxo-sets<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <figure><img src="/assets/img/btcpayfastsync3.97ca261b.jpg" alt="BTCPay Server FastSync" title="BTCPay Server FastSync"></figure> <p>After the <a href="https://github.com/btcpayserver/btcpayserver-docker/blob/master/contrib/FastSync/load-utxo-set.sh" target="_blank" rel="noopener noreferrer">load-utxo-set.sh<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is done, you will be warned, and asked to delete the docker volume <code>generated_bitcoin_wallet_datadir</code>.
This will be recreated when we now run the <code>btcpay-up.sh</code> script.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">docker</span> volume <span class="token function">rm</span> generated_bitcoin_wallet_datadir
</code></pre></div><p>Now go back to the <code>btcpayserver-docker</code> directory, and let's restart your Server with <code>./btcpay-up.sh</code> to sync the rest!</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> <span class="token variable">$BTCPAY_BASE_DIRECTORY</span>/btcpayserver-docker
./btcpay-up.sh
</code></pre></div><p>The rest of the Sync will take place on your BTCPay Server until it reaches the latest block height.</p> <p>You can either follow this process in the UI of the BTCPay Server or run the following command in the CLI. This will show you the latest log output and the current block height of your <code>Fast Sync</code> node.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">docker</span> logs <span class="token parameter variable">--tail</span> <span class="token parameter variable">-100</span> btcpayserver_bitcoind
</code></pre></div><figure><img src="/assets/img/btcpayfastsync4.c09d48fe.jpg" alt="BTCPay Server FastSync" title="BTCPay Server FastSync"></figure> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p><strong>However: This will only prove that the owner of this git repository is honest, and the utxo-sets are verified and correct.</strong> <strong>Completing those steps does not mean that the UTXO set snapshot is legit. It only means that you trust the owner of this git repository to have verified that it is legit.</strong></p></div> <h3 id="dont-trust-verify-"><a href="#dont-trust-verify-" class="header-anchor">#</a> Don't trust, verify!<a name="donttrust"></a></h3> <p>If you don't trust anybody, which should be the case as much as possible, then here are the steps to verify that the UTXO set you just loaded is not malicious.</p> <ol><li>You need another node that you own, entirely <code>under your control</code>, that <code>you synchronized from the genesis block</code>. Let's call this node <code>Trusty</code>.</li> <li>In the previous <a href="/Docker/#if-you-trust-the-owner-of-this-repository">step</a> you've set up the <code>Fast Sync</code> node. Let's call this <code>Synchy</code>.</li> <li>Wait for <code>Synchy</code> to be fully synced.</li> <li>Now on, <code>Synchy</code> and <code>Trusty</code> run the following command at the same time:</li></ol> <p>If <code>Synchy</code> or <code>Trusty</code> are both using BTCPay Server, go to the <code>btcpayserver-docker</code> directory and use:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> <span class="token variable">$BTCPAY_BASE_DIRECTORY</span>/btcpayserver-docker
./bitcoin-cli.sh gettxoutsetinfo
</code></pre></div><p>Or use if non BTCPay Server node :</p> <div class="language-bash extra-class"><pre class="language-bash"><code> bitcoin-cli gettxoutsetinfo
</code></pre></div><p>Running this command might take some time, and nothing will show up in the terminal in the meantime.</p> <ol start="5"><li>Verify that the output of <code>Synchy</code> and <code>Trusty</code> are identical (you can ignore <code>disk_size</code>).</li></ol> <figure><img src="/assets/img/btcpayfastsync6.e4367afb.jpg" alt="BTCPay Server FastSync" title="BTCPay Server FastSync"></figure> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p><strong>Completing those steps, assuming the software you are running is not malicious, correctly prove that the UTXO set snapshot is legit</strong>.</p></div> <h3 id="if-you-trust-someone-else"><a href="#if-you-trust-someone-else" class="header-anchor">#</a> If you trust someone else...</h3> <p>This repository contains the signatures of some developers, for example <a href="https://github.com/btcpayserver/btcpayserver-docker/blob/master/contrib/FastSync/sigs/NicolasDorier.utxo-sets.asc" target="_blank" rel="noopener noreferrer">sigs/NicolasDorier.utxo-sets.asc<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> contains the hashes that <code>NicolasDorier</code> verified himself.</p> <p>You need to verify with <a href="https://keybase.io/docs/command_line" target="_blank" rel="noopener noreferrer">KeyBase command line<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> that the signature is legit:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>keybase pgp verify <span class="token parameter variable">-i</span> sigs/NicolasDorier.utxo-sets.asc
</code></pre></div><p>If you don't like command line, you can verify against <a href="https://keybase.io/verify" target="_blank" rel="noopener noreferrer">keybase verify page<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> by just copying and pasting the content of <a href="https://github.com/btcpayserver/btcpayserver-docker/blob/master/contrib/FastSync/sigs/NicolasDorier.utxo-sets.asc" target="_blank" rel="noopener noreferrer">sigs/NicolasDorier.utxo-sets.asc<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>You can verify that the handle <code>NicolasDorier</code> refers to the person who controls <code>NicolasDorier</code> Twitter, GitHub, and Reddit handle on <a href="https://keybase.io/NicolasDorier" target="_blank" rel="noopener noreferrer">the keybase profile page<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><strong>Completing those steps does not mean that the UTXO set snapshot is legit</strong>. It only means that you trust the owner of a Keybase account, who has proved access to some social media accounts in the past.</p></div> <h2 id="faq"><a href="#faq" class="header-anchor">#</a> FAQ</h2> <h3 id="can-i-add-my-signature-to-this-repository"><a href="#can-i-add-my-signature-to-this-repository" class="header-anchor">#</a> Can I add my signature to this repository?</h3> <p>If you are a bitcoin developer or public figure, feel free to add your signature. For this, you need:</p> <ol><li>A <a href="http://keybase.io" target="_blank" rel="noopener noreferrer">keybase account<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> linked to your social media accounts.</li> <li>Follow the steps described in the <a href="#donttrust">Don't trust, verify!</a> section for each snapshot you want to sign.</li> <li>Create a file with the same format as <a href="https://github.com/btcpayserver/btcpayserver-docker/blob/master/contrib/FastSync/utxo-sets" target="_blank" rel="noopener noreferrer">utxo-sets<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> with the snapshots you validated. (Let's call this file <code>YOU.utxo-sets</code>)</li> <li>Run the following command line</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> <span class="token variable">$BTCPAY_BASE_DIRECTORY</span>/btcpayserver-docker/contrib/FastSync
keybase pgp sign <span class="token parameter variable">-i</span> YOU.utxo-sets <span class="token parameter variable">-c</span> <span class="token parameter variable">-t</span> <span class="token parameter variable">-o</span> sigs/YOU.utxo-sets.asc
<span class="token function">rm</span> YOU.utxo-sets
<span class="token function">git</span> <span class="token function">add</span> sigs/YOU.utxo-sets.asc
<span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">&quot;Add YOU utxo-set signature&quot;</span> <span class="token parameter variable">--all</span>
</code></pre></div><p>And make a pull request to <code>btcpayserver-docker</code> repository.</p> <h3 id="where-can-i-download-utxo-set-snapshots"><a href="#where-can-i-download-utxo-set-snapshots" class="header-anchor">#</a> Where can I download UTXO set snapshots</h3> <p>You should not need to do this because <a href="https://github.com/btcpayserver/btcpayserver-docker/blob/master/contrib/FastSync/load-utxo-set.sh" target="_blank" rel="noopener noreferrer">load-utxo-set.sh<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> will do the hard work for you.</p> <p>But if you want, browse on <a href="http://utxosets.blob.core.windows.net/public?restype=container&amp;comp=list&amp;include=metadata" target="_blank" rel="noopener noreferrer">this listing<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>Select the snapshot you want, and download it by querying <code>http://utxosets.blob.core.windows.net/public/{blobName}</code>.</p> <h3 id="how-can-i-create-my-own-snapshot"><a href="#how-can-i-create-my-own-snapshot" class="header-anchor">#</a> How can I create my own snapshot?</h3> <p>Assuming you have a node running on a docker deployment of BTCPay Server, you need to run <a href="https://github.com/btcpayserver/btcpayserver-docker/blob/master/contrib/FastSync/save-utxo-set.sh" target="_blank" rel="noopener noreferrer">save-utxo-set.sh<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>This script shows the steps to create an archive of the current UTXO Set
It will:</p> <ol><li>Shutdown BTCPay Server</li> <li>Start bitcoind</li> <li>Prune it to up to 289 blocks from the tip</li> <li>Stop bitcoind</li> <li>Archive in a tarball the blocks and chainstate directories</li> <li>Restart BTCPay</li> <li>If <code>AZURE_STORAGE_CONNECTION_STRING</code> is set, then upload to azure storage and make the blob public else print hash and tarball</li></ol> <h3 id="how-can-i-do-this-for-my-altcoin"><a href="#how-can-i-do-this-for-my-altcoin" class="header-anchor">#</a> How can I do this for my altcoin?</h3> <p>Your altcoin does not need it. Almost nobody uses it compared to bitcoin.</p> <p>However, if you insist follow what we did for Bitcoin, we can't handhold you on this.</p> <h3 id="do-you-plan-to-destroy-bitcoin"><a href="#do-you-plan-to-destroy-bitcoin" class="header-anchor">#</a> Do you plan to destroy Bitcoin?</h3> <p>This feature may be controversial because of the risk that almost nobody will follow the <a href="#donttrust">Don't trust, verify!</a> step.</p> <p>What if somebody starts spreading a corrupted snapshot on the wild scale?</p> <p>I think this issue can be mitigated at the social layer. If several people start using social media to spread their <code>bitcoin-cli getutxosetinfo</code> every 10 000 blocks, any corrupt snapshot would be soon detected. We plan to make expose the hash via <code>BTCPayServer</code> and make it easy for people to share.</p> <h3 id="why-you-dont-just-make-btcpayserver-rely-on-spv"><a href="#why-you-dont-just-make-btcpayserver-rely-on-spv" class="header-anchor">#</a> Why you don't just: Make BTCPayServer rely on SPV</h3> <p>All SPV solution brings a systemic risk to Bitcoin. Suppose everybody relies on SPV to accept payment, and miners want to change consensus rules. In that case, you will have no leverage as an individual or a community to decide against.</p> <p>Even with <code>UTXO Set snapshots</code>, you continue to validate consensus rules from the block of the snapshot.</p> <h3 id="why-you-dont-just-make-btcpayserver-rely-on-an-external-trusted-node"><a href="#why-you-dont-just-make-btcpayserver-rely-on-an-external-trusted-node" class="header-anchor">#</a> Why you don't just: Make BTCPayServer rely on an external trusted node</h3> <p>Why not just host BTCPayServer on the raspberry pi, but the full bitcoin node on another machine?</p> <p>For two reasons:</p> <p>First, <code>BTCPayServer</code> is trying to reduce the technical barriers to operating payments on your own. Running on an external node means that the user needs the technical skills to set it up.</p> <p><code>BTCPayServer</code> also relies on Bitcoin's RPC, which is not meant to be exposed on the internet. We can't see a simple enough solution that would allow normal people to run an external node elsewhere.</p> <p>The second reason is reliability: You want your service to be self-contained. If you host a node on another server, and for some reason, this Server goes down, then your <code>BTCPayServer</code> hosted on the raspberry PI will also cease to function.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/btcpayserver/btcpayserver-doc/edit/master/docs/Docker/fastsync.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="edit-link"><a href="https://github.com/btcpayserver/btcpayserver-doc/issues/new?title=Improve%20Fast%20sync%20Bitcoin%20for%20BTCPay%20Server&amp;body=I%20could%20not%20find%20the%20information%20I%20was%20looking%20for%20on%20the%20%22Fast%20sync%20Bitcoin%20for%20BTCPay%20Server%22%20page%20(%60%2FDocker%2Ffastsync%2F%60).%0A%0A%5BPLEASE%20DESCRIBE%20HOW%20THE%20PAGE%20CAN%20BE%20IMPROVED%5D&amp;labels=question" target="_blank" rel="noopener noreferrer">Didn't find an answer?</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Docker/cloudflare-tunnel/" class="prev">
        Cloudflare tunnel support
      </a></span> <span class="next"><a href="/Docker/backup-restore/">
        Backup &amp; Restore
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.01d0ad5b.js" defer></script><script src="/assets/js/2.69e840d8.js" defer></script><script src="/assets/js/52.4af82f1d.js" defer></script>
  </body>
</html>
